!function(){var e={135:function(e,t,n){var r;e=n.nmd(e);var a=function(e){"use strict";var t=1e7,n=9007199254740992,r=p(n),i="0123456789abcdefghijklmnopqrstuvwxyz",o="function"==typeof BigInt;function l(e,t,n,r){return void 0===e?l[0]:void 0===t||10==+t&&!n?Y(e):function(e,t,n,r){var a;n=n||i,e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var o=e.length,l=Math.abs(t),u={};for(a=0;a<n.length;a++)u[n[a]]=a;for(a=0;a<o;a++)if("-"!==(d=e[a])&&d in u&&u[d]>=l){if("1"===d&&1===l)continue;throw new Error(d+" is not a valid digit in base "+t+".")}t=Y(t);var c=[],s="-"===e[0];for(a=s?1:0;a<e.length;a++){var d;if((d=e[a])in u)c.push(Y(u[d]));else{if("<"!==d)throw new Error(d+" is not a valid character");var p=a;do{a++}while(">"!==e[a]&&a<e.length);c.push(Y(e.slice(p+1,a)))}}return B(c,t,s)}(e,t,n,r)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function c(e){this.value=e,this.sign=e<0,this.isSmall=!0}function s(e){this.value=e}function d(e){return-n<e&&e<n}function p(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){h(e);var n=e.length;if(n<4&&D(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function v(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function y(e,n){var r,a,i=e.length,o=n.length,l=new Array(i),u=0,c=t;for(a=0;a<o;a++)u=(r=e[a]+n[a]+u)>=c?1:0,l[a]=r-u*c;for(;a<i;)u=(r=e[a]+u)===c?1:0,l[a++]=r-u*c;return u>0&&l.push(u),l}function E(e,t){return e.length>=t.length?y(e,t):y(t,e)}function g(e,n){var r,a,i=e.length,o=new Array(i),l=t;for(a=0;a<i;a++)r=e[a]-l+n,n=Math.floor(r/l),o[a]=r-n*l,n+=1;for(;n>0;)o[a++]=n%l,n=Math.floor(n/l);return o}function C(e,n){var r,a,i=e.length,o=n.length,l=new Array(i),u=0,c=t;for(r=0;r<o;r++)(a=e[r]-u-n[r])<0?(a+=c,u=1):u=0,l[r]=a;for(r=o;r<i;r++){if(!((a=e[r]-u)<0)){l[r++]=a;break}a+=c,l[r]=a}for(;r<i;r++)l[r]=e[r];return h(l),l}function b(e,n,r){var a,i,o=e.length,l=new Array(o),s=-n,d=t;for(a=0;a<o;a++)i=e[a]+s,s=Math.floor(i/d),i%=d,l[a]=i<0?i+d:i;return"number"==typeof(l=f(l))?(r&&(l=-l),new c(l)):new u(l,r)}function T(e,n){var r,a,i,o,l=e.length,u=n.length,c=v(l+u),s=t;for(i=0;i<l;++i){o=e[i];for(var d=0;d<u;++d)r=o*n[d]+c[i+d],a=Math.floor(r/s),c[i+d]=r-a*s,c[i+d+1]+=a}return h(c),c}function I(e,n){var r,a,i=e.length,o=new Array(i),l=t,u=0;for(a=0;a<i;a++)r=e[a]*n+u,u=Math.floor(r/l),o[a]=r-u*l;for(;u>0;)o[a++]=u%l,u=Math.floor(u/l);return o}function S(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function _(e,t){var n=Math.max(e.length,t.length);if(n<=30)return T(e,t);n=Math.ceil(n/2);var r=e.slice(n),a=e.slice(0,n),i=t.slice(n),o=t.slice(0,n),l=_(a,o),u=_(r,i),c=_(E(a,r),E(o,i)),s=E(E(l,S(C(C(c,l),u),n)),S(u,2*n));return h(s),s}function N(e,n,r){return new u(e<t?I(n,e):T(n,p(e)),r)}function A(e){var n,r,a,i,o=e.length,l=v(o+o),u=t;for(a=0;a<o;a++){r=0-(i=e[a])*i;for(var c=a;c<o;c++)n=i*e[c]*2+l[a+c]+r,r=Math.floor(n/u),l[a+c]=n-r*u;l[a+o]=r}return h(l),l}function L(e,t){var n,r,a,i,o=e.length,l=v(o);for(a=0,n=o-1;n>=0;--n)a=(i=1e7*a+e[n])-(r=m(i/t))*t,l[n]=0|r;return[l,0|a]}function w(e,n){var r,a,i=Y(n);if(o)return[new s(e.value/i.value),new s(e.value%i.value)];var d=e.value,y=i.value;if(0===y)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new c(m(d/y)),new c(d%y)]:[l[0],e];if(i.isSmall){if(1===y)return[e,l[0]];if(-1==y)return[e.negate(),l[0]];var E=Math.abs(y);if(E<t){a=f((r=L(d,E))[0]);var g=r[1];return e.sign&&(g=-g),"number"==typeof a?(e.sign!==i.sign&&(a=-a),[new c(a),new c(g)]):[new u(a,e.sign!==i.sign),new c(g)]}y=p(E)}var b=D(d,y);if(-1===b)return[l[0],e];if(0===b)return[l[e.sign===i.sign?1:-1],l[0]];a=(r=d.length+y.length<=200?function(e,n){var r,a,i,o,l,u,c,s=e.length,d=n.length,p=t,h=v(n.length),m=n[d-1],y=Math.ceil(p/(2*m)),E=I(e,y),g=I(n,y);for(E.length<=s&&E.push(0),g.push(0),m=g[d-1],a=s-d;a>=0;a--){for(r=p-1,E[a+d]!==m&&(r=Math.floor((E[a+d]*p+E[a+d-1])/m)),i=0,o=0,u=g.length,l=0;l<u;l++)i+=r*g[l],c=Math.floor(i/p),o+=E[a+l]-(i-c*p),i=c,o<0?(E[a+l]=o+p,o=-1):(E[a+l]=o,o=0);for(;0!==o;){for(r-=1,i=0,l=0;l<u;l++)(i+=E[a+l]-p+g[l])<0?(E[a+l]=i+p,i=0):(E[a+l]=i,i=1);o+=i}h[a]=r}return E=L(E,y)[0],[f(h),f(E)]}(d,y):function(e,n){for(var r,a,i,o,l,u=e.length,c=n.length,s=[],d=[],p=t;u;)if(d.unshift(e[--u]),h(d),D(d,n)<0)s.push(0);else{i=d[(a=d.length)-1]*p+d[a-2],o=n[c-1]*p+n[c-2],a>c&&(i=(i+1)*p),r=Math.ceil(i/o);do{if(D(l=I(n,r),d)<=0)break;r--}while(r);s.push(r),d=C(d,l)}return s.reverse(),[f(s),f(d)]}(d,y))[0];var T=e.sign!==i.sign,S=r[1],_=e.sign;return"number"==typeof a?(T&&(a=-a),a=new c(a)):a=new u(a,T),"number"==typeof S?(_&&(S=-S),S=new c(S)):S=new u(S,_),[a,S]}function D(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function O(e){var t=e.abs();return!t.isUnit()&&(!!t.equals(2)||!!t.equals(3)||!!t.equals(5)||!t.isEven()&&!t.isDivisibleBy(3)&&!t.isDivisibleBy(5)&&(!!t.lesser(49)||void 0))}function R(e,t){for(var n,r,i,o=e.prev(),l=o,u=0;l.isEven();)l=l.divide(2),u++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(i=a(t[r]).modPow(l,e)).isUnit()&&!i.equals(o)){for(n=u-1;0!=n;n--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(o))continue e}return!1}return!0}u.prototype=Object.create(l.prototype),c.prototype=Object.create(l.prototype),s.prototype=Object.create(l.prototype),u.prototype.add=function(e){var t=Y(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new u(g(n,Math.abs(r)),this.sign):new u(E(n,r),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){var t=Y(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(d(n+r))return new c(n+r);r=p(Math.abs(r))}return new u(g(r,Math.abs(n)),n<0)},c.prototype.plus=c.prototype.add,s.prototype.add=function(e){return new s(this.value+Y(e).value)},s.prototype.plus=s.prototype.add,u.prototype.subtract=function(e){var t=Y(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?b(n,Math.abs(r),this.sign):function(e,t,n){var r;return D(e,t)>=0?r=C(e,t):(r=C(t,e),n=!n),"number"==typeof(r=f(r))?(n&&(r=-r),new c(r)):new u(r,n)}(n,r,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){var t=Y(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new c(n-r):b(r,Math.abs(n),n>=0)},c.prototype.minus=c.prototype.subtract,s.prototype.subtract=function(e){return new s(this.value-Y(e).value)},s.prototype.minus=s.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var e=this.sign,t=new c(-this.value);return t.sign=!e,t},s.prototype.negate=function(){return new s(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},s.prototype.abs=function(){return new s(this.value>=0?this.value:-this.value)},u.prototype.multiply=function(e){var n,r,a,i=Y(e),o=this.value,c=i.value,s=this.sign!==i.sign;if(i.isSmall){if(0===c)return l[0];if(1===c)return this;if(-1===c)return this.negate();if((n=Math.abs(c))<t)return new u(I(o,n),s);c=p(n)}return new u(-.012*(r=o.length)-.012*(a=c.length)+15e-6*r*a>0?_(o,c):T(o,c),s)},u.prototype.times=u.prototype.multiply,c.prototype._multiplyBySmall=function(e){return d(e.value*this.value)?new c(e.value*this.value):N(Math.abs(e.value),p(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?l[0]:1===e.value?this:-1===e.value?this.negate():N(Math.abs(e.value),this.value,this.sign!==e.sign)},c.prototype.multiply=function(e){return Y(e)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,s.prototype.multiply=function(e){return new s(this.value*Y(e).value)},s.prototype.times=s.prototype.multiply,u.prototype.square=function(){return new u(A(this.value),!1)},c.prototype.square=function(){var e=this.value*this.value;return d(e)?new c(e):new u(A(p(Math.abs(this.value))),!1)},s.prototype.square=function(e){return new s(this.value*this.value)},u.prototype.divmod=function(e){var t=w(this,e);return{quotient:t[0],remainder:t[1]}},s.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(e){return w(this,e)[0]},s.prototype.over=s.prototype.divide=function(e){return new s(this.value/Y(e).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(e){return w(this,e)[1]},s.prototype.mod=s.prototype.remainder=function(e){return new s(this.value%Y(e).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(e){var t,n,r,a=Y(e),i=this.value,o=a.value;if(0===o)return l[1];if(0===i)return l[0];if(1===i)return l[1];if(-1===i)return a.isEven()?l[1]:l[-1];if(a.sign)return l[0];if(!a.isSmall)throw new Error("The exponent "+a.toString()+" is too large.");if(this.isSmall&&d(t=Math.pow(i,o)))return new c(m(t));for(n=this,r=l[1];!0&o&&(r=r.times(n),--o),0!==o;)o/=2,n=n.square();return r},c.prototype.pow=u.prototype.pow,s.prototype.pow=function(e){var t=Y(e),n=this.value,r=t.value,a=BigInt(0),i=BigInt(1),o=BigInt(2);if(r===a)return l[1];if(n===a)return l[0];if(n===i)return l[1];if(n===BigInt(-1))return t.isEven()?l[1]:l[-1];if(t.isNegative())return new s(a);for(var u=this,c=l[1];(r&i)===i&&(c=c.times(u),--r),r!==a;)r/=o,u=u.square();return c},u.prototype.modPow=function(e,t){if(e=Y(e),(t=Y(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var n=l[1],r=this.mod(t);for(e.isNegative()&&(e=e.multiply(l[-1]),r=r.modInv(t));e.isPositive();){if(r.isZero())return l[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},s.prototype.modPow=c.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(e){var t=Y(e),n=this.value,r=t.value;return t.isSmall?1:D(n,r)},c.prototype.compareAbs=function(e){var t=Y(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},s.prototype.compareAbs=function(e){var t=this.value,n=Y(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:D(n,r)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},c.prototype.compareTo=c.prototype.compare,s.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=Y(e).value;return t===n?0:t>n?1:-1},s.prototype.compareTo=s.prototype.compare,u.prototype.equals=function(e){return 0===this.compare(e)},s.prototype.eq=s.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(e){return 0!==this.compare(e)},s.prototype.neq=s.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(e){return this.compare(e)>0},s.prototype.gt=s.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(e){return this.compare(e)<0},s.prototype.lt=s.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},s.prototype.geq=s.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},s.prototype.leq=s.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return!(1&this.value[0])},c.prototype.isEven=function(){return!(1&this.value)},s.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return!(1&~this.value[0])},c.prototype.isOdd=function(){return!(1&~this.value)},s.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},s.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},s.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},s.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},s.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(e){var t=Y(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},s.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(t){var n=O(this);if(n!==e)return n;var r=this.abs(),i=r.bitLength();if(i<=64)return R(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*i.toJSNumber(),l=Math.ceil(!0===t?2*Math.pow(o,2):o),u=[],c=0;c<l;c++)u.push(a(c+2));return R(r,u)},s.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(t,n){var r=O(this);if(r!==e)return r;for(var i=this.abs(),o=t===e?5:t,l=[],u=0;u<o;u++)l.push(a.randBetween(2,i.minus(2),n));return R(i,l)},s.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(e){for(var t,n,r,i=a.zero,o=a.one,l=Y(e),u=this.abs();!u.isZero();)t=l.divide(u),n=i,r=l,i=o,l=u,o=n.subtract(t.multiply(o)),u=r.subtract(t.multiply(u));if(!l.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},s.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var e=this.value;return this.sign?b(e,1,this.sign):new u(g(e,1),this.sign)},c.prototype.next=function(){var e=this.value;return e+1<n?new c(e+1):new u(r,!1)},s.prototype.next=function(){return new s(this.value+BigInt(1))},u.prototype.prev=function(){var e=this.value;return this.sign?new u(g(e,1),!0):b(e,1,this.sign)},c.prototype.prev=function(){var e=this.value;return e-1>-n?new c(e-1):new u(r,!0)},s.prototype.prev=function(){return new s(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var M=P.length,k=P[M-1];function x(e){return Math.abs(e)<=t}function V(e,t,n){t=Y(t);for(var r=e.isNegative(),i=t.isNegative(),o=r?e.not():e,l=i?t.not():t,u=0,c=0,s=null,d=null,p=[];!o.isZero()||!l.isZero();)u=(s=w(o,k))[1].toJSNumber(),r&&(u=k-1-u),c=(d=w(l,k))[1].toJSNumber(),i&&(c=k-1-c),o=s[0],l=d[0],p.push(n(u,c));for(var f=0!==n(r?1:0,i?1:0)?a(-1):a(0),h=p.length-1;h>=0;h-=1)f=f.multiply(k).add(a(p[h]));return f}u.prototype.shiftLeft=function(e){var t=Y(e).toJSNumber();if(!x(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=M;)n=n.multiply(k),t-=M-1;return n.multiply(P[t])},s.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(e){var t,n=Y(e).toJSNumber();if(!x(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=M;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=w(r,k))[1].isNegative()?t[0].prev():t[0],n-=M-1}return(t=w(r,P[n]))[1].isNegative()?t[0].prev():t[0]},s.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},s.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(e){return V(this,e,(function(e,t){return e&t}))},s.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(e){return V(this,e,(function(e,t){return e|t}))},s.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(e){return V(this,e,(function(e,t){return e^t}))},s.prototype.xor=c.prototype.xor=u.prototype.xor;var H=1073741824;function W(e){var n=e.value,r="number"==typeof n?n|H:"bigint"==typeof n?n|BigInt(H):n[0]+n[1]*t|1073758208;return r&-r}function U(e,t){if(t.compareTo(e)<=0){var n=U(e,t.square(t)),r=n.p,i=n.e,o=r.multiply(t);return o.compareTo(e)<=0?{p:o,e:2*i+1}:{p:r,e:2*i}}return{p:a(1),e:0}}function G(e,t){return e=Y(e),t=Y(t),e.greater(t)?e:t}function F(e,t){return e=Y(e),t=Y(t),e.lesser(t)?e:t}function z(e,t){if(e=Y(e).abs(),t=Y(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,a=l[1];e.isEven()&&t.isEven();)n=F(W(e),W(t)),e=e.divide(n),t=t.divide(n),a=a.multiply(n);for(;e.isEven();)e=e.divide(W(e));do{for(;t.isEven();)t=t.divide(W(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return a.isUnit()?e:e.multiply(a)}function B(e,t,n){var r,a=l[0],i=l[1];for(r=e.length-1;r>=0;r--)a=a.add(e[r].times(i)),i=i.times(t);return n?a.negate():a}function q(e,t){if((t=a(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r,i=!1;if(e.isNegative()&&t.isPositive()&&(i=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:i};for(var o=[],l=e;l.isNegative()||l.compareAbs(t)>=0;){r=l.divmod(t),l=r.quotient;var u=r.remainder;u.isNegative()&&(u=t.minus(u).abs(),l=l.next()),o.push(u.toJSNumber())}return o.push(l.toJSNumber()),{value:o.reverse(),isNegative:i}}function Z(e,t,n){var r=q(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||i).length?t[e]:"<"+e+">"}(e,n)})).join("")}function j(e){if(d(+e)){var t=+e;if(t===m(t))return o?new s(BigInt(t)):new c(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var a=r[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==m(a)||!d(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var i=r[0],l=i.indexOf(".");if(l>=0&&(a-=i.length-l-1,i=i.slice(0,l)+i.slice(l+1)),a<0)throw new Error("Cannot include negative exponent part for integers");e=i+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(o)return new s(BigInt(n?"-"+e:e));for(var p=[],f=e.length,v=f-7;f>0;)p.push(+e.slice(v,f)),(v-=7)<0&&(v=0),f-=7;return h(p),new u(p,n)}function Y(e){return"number"==typeof e?function(e){if(o)return new s(BigInt(e));if(d(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new c(e)}return j(e.toString())}(e):"string"==typeof e?j(e):"bigint"==typeof e?new s(e):e}u.prototype.bitLength=function(){var e=this;return e.compareTo(a(0))<0&&(e=e.negate().subtract(a(1))),0===e.compareTo(a(0))?a(0):a(U(e,a(2)).e).add(a(1))},s.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength,u.prototype.toArray=function(e){return q(this,e)},c.prototype.toArray=function(e){return q(this,e)},s.prototype.toArray=function(e){return q(this,e)},u.prototype.toString=function(t,n){if(t===e&&(t=10),10!==t)return Z(this,t,n);for(var r,a=this.value,i=a.length,o=String(a[--i]);--i>=0;)r=String(a[i]),o+="0000000".slice(r.length)+r;return(this.sign?"-":"")+o},c.prototype.toString=function(t,n){return t===e&&(t=10),10!=t?Z(this,t,n):String(this.value)},s.prototype.toString=c.prototype.toString,s.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,s.prototype.valueOf=s.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var K=0;K<1e3;K++)l[K]=Y(K),K>0&&(l[-K]=Y(-K));return l.one=l[1],l.zero=l[0],l.minusOne=l[-1],l.max=G,l.min=F,l.gcd=z,l.lcm=function(e,t){return e=Y(e).abs(),t=Y(t).abs(),e.divide(z(e,t)).multiply(t)},l.isInstance=function(e){return e instanceof u||e instanceof c||e instanceof s},l.randBetween=function(e,n,r){e=Y(e),n=Y(n);var a=r||Math.random,i=F(e,n),o=G(e,n).subtract(i).add(1);if(o.isSmall)return i.add(Math.floor(a()*o));for(var u=q(o,t).value,c=[],s=!0,d=0;d<u.length;d++){var p=s?u[d]+(d+1<u.length?u[d+1]/t:0):t,f=m(a()*p);c.push(f),f<u[d]&&(s=!1)}return i.add(l.fromArray(c,t,!1))},l.fromArray=function(e,t,n){return B(e.map(Y),Y(t||10),n)},l}();e.hasOwnProperty("exports")&&(e.exports=a),void 0!==(r=function(){return a}.call(t,n,t,e))&&(e.exports=r)}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||=[],e},function(){"use strict";var e={};n.r(e),n.d(e,{getState:function(){return Ie},lock:function(){return _e},unlock:function(){return Se}});var t={};n.r(t),n.d(t,{getMetadata:function(){return we}});var r={};n.r(r),n.d(r,{getEmailConfiguration:function(){return ke},updateForCurrentUser:function(){return Me}});var a={};n.r(a),n.d(a,{getDetailsForUniverseIds:function(){return He}});var i={};n.r(i),n.d(i,{getMySettingsInfo:function(){return ze}});var o={};n.r(o),n.d(o,{getMetadata:function(){return et},resendCode:function(){return Qe},sendCodeForUser:function(){return Xe},validateCode:function(){return $e}});var l={};n.r(l),n.d(l,{changeForCurrentUser:function(){return ut},resetSendPrompted:function(){return ct},validate:function(){return st}});var u={};n.r(u),n.d(u,{getPhoneConfiguration:function(){return yt}});var c={};n.r(c),n.d(c,{disconnectPlaystation:function(){return It},getPlaystationConnection:function(){return Tt}});var s={};n.r(s),n.d(s,{getAllForCurrentUser:function(){return Ot},updateForCurrentUser:function(){return Rt}});var d={};n.r(d),n.d(d,{verifyPuzzle:function(){return xt}});var p={};n.r(p),n.d(p,{getPuzzle:function(){return Gt},verifyPuzzle:function(){return Ft}});var f={};n.r(f),n.d(f,{generateToken:function(){return Yt}});var h={};n.r(h),n.d(h,{verifyPuzzle:function(){return en}});var v={};n.r(v),n.d(v,{answerQuestion:function(){return cn},getQuestion:function(){return un}});var m={};n.r(m),n.d(m,{getSessions:function(){return Cn},logoutFromAllSessionsAndReauthenticate:function(){return Tn},logoutSession:function(){return bn}});var y={};n.r(y),n.d(y,{getIconsForUniverseIds:function(){return _n}});var E={};n.r(E),n.d(E,{deleteSecurityKey:function(){return yr},disableAuthenticator:function(){return ir},disableEmailTwoStepVerification:function(){return tr},disableSmsTwoStepVerification:function(){return pr},enableAuthenticator:function(){return nr},enableEmailTwoStepVerification:function(){return Qn},enableSecurityKey:function(){return fr},enableSmsTwoStepVerification:function(){return cr},enableVerifyAuthenticator:function(){return rr},enableVerifySecurityKey:function(){return hr},generateRecoveryCodes:function(){return ur},generateResaleFrictionChallenge:function(){return Sr},generateSpendFrictionChallenge:function(){return Tr},generateTradeFrictionChallenge:function(){return Ir},getMetadata:function(){return Jn},getRecoveryCodesStatus:function(){return lr},getResaleFrictionStatus:function(){return br},getSecurityKeyOptions:function(){return vr},getSpendFrictionStatus:function(){return gr},getTradeFrictionStatus:function(){return Cr},getUserConfiguration:function(){return Xn},listSecurityKey:function(){return Er},redeemResaleFrictionChallenge:function(){return Ar},redeemSpendFrictionChallenge:function(){return _r},redeemTradeFrictionChallenge:function(){return Nr},retractCrossDevice:function(){return Dr},retryCrossDevice:function(){return Lr},sendEmailCode:function(){return $n},sendSmsCode:function(){return sr},verifyAuthenticatorCode:function(){return ar},verifyCrossDevice:function(){return wr},verifyEmailCode:function(){return er},verifyRecoveryCode:function(){return or},verifySecurityKeyCredential:function(){return mr},verifySmsCode:function(){return dr}});var g={};n.r(g),n.d(g,{getSettingsUiPolicy:function(){return kr}});var C={};n.r(C),n.d(C,{disconnectXbox:function(){return Gr},getXboxConnection:function(){return Ur}});var b={};n.r(b),n.d(b,{recordMetric:function(){return qr}});var T={};n.r(T),n.d(T,{getPatToken:function(){return Kr}});var I={};n.r(I),n.d(I,{continueChallenge:function(){return $r}});var S={};n.r(S),n.d(S,{deletePasskeyBatch:function(){return da},finishPasskeyRegistration:function(){return sa},listAllCredentials:function(){return pa},startPasskeyRegistration:function(){return ca}});var _={};n.r(_),n.d(_,{getNativeResponse:function(){return ha},getNavigatorCredentials:function(){return va}});var N={};n.r(N),n.d(N,{ActionType:function(){return ra},ErrorCode:function(){return aa},renderChallenge:function(){return Ja}});var A={};n.r(A),n.d(A,{ErrorCode:function(){return Ga},ForceActionRedirectChallengeType:function(){return Fa},renderChallenge:function(){return si}});var L={};n.r(L),n.d(L,{ErrorCode:function(){return lo},renderChallenge:function(){return Mo}});var w={};n.r(w),n.d(w,{ErrorCode:function(){return Io},renderChallenge:function(){return Ko}});var D={};n.r(D),n.d(D,{ErrorCode:function(){return Xo},PuzzleType:function(){return Qo},renderChallenge:function(){return Ol}});var O={};n.r(O),n.d(O,{ErrorCode:function(){return sl},renderChallenge:function(){return ru}});var R={};n.r(R),n.d(R,{ErrorCode:function(){return _l},ReauthenticationType:function(){return Nl},reauthInvalidationErrorMessageOrNull:function(){return Yu},renderChallenge:function(){return ju}});var P={};n.r(P),n.d(P,{ErrorCode:function(){return Xl},PuzzleType:function(){return Ql},renderChallenge:function(){return Cc}});var M={};n.r(M),n.d(M,{ErrorCode:function(){return Gu},renderChallenge:function(){return Uc}});var k={};n.r(k),n.d(k,{ActionType:function(){return vc},ErrorCode:function(){return yc},MediaType:function(){return mc},renderChallenge:function(){return Is}});var x={};n.r(x),n.d(x,{ChallengeError:function(){return Ip},ChallengeErrorKind:function(){return Es},ChallengeType:function(){return Ls},ErrorCodeGeneric:function(){return ys},interceptChallenge:function(){return Sp},parseChallengeSpecificProperties:function(){return Cp},renderChallenge:function(){return bp}});var V={};n.r(V),n.d(V,{ChallengeType:function(){return Ls},HybridTarget:function(){return Ld},renderChallengeFromQueryParameters:function(){return tf}});var H=Roblox,W=n.n(H);function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var a=B(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var J,X=function(){function e(t,n){q(this,e),t=this.words=t||[],this.sigBytes=void 0!==n?n:4*t.length}return j(e,[{key:"toString",value:function(e){return(e||Q).stringify(this)}},{key:"concat",value:function(e){if(this.clamp(),this.sigBytes%4)for(var t=0;t<e.sigBytes;t++){var n=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=n<<24-(this.sigBytes+t)%4*8}else for(var r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];return this.sigBytes+=e.sigBytes,this}},{key:"clamp",value:function(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}},{key:"clone",value:function(){return new e(function(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.words))}}]),e}(),Q={stringify:function(e){for(var t=[],n=0;n<e.sigBytes;n++){var r=e.words[n>>>2]>>>24-n%4*8&255;t.push((r>>>4).toString(16),(15&r).toString(16))}return t.join("")}};var $=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ee=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],te=[],ne=function(e){G(n,e);var t=z(n);function n(){var e;return q(this,n),(e=t.call(this)).reset(),e}return j(n,[{key:"reset",value:function(){U(B(n.prototype),"reset",this).call(this),this._hash=new X([].concat($))}},{key:"_doProcessBlock",value:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],l=n[4],u=n[5],c=n[6],s=n[7],d=0;d<64;d++){if(d<16)te[d]=0|e[t+d];else{var p=te[d-15],f=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,h=te[d-2],v=(h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10;te[d]=f+te[d-7]+v+te[d-16]}var m=r&a^r&i^a&i,y=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=s+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&c)+ee[d]+te[d];s=c,c=u,u=l,l=o+E|0,o=i,i=a,a=r,r=E+(y+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0,n[5]=n[5]+u|0,n[6]=n[6]+c|0,n[7]=n[7]+s|0}},{key:"finalize",value:function(e){U(B(n.prototype),"finalize",this).call(this,e);var t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(r+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}]),n}(function(e){G(n,e);var t=z(n);function n(){return q(this,n),t.apply(this,arguments)}return j(n,[{key:"update",value:function(e){return this._append(e),this._process(),this}},{key:"finalize",value:function(e){e&&this._append(e)}}]),n}(function(){function e(){q(this,e),this._minBufferSize=0,this.blockSize=16,this.reset()}return j(e,[{key:"reset",value:function(){this._data=new X,this._nDataBytes=0}},{key:"_append",value:function(e){"string"==typeof e&&(e=function(e){return function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new X(n,t)}(unescape(encodeURIComponent(e)))}(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}},{key:"_doProcessBlock",value:function(e,t){}},{key:"_process",value:function(e){var t,n=this._data.sigBytes/(4*this.blockSize),r=(n=e?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0))*this.blockSize,a=Math.min(4*r,this._data.sigBytes);if(r){for(var i=0;i<r;i+=this.blockSize)this._doProcessBlock(this._data.words,i);t=this._data.words.splice(0,r),this._data.sigBytes-=a}return new X(t,a)}}]),e}())),re=React,ae=n.n(re),ie=ReactDOM,oe=CoreUtilities;function le(e){return{isError:!1,value:e}}var ue,ce=le;function se(e,t,n=null){return{isError:!0,error:e,errorRaw:t,errorStatusCode:n}}function de(e,t){return e.isError?e:le(t(e.value))}function pe(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function fe(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function he(e){return"object"!=typeof e?null:function(e){var t=[];if(!e||"object"!=typeof e)return[];var n=e.errors;return n instanceof Array?(n.forEach((function(e){if(e&&"object"==typeof e){var n=e.code;"number"==typeof n&&t.push(n)}})),t):[]}(e.data)[0]||null}function ve(e,t){return null==e?null:Object.values(e).includes(t)?t:null}function me(e,t,n){return pe(void 0,void 0,Promise,(function(){var r,a,i,o;return fe(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,e];case 1:return r=l.sent(),void 0!==n?[2,ce(n(r.data))]:[2,ce(r.data)];case 2:return a=l.sent(),i=he(a),o=function(e){if("object"!=typeof e||null===e)return null;var t=e.status||null;return"number"!=typeof t?null:e.config.url.includes("/challenge/v1/continue")?(setTimeout((function(){document.querySelector("#login-button").click()}),750),t):t}(a),[2,se(ve(t,i),a,o)];case 3:return[2]}}))}))}function ye(e,t,n=he,r){return pe(void 0,void 0,Promise,(function(){var a,i,o;return fe(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,e];case 1:return a=l.sent(),void 0!==r?[2,ce(r(a))]:[2,ce(a)];case 2:return i=l.sent(),o=n(i),[2,se(ve(t,o),i,0)];case 3:return[2]}}))}))}var Ee=H.EnvironmentUrls.authApi??"URL_NOT_FOUND";!function(e){e[e.NO_ACCOUNT_PIN=1]="NO_ACCOUNT_PIN",e[e.ACCOUNT_LOCKED=2]="ACCOUNT_LOCKED",e[e.FLOODED=3]="FLOODED",e[e.INCORRECT_PIN=4]="INCORRECT_PIN"}(J||={});var ge,Ce={withCredentials:!0,url:Ee+"/v1/account/pin",timeout:1e4},be={withCredentials:!0,url:Ee+"/v1/account/pin/unlock",timeout:1e4},Te={withCredentials:!0,url:Ee+"/v1/account/pin/lock",timeout:1e4};function Ie(){return me(oe.httpService.get(Ce),J)}function Se(e){return me(oe.httpService.post(be,{pin:e}),J)}function _e(){return me(oe.httpService.post(Te),J)}var Ne=(H.EnvironmentUrls.apiGatewayCdnUrl??"URL_NOT_FOUND")+"/captcha";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(ue||={});var Ae,Le={url:Ne+"/v1/metadata",timeout:6e4};function we(){return me(oe.httpService.get(Le,{}),ue)}var De=H.EnvironmentUrls.accountSettingsApi??"URL_NOT_FOUND";!function(e){e[e.FEATURE_DISABLED=2]="FEATURE_DISABLED",e[e.TOO_MANY_ACCOUNTS_ON_EMAIL=3]="TOO_MANY_ACCOUNTS_ON_EMAIL",e[e.TOO_MANY_ATTEMPTS_TO_UPDATE_EMAIL=6]="TOO_MANY_ATTEMPTS_TO_UPDATE_EMAIL",e[e.INVALID_EMAIL_ADDRESS=9]="INVALID_EMAIL_ADDRESS"}(ge||={});var Oe,Re={withCredentials:!0,url:De+"/v1/email",timeout:1e4},Pe={withCredentials:!0,url:De+"/v1/email",timeout:1e4};function Me(e){return me(oe.httpService.post(Re,{emailAddress:e,skipVerificationEmail:!0}),ge)}function ke(){return me(oe.httpService.get(Pe),ge)}var xe;H.EnvironmentUrls.gamesApi;!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Ae||={});var Ve={url:window.location.origin+"/security-question/v1/games",timeout:1e4};function He(e){return me(oe.httpService.get(Ve,{universeIds:e}),Ae)}!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Oe||={});var We,Ue,Ge,Fe={withCredentials:!0,url:"/my/settings/json",timeout:1e4};function ze(){return me(oe.httpService.get(Fe,{}),Oe)}var Be,qe=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/otp-service";!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.UNKNOWN=1]="UNKNOWN",e[e.INVALID_CODE=2]="INVALID_CODE",e[e.INVALID_SESSION_TOKEN=3]="INVALID_SESSION_TOKEN",e[e.CODE_EXPIRED=4]="CODE_EXPIRED",e[e.UNVALIDATED_SESSION_TOKEN=5]="UNVALIDATED_SESSION_TOKEN",e[e.TOO_MANY_REQUESTS=6]="TOO_MANY_REQUESTS",e[e.CONTACT_MALFORMED=7]="CONTACT_MALFORMED",e[e.VPN_REQUIRED=8]="VPN_REQUIRED",e[e.UNAUTHENTICATED=9]="UNAUTHENTICATED",e[e.METHOD_UNAVAILABLE=10]="METHOD_UNAVAILABLE"}(xe||={});var Ze,je={withCredentials:!0,url:qe+"/v1/sendCodeForUser",timeout:1e4},Ye={withCredentials:!0,url:qe+"/v1/resendCode",timeout:1e4},Ke={withCredentials:!0,url:qe+"/v1/validateCode",timeout:1e4},Je={withCredentials:!0,url:qe+"/v1/metadata",timeout:1e4};function Xe(e){return me(oe.httpService.post(je,{contactType:e,origin:Ue.Reauth,messageVariant:Ge.Default}),xe)}function Qe(e,t){return me(oe.httpService.post(Ye,{contactType:e,origin:Ue.Reauth,otpSessionToken:t}),xe)}function $e(e,t,n){return me(oe.httpService.post(Ke,{contactType:e,origin:Ue.Reauth,passCode:n,otpSessionToken:t}),xe)}function et(e){return me(oe.httpService.get(Je,{Origin:e}),xe)}!function(e){e.Unset="Unset",e.Email="Email"}(We||={}),function(e){e.Reauth="Reauth"}(Ue||={}),function(e){e.Default="Default"}(Ge||={});var tt,nt=H.EnvironmentUrls.authApi??"URL_NOT_FOUND";!function(e){e[e.FLOODED=2]="FLOODED",e[e.INVALID_PASSWORD=7]="INVALID_PASSWORD",e[e.INVALID_CURRENT_PASSWORD=8]="INVALID_CURRENT_PASSWORD",e[e.PIN_LOCKED=9]="PIN_LOCKED"}(Be||={});var rt,at={withCredentials:!0,url:nt+"/v2/user/passwords/change",timeout:1e4};!function(e){e[e.USER_DOES_NOT_HAVE_EMAIL=22]="USER_DOES_NOT_HAVE_EMAIL"}(Ze||={});var it={withCredentials:!0,url:nt+"/v2/passwords/reset/send-prompted",timeout:1e4};!function(e){e[e.VALID_PASSWORD=0]="VALID_PASSWORD",e[e.WEAK_PASSWORD=1]="WEAK_PASSWORD",e[e.SHORT_PASSWORD=2]="SHORT_PASSWORD",e[e.PASSWORD_SAME_AS_USERNAME=3]="PASSWORD_SAME_AS_USERNAME",e[e.FORBIDDEN_PASSWORD=4]="FORBIDDEN_PASSWORD",e[e.DUMB_STRINGS=5]="DUMB_STRINGS"}(tt||={});var ot,lt={withCredentials:!0,url:nt+"/v2/passwords/validate",timeout:1e4};function ut(e,t){return me(oe.httpService.post(at,{currentPassword:e,newPassword:t}),Be)}function ct(){return me(oe.httpService.post(it),Ze)}function st(e,t){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){return[2,me(oe.httpService.post(lt,{username:e,password:t}),null).then((function(e){return de(e,(function(e){return ve(tt,e.code)}))}))]}))}))}var dt=H.EnvironmentUrls.accountInformationApi??"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(rt||={});var pt,ft,ht,vt,mt={withCredentials:!0,url:dt+"/v1/phone",timeout:1e4};function yt(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(e){return[2,me(oe.httpService.get(mt,{}),rt)]}))}))}var Et=H.EnvironmentUrls.authApi??"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(ot||={});var gt,Ct={withCredentials:!0,url:Et+"/v1/palisades-live/is-live",timeout:1e4},bt={withCredentials:!0,url:Et+"/v1/palisades-live/disconnect",timeout:1e4};function Tt(){return me(oe.httpService.get(Ct,{}),ot)}function It(){return me(oe.httpService.post(bt,{}),ot)}var St,_t=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.PROMPT_ASSIGNMENT_WAS_NOT_UPDATED=3]="PROMPT_ASSIGNMENT_WAS_NOT_UPDATED",e[e.UNKNOWN_PROMPT_TYPE=4]="UNKNOWN_PROMPT_TYPE"}(pt||={}),function(e){e.TEXT_ONLY_BANNER="DISPLAY_TYPE_TEXT_ONLY_BANNER"}(ft||={}),function(e){e.GLOBAL="PAGE_RESTRICTION_GLOBAL",e.HOME_PAGE_ONLY="PAGE_RESTRICTION_HOME_PAGE"}(ht||={}),function(e){e.CHANGE_PASSWORD__SUSPECTED_COMPROMISE="PROMPT_TYPE_CHANGE_PASSWORD__SUSPECTED_COMPROMISE",e.CHANGE_PASSWORD__BREACHED_CREDENTIAL="PROMPT_TYPE_CHANGE_PASSWORD__BREACHED_CREDENTIAL",e.AUTHENTICATOR_UPSELL="PROMPT_TYPE_AUTHENTICATOR_UPSELL",e.ACCOUNT_RESTORES_POLICY_UPDATE="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPDATE",e.ACCOUNT_RESTORES_POLICY_UPDATE_V2="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPDATE_V2",e.ACCOUNT_RESTORES_POLICY_UPDATE_V3="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPDATE_V3",e.ACCOUNT_RESTORES_POLICY_UPSELL="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPSELL",e.BROADER_AUTHENTICATOR_UPSELL="PROMPT_TYPE_BROADER_AUTHENTICATOR_UPSELL",e.EMAIL_2SV_UPSELL="PROMPT_TYPE_EMAIL_2SV_UPSELL"}(vt||={});var Nt={withCredentials:!0,url:_t+"/v1/prompt-assignments",timeout:1e4};!function(e){e.DISMISS_PROMPT="DISMISS_PROMPT",e.DISABLE_PROMPT="DISABLE_PROMPT"}(gt||={});var At,Lt,wt={withCredentials:!0,url:_t+"/v1/prompt-assignments",timeout:1e4};function Dt(){return(Dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function Ot(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return[4,me(oe.httpService.get(Nt,{shouldReturnMetadata:!0}),pt)];case 1:return(e=t.sent()).isError?[2,e]:[2,e=Dt(Dt({},e),{value:e.value.filter((function(e){return e.isGeneric?Object.values(ft).includes(e.metadata.displayType):Object.values(vt).includes(e.promptType)}))})]}}))}))}function Rt(e,t){return me(oe.httpService.post(wt,{action:e,promptType:t}),pt)}var Pt=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/proof-of-space";!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INTERNAL_ERROR=1]="INTERNAL_ERROR",e[e.INVALID_REQUEST=2]="INVALID_REQUEST",e[e.INVALID_SESSION=3]="INVALID_SESSION"}(St||={});var Mt,kt={withCredentials:!0,url:Pt+"/v1/verify",timeout:1e4};function xt(e,t){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){return[2,me(oe.httpService.post(kt,{challengeId:e,solution:t}),St)]}))}))}var Vt=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/proof-of-work-service";!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REQUEST_INVALID=1]="REQUEST_INVALID",e[e.SESSION_INACTIVE=2]="SESSION_INACTIVE"}(At||={}),function(e){e[e.TIME_LOCK=0]="TIME_LOCK"}(Lt||={});var Ht,Wt={withCredentials:!0,url:Vt+"/v1/pow-puzzle",timeout:1e4},Ut={withCredentials:!0,url:Vt+"/v1/pow-puzzle",timeout:1e4};function Gt(e){return me(oe.httpService.get(Wt,{sessionID:e}),At)}function Ft(e,t){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){return[2,me(oe.httpService.post(Ut,{sessionID:e,solution:t}),At)]}))}))}var zt=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/reauthentication-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.PASSWORD_INCORRECT=3]="PASSWORD_INCORRECT",e[e.OTP_EMAIL_REDEEM_FAILURE=4]="OTP_EMAIL_REDEEM_FAILURE"}(Mt||={});var Bt,qt,Zt,jt={withCredentials:!0,url:zt+"/v1/token/generate",timeout:1e4};function Yt(e){return me(oe.httpService.post(jt,e),Mt)}var Kt=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/rostile";!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INTERNAL_ERROR=1]="INTERNAL_ERROR",e[e.INVALID_REQUEST=2]="INVALID_REQUEST",e[e.INVALID_SESSION=3]="INVALID_SESSION"}(Ht||={});var Jt,Xt,Qt,$t={withCredentials:!0,url:Kt+"/v1/verify",timeout:1e4};function en(e,t){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){return[2,me(oe.httpService.post($t,{challengeId:e,solution:t}),Ht)]}))}))}var tn=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.SECURITY_QUESTIONS_DISABLED=3]="SECURITY_QUESTIONS_DISABLED",e[e.SESSION_INACTIVE=4]="SESSION_INACTIVE",e[e.QUESTION_NOT_FOUND=5]="QUESTION_NOT_FOUND",e[e.ANSWER_WRONG_FORMAT=6]="ANSWER_WRONG_FORMAT"}(Bt||={}),function(e){e[e.INVALID=0]="INVALID",e[e.MOST_RECENT_GAMES_PLAYED=1]="MOST_RECENT_GAMES_PLAYED"}(qt||={}),function(e){e[e.PICK_ALL_CORRECT_CHOICES=0]="PICK_ALL_CORRECT_CHOICES",e[e.PICK_C_CORRECT_CHOICES=1]="PICK_C_CORRECT_CHOICES"}(Zt||={});var nn,rn,an,on={withCredentials:!0,url:tn+"/v1/security-question",timeout:1e4},ln={withCredentials:!0,url:tn+"/v1/security-question",timeout:1e4};function un(e,t){return me(oe.httpService.get(on,{userId:e,sessionId:t}),Bt)}function cn(e,t,n){return me(oe.httpService.post(ln,{userId:e,answer:t,sessionId:n}),Bt)}var sn="URL_NOT_FOUND",dn=H.EnvironmentUrls.apiGatewayUrl??sn,pn=H.EnvironmentUrls.authApi??sn,fn=dn+"/token-metadata-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.ATTEMPT_TO_INVALIDATE_CURRENT_TOKEN=3]="ATTEMPT_TO_INVALIDATE_CURRENT_TOKEN"}(Jt||={}),function(e){e[e.UNKNOWN=1]="UNKNOWN"}(Xt||={}),function(e){e.UNKNOWN="Unknown",e.APP="App",e.BROWSER="Browser",e.STUDIO="Studio"}(Qt||={});var hn,vn={withCredentials:!0,url:fn+"/v1/sessions",timeout:1e4},mn={withCredentials:!0,url:fn+"/v1/logout",timeout:1e4},yn={withCredentials:!0,url:pn+"/v1/logoutfromallsessionsandreauthenticate",timeout:1e4};function En(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function gn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Cn(e,t){return En(void 0,void 0,Promise,(function(){return gn(this,(function(n){return[2,me(oe.httpService.get(vn,{nextCursor:e,desiredLimit:t}),Jt)]}))}))}function bn(e){return En(void 0,void 0,Promise,(function(){return gn(this,(function(t){return[2,me(oe.httpService.post(mn,{token:e}),Jt)]}))}))}function Tn(e){return En(void 0,void 0,Promise,(function(){return gn(this,(function(t){return[2,me(oe.httpService.post(yn,{secureAuthenticationIntent:e}),Xt)]}))}))}H.EnvironmentUrls.thumbnailsApi;!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(nn||={}),function(e){e.PNG="Png",e.JPEG="Jpeg"}(rn||={}),function(e){e.ERROR="Error",e.COMPLETED="Completed",e.IN_REVIEW="InReview",e.PENDING="Pending",e.BLOCKED="Blocked"}(an||={});var In,Sn={url:window.location.origin+"/security-question/v1/games/icons",timeout:1e4};function _n(e,t,n,r){return me(oe.httpService.get(Sn,{universeIds:e,size:t,format:n,isCircular:r}),nn)}var Nn=CoreRobloxUtilities,An="URL_NOT_FOUND",Ln=H.EnvironmentUrls.twoStepVerificationApi??An,wn=H.EnvironmentUrls.economyApi??An,Dn=H.EnvironmentUrls.tradesApi??An,On=1e4;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INVALID_CHALLENGE_ID=1]="INVALID_CHALLENGE_ID",e[e.INVALID_USER_ID=2]="INVALID_USER_ID",e[e.INVALID_EMAIL=3]="INVALID_EMAIL",e[e.INVALID_PASSWORD=4]="INVALID_PASSWORD",e[e.TOO_MANY_REQUESTS=5]="TOO_MANY_REQUESTS",e[e.PIN_LOCKED=6]="PIN_LOCKED",e[e.FEATURE_DISABLED=7]="FEATURE_DISABLED",e[e.NOT_ALLOWED=8]="NOT_ALLOWED",e[e.INVALID_CONFIGURATION=9]="INVALID_CONFIGURATION",e[e.INVALID_CODE=10]="INVALID_CODE",e[e.CONFIGURATION_ALREADY_ENABLED=11]="CONFIGURATION_ALREADY_ENABLED",e[e.INVALID_SETUP_TOKEN=12]="INVALID_SETUP_TOKEN",e[e.REAUTHENTICATION_REQUIRED=13]="REAUTHENTICATION_REQUIRED",e[e.INVALID_PHONE_NUMBER=15]="INVALID_PHONE_NUMBER",e[e.EXCEEDED_REGISTERED_KEYS_LIMIT=16]="EXCEEDED_REGISTERED_KEYS_LIMIT",e[e.INVALID_CREDENTIAL_NICKNAME=17]="INVALID_CREDENTIAL_NICKNAME",e[e.AUTHENTICATOR_CODE_ALREADY_USED=18]="AUTHENTICATOR_CODE_ALREADY_USED",e[e.CHALLENGE_DENIED=19]="CHALLENGE_DENIED",e[e.CROSS_DEVICE_DIALOG_EXPIRED=20]="CROSS_DEVICE_DIALOG_EXPIRED"}(hn||={});var Rn={url:Ln+"/v1/metadata",withCredentials:!0,timeout:On};function Pn(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/email/enable",timeout:On}}function Mn(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/authenticator/enable-verify",timeout:On}}function kn(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/sms/enable",timeout:On}}function xn(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/security-key/enable-verify",timeout:On}}var Vn={withCredentials:!0,url:wn+"/v2/spend-friction/two-step-verification/status",timeout:On},Hn={withCredentials:!0,url:Dn+"/v1/trade-friction/two-step-verification/status",timeout:On},Wn={withCredentials:!0,url:wn+"/v2/resale-friction/two-step-verification/status",timeout:On},Un={withCredentials:!0,url:wn+"/v2/spend-friction/two-step-verification/generate",timeout:On},Gn={withCredentials:!0,url:Dn+"/v1/trade-friction/two-step-verification/generate",timeout:On},Fn={withCredentials:!0,url:wn+"/v2/resale-friction/two-step-verification/generate",timeout:On},zn={withCredentials:!0,url:wn+"/v2/spend-friction/two-step-verification/redeem",timeout:On},Bn={withCredentials:!0,url:Dn+"/v1/trade-friction/two-step-verification/redeem",timeout:On},qn={withCredentials:!0,url:wn+"/v2/resale-friction/two-step-verification/redeem",timeout:On};function Zn(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function jn(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Yn,Kn=Nn.cryptoUtil.generateSecureAuthIntent;function Jn(e){return me(oe.httpService.get(Rn,e||{}),hn)}function Xn(e,t){return me(oe.httpService.get(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration",timeout:On}}(e),t||{}),hn)}function Qn(e){return Zn(void 0,void 0,Promise,(function(){var t;return jn(this,(function(n){switch(n.label){case 0:return[4,Kn()];case 1:return t=n.sent(),[2,me(oe.httpService.post(Pn(e),{secureAuthenticationIntent:t}),hn)]}}))}))}function $n(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/email/send-code",timeout:On}}(e),t),hn)}function er(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/email/verify",timeout:On}}(e),t),hn)}function tr(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/email/disable",timeout:On}}(e),{}),hn)}function nr(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/authenticator/enable",timeout:On}}(e),{}),hn)}function rr(e,t,n){return Zn(void 0,void 0,Promise,(function(){var r;return jn(this,(function(a){switch(a.label){case 0:return[4,Kn()];case 1:return r=a.sent(),[2,me(oe.httpService.post(Mn(e),{setupToken:t,code:n,secureAuthenticationIntent:r}),hn)]}}))}))}function ar(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/authenticator/verify",timeout:On}}(e),t),hn)}function ir(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/authenticator/disable",timeout:On}}(e),{}),hn)}function or(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/recovery-codes/verify",timeout:On}}(e),t),hn)}function lr(e){return me(oe.httpService.get(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/recovery-codes",timeout:On}}(e)),hn)}function ur(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/recovery-codes/regenerate",timeout:On}}(e),{password:"password"}),hn)}function cr(e){return Zn(void 0,void 0,Promise,(function(){var t;return jn(this,(function(n){switch(n.label){case 0:return[4,Kn()];case 1:return t=n.sent(),[2,me(oe.httpService.post(kn(e),{secureAuthenticationIntent:t}),hn)]}}))}))}function sr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/sms/send-code",timeout:On}}(e),t),hn)}function dr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/sms/verify",timeout:On}}(e),t),hn)}function pr(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/sms/disable",timeout:On}}(e),{}),hn)}function fr(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/security-key/enable",timeout:On}}(e),{}),hn,(function(e){return{creationOptions:JSON.parse(e.creationOptions),sessionId:e.sessionId}}))}function hr(e,t,n,r){return Zn(void 0,void 0,Promise,(function(){var a;return jn(this,(function(i){switch(i.label){case 0:return[4,Kn()];case 1:return a=i.sent(),[2,me(oe.httpService.post(xn(e),{sessionId:t,credentialNickname:n,attestationResponse:r,secureAuthenticationIntent:a}),hn)]}}))}))}function vr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/security-key/verify-start",timeout:On}}(e),t),hn)}function mr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/security-key/verify-finish",timeout:On}}(e),t),hn)}function yr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/security-key/disable",timeout:On}}(e),{credentialNicknames:t}),hn)}function Er(e){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/configuration/security-key/list",timeout:On}}(e),{}),hn)}function gr(){return me(oe.httpService.get(Vn,{}),hn)}function Cr(){return me(oe.httpService.get(Hn,{}),hn)}function br(){return me(oe.httpService.get(Wn,{}),hn)}function Tr(){return me(oe.httpService.post(Un,{}),hn)}function Ir(){return me(oe.httpService.post(Gn,{}),hn)}function Sr(){return me(oe.httpService.post(Fn,{}),hn)}function _r(e,t){return me(oe.httpService.post(zn,{challengeToken:e,verificationToken:t}),hn)}function Nr(e,t){return me(oe.httpService.post(Bn,{challengeToken:e,verificationToken:t}),hn)}function Ar(e,t){return me(oe.httpService.post(qn,{challengeToken:e,verificationToken:t}),hn)}function Lr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/cross-device/retry",timeout:On}}(e),t),hn)}function wr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/cross-device/verify",timeout:On}}(e),t),hn)}function Dr(e,t){return me(oe.httpService.post(function(e){return{withCredentials:!0,url:Ln+"/v1/users/"+e+"/challenges/cross-device/retract",timeout:On}}(e),t),hn)}var Or=H.EnvironmentUrls.universalAppConfigurationApi??"URL_NOT_FOUND";!function(e){e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR"}(In||={});var Rr,Pr,Mr={withCredentials:!0,url:Or+"/v1/behaviors/account-settings-ui/content",timeout:1e4};function kr(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(e){return[2,me(oe.httpService.get(Mr,{}),In)]}))}))}var xr=H.EnvironmentUrls.authApi??"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Yn||={});var Vr,Hr={withCredentials:!0,url:xr+"/v1/xbox/connection",timeout:1e4},Wr={withCredentials:!0,url:xr+"/v1/xbox/disconnect",timeout:1e4};function Ur(){return me(oe.httpService.get(Hr,{}),Yn)}function Gr(){return me(oe.httpService.post(Wr,{}),Yn)}var Fr=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.INVAID_METRIC_NAME=3]="INVAID_METRIC_NAME",e[e.INVALID_METRIC_LABELS=4]="INVALID_METRIC_LABELS"}(Rr||={}),function(e){e.Event2sv="event_2sv",e.SolveTime2sv="solve_time_2sv",e.EventCaptcha="event_captcha",e.SolveTimeCaptcha="solve_time_captcha",e.EventPat="event_pat",e.SolveTimePat="solve_time_pat",e.EventPos="event_pos",e.PuzzleComputeTimePos="puzzle_compute_time_pos",e.SolveTimePos="solve_time_pos",e.EventPow="event_pow",e.PuzzleComputeTimePow="puzzle_compute_time_pow",e.SolveTimePow="solve_time_pow",e.EventRostile="event_rostile",e.SolveTimeRostile="solve_time_rostile",e.EventSecurityQuestion="event_security_question",e.EventGeneric="event_generic",e.EventReauthentication="event_reauthentication",e.SolveTimeReauthentication="solve_time_reauthentication",e.EventDeviceIntegrity="event_device_integrity",e.SolveTimeDeviceIntegrity="solve_time_device_integrity"}(Pr||={});var zr,Br={withCredentials:!0,url:Fr+"/v1/metrics/record",timeout:1e4};function qr(e){return me(oe.httpService.post(Br,e),Rr)}var Zr=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/private-access-token";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Vr||={});var jr,Yr={withCredentials:!0,url:Zr+"/v1/getPATToken",timeout:1e4};function Kr(e){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){return[2,me(oe.httpService.post(Yr,{challengeId:e}),Vr)]}))}))}var Jr=(H.EnvironmentUrls.apiGatewayUrl??"URL_NOT_FOUND")+"/challenge";!function(e){e[e.UNKNOWN=1]="UNKNOWN"}(zr||={});var Xr,Qr={withCredentials:!0,url:Jr+"/v1/continue",timeout:1e4};function $r(e,t,n){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(r){return[2,me(oe.httpService.post(Qr,{challengeId:e,challengeType:t,challengeMetadata:n}),zr)]}))}))}var ea,ta=H.EnvironmentUrls.authApi??"URL_NOT_FOUND",na=1e4;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.EXCEEDED_REGISTERED_KEYS_LIMIT=1]="EXCEEDED_REGISTERED_KEYS_LIMIT",e[e.FEATURE_DISABLED=2]="FEATURE_DISABLED",e[e.INVALID_CREDENTIAL_NICKNAME=3]="INVALID_CREDENTIAL_NICKNAME"}(jr||={});var ra,aa,ia={withCredentials:!0,url:ta+"/v1/passkey/StartRegistration",timeout:na},oa={withCredentials:!0,url:ta+"/v1/passkey/FinishRegistration",timeout:na},la={withCredentials:!0,url:ta+"/v1/passkey/DeleteCredentialBatch",timeout:na},ua={withCredentials:!0,url:ta+"/v1/passkey/ListCredentials",timeout:na};function ca(){return me(oe.httpService.post(ia,{}),jr,(function(e){return{creationOptions:JSON.parse(e.creationOptions),sessionId:e.sessionId}}))}function sa(e,t,n){return me(oe.httpService.post(oa,{sessionId:e,credentialNickname:t,attestationResponse:n}),jr)}function da(e){return me(oe.httpService.post(la,{credentialNicknames:e}),jr)}function pa(){return me(oe.httpService.post(ua,{all:!0}),jr)}function fa(e){return e.code}function ha(e,t,n){return ye(Nn.hybridResponseService.getNativeResponse(e,t,n),Xr,fa,(function(e){if(null===e)return null;var t=JSON.parse(e);if(void 0!==t.errorCode)throw{name:"getNativeResponse Error",message:t.errorMsg,code:t.errorCode};return H.DeviceMeta&&(0,H.DeviceMeta)().isInApp&&(0,H.DeviceMeta)().isAndroidApp?e:Nn.fido2Util.formatCredentialAuthenticationResponseApp(e)}))}function va(e){return ye(navigator.credentials.get(e),Xr).then((function(e){return de(e,(function(e){return null===e?null:Nn.fido2Util.formatCredentialAuthenticationResponseWeb(e)}))}))}function ma(){this.accountPin=e,this.captcha=t,this.email=r,this.fido2=_,this.games=a,this.metrics=b,this.myAccount=i,this.otp=o,this.password=l,this.phone=u,this.playstation=c,this.promptAssignments=s,this.securityQuestions=v,this.sessionManagement=m,this.reauthentication=f,this.rostile=h,this.thumbnails=y,this.twoStepVerification=E,this.universalAppConfiguration=g,this.proofOfSpace=d,this.proofOfWork=p,this.xbox=C,this.privateAccessToken=T,this.genericChallenge=I,this.authApi=S}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CANCELLATION_ERROR=1]="CANCELLATION_ERROR",e[e.INTERRUPTED_ERROR=2]="INTERRUPTED_ERROR",e[e.INVALID_REQUEST=3]="INVALID_REQUEST",e[e.JSON_EXCEPTION=4]="JSON_EXCEPTION",e[e.CREDENTIALS_PROTOCOL_NOT_SUPPORTED=5]="CREDENTIALS_PROTOCOL_NOT_SUPPORTED",e[e.NO_CREDENTIALS_FOUND=6]="NO_CREDENTIALS_FOUND",e[e.INVALID_STATE_ERROR=11]="INVALID_STATE_ERROR"}(Xr||={});var ya,Ea,ga=ReactUtilities,Ca="Captcha:",ba="error",Ta="Success",Ia={Login:"ACTION_TYPE_WEB_LOGIN",AppLogin:"ACTION_TYPE_WEB_LOGIN",Signup:"ACTION_TYPE_WEB_SIGNUP",AppSignup:"ACTION_TYPE_WEB_SIGNUP",JoinGroup:"ACTION_TYPE_GROUP_JOIN",GroupWallPost:"ACTION_TYPE_GROUP_WALL_POST",ResetPassword:"ACTION_TYPE_WEB_RESET_PASSWORD",ToyCodeRedeem:"ACTION_TYPE_WEB_GAMECARD_REDEMPTION",SupportRequest:"ACTION_TYPE_SUPPORT_REQUEST",FollowUser:"ACTION_TYPE_FOLLOW_USER",Generic:"ACTION_TYPE_GENERIC_CHALLENGE",GameCardRedeem:"ACTION_TYPE_WEB_GAMECARD_REDEMPTION",AssetComment:"ACTION_TYPE_ASSET_COMMENT",Marketplace:"ACTION_TYPE_MARKETPLACE"},Sa="V2",_a=ReactStyleGuide;function Na(e){var t=e.titleText,n=e.children;return ae().createElement("div",{className:"inline-challenge"},t&&ae().createElement("h4",{className:"inline-challenge-title"},t),ae().createElement("div",{className:"inline-challenge-content"},n))}function Aa(e){var t=e.children;return ae().createElement("div",{className:"inline-challenge-body"},t)}function La(){return(La=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function wa(e,t){var n,r=La({},e);switch(t.type){case ea.SET_CHALLENGE_COMPLETED:return r.onChallengeCompletedData=t.onChallengeCompletedData,r.isModalVisible=!1,r;case ea.SET_CHALLENGE_INVALIDATED:return r.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:(n=e.resources,t.errorCode,n.Message.Error.Default)},r.isModalVisible=!1,r;case ea.HIDE_MODAL_CHALLENGE:return r.isModalVisible=!1,r;case ea.SHOW_MODAL_CHALLENGE:return r.isModalVisible=!0,r;default:return e}}!function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(ea||={});var Da=(0,re.createContext)(null);function Oa(e){var t=e.actionType,n=e.appType,r=e.renderInline,a=e.dataExchangeBlob,i=e.unifiedCaptchaId,o=e.requestService,l=e.metadataResponse,u=e.eventService,c=e.metricsService,s=e.translate,d=e.onChallengeDisplayed,p=e.onChallengeCompleted,f=e.onChallengeInvalidated,h=e.onModalChallengeAbandoned,v=e.children,m=(0,re.useState)((function(){return function(e){return{Action:{PleaseTryAgain:e("Action.PleaseTryAgain"),Reload:e("Action.Reload")},Description:{VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")},Message:{Error:{Default:e("Message.Error.Default")}}}}(s)}))[0],y=(0,re.useState)((function(){return{actionType:t,appType:n,dataExchangeBlob:a,unifiedCaptchaId:i,renderInline:r,metadataResponse:l,resources:m,requestService:o,eventService:u,metricsService:c,onChallengeDisplayed:d,onModalChallengeAbandoned:h,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1}}))[0],E=(0,re.useReducer)(wa,y),g=E[0],C=E[1];return(0,re.useEffect)((function(){null!==g.onChallengeCompletedData&&null===g.onChallengeInvalidatedData&&p(g.onChallengeCompletedData)}),[g.onChallengeCompletedData,g.onChallengeInvalidatedData,p]),(0,re.useEffect)((function(){null!==g.onChallengeInvalidatedData&&null===g.onChallengeCompletedData&&f(g.onChallengeInvalidatedData)}),[g.onChallengeCompletedData,g.onChallengeInvalidatedData,f]),ae().createElement(Da.Provider,{value:{state:g,dispatch:C}},v)}function Ra(){var e=(0,re.useContext)(Da);if(null===e)throw new Error("CaptchaContext was not provided in the current scope");return e}!function(e){e.Login="Login",e.AppLogin="AppLogin",e.Signup="Signup",e.AppSignup="AppSignup",e.JoinGroup="JoinGroup",e.GroupWallPost="GroupWallPost",e.ResetPassword="ResetPassword",e.ToyCodeRedeem="ToyCodeRedeem",e.GameCardRedeem="GameCardRedeem",e.FollowUser="FollowUser",e.Generic="Generic",e.SupportRequest="SupportRequest",e.AssetComment="AssetComment",e.Marketplace="Marketplace"}(ra||={}),function(e){e[e.UNKNOWN=0]="UNKNOWN"}(aa||={});var Pa={};(ya=document.createElement("div")).className="challenge-captcha-body",ya.id="challenge-captcha-element";var Ma=ya;function ka(){var e,t=Ra(),n=t.state,r=n.actionType,a=n.appType,i=n.dataExchangeBlob,o=n.unifiedCaptchaId,l=n.renderInline,u=n.resources,c=n.metadataResponse,s=n.onChallengeDisplayed,d=n.onModalChallengeAbandoned,p=n.isModalVisible,f=t.dispatch,h=(0,re.useState)(!0),v=h[0],m=h[1];function y(){f({type:ea.HIDE_MODAL_CHALLENGE}),null!==d&&d((function(){return f({type:ea.SHOW_MODAL_CHALLENGE})}))}(0,re.useEffect)((function(){!function(){m(!0);var e=c.funCaptchaPublicKeys,t=[];Object.keys(H.CaptchaConstants.funCaptchaPublicKeyMap).forEach((function(n){var r=n,a=H.CaptchaConstants.funCaptchaPublicKeyMap[r],i=e[a];void 0!==i&&t.push({Type:r,PublicKey:i})})),H.FunCaptcha.addCaptchaTypes(t,!1),null!==a&&H.FunCaptcha.setPerAppTypeLoggingEnabled(!0,a),Object.assign(Pa,{shownCb:function(){m(!1),f({type:ea.SHOW_MODAL_CHALLENGE}),s({displayed:!0})},errorCb:function(){f({type:ea.SET_CHALLENGE_INVALIDATED,errorCode:aa.UNKNOWN})},successCb:function(e,t){f({type:ea.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{captchaToken:e,captchaId:t}})}}),H.FunCaptcha.render(Ma.id,{cType:r,inputParams:{dataExchange:i,unifiedCaptchaId:o},returnTokenInSuccessCb:!0,shownCb:function(){return Pa.shownCb&&Pa.shownCb()},errorCb:function(e){return Pa.errorCb&&Pa.errorCb(e)},successCb:function(e,t){return Pa.successCb&&Pa.successCb(e,t)}})}()}),[]),e=Ma;var E=ae().createElement("div",{ref:function(t){return null==t?void 0:t.insertAdjacentElement("afterend",e)}});return l?ae().createElement(Na,{titleText:u.Description.VerifyingYouAreNotBot},ae().createElement(Aa,null,v&&ae().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),E)):ae().createElement(re.Fragment,null,!p&&ae().createElement("div",{style:{display:"none"}},E),ae().createElement(_a.Modal,{className:"modal-modern modal-modern-challenge-captcha",show:p,onHide:y,backdrop:"static"},ae().createElement(_a.Modal.Body,null,ae().createElement("button",{type:"button",className:"challenge-captcha-close-button",onClick:y,disabled:!1},ae().createElement("span",{className:"icon-close"})),v&&ae().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),E)))}var xa=new URLSearchParams(window.location.search).get("fc_nosuppress"),Va=new URLSearchParams(window.location.search).get("fc_suppress"),Ha=null!==xa?"&fc_nosuppress="+xa:null!==Va?"&fc_suppress="+Va:"",Wa=0;function Ua(){var e=Ra(),t=e.state,n=t.actionType,r=t.dataExchangeBlob,a=t.unifiedCaptchaId,i=t.renderInline,o=t.resources,l=t.metadataResponse,u=t.eventService,c=t.metricsService,s=t.onChallengeDisplayed,d=t.onModalChallengeAbandoned,p=t.isModalVisible,f=e.dispatch,h=(0,re.useState)((function(){var e=Wa;return Wa+=1,e.toString()}))[0],v=(0,re.useState)(""),m=v[0],y=v[1],E=(0,re.useState)(!0),g=E[0],C=E[1],b=(0,re.useState)(!1),T=b[0],I=b[1],S=(0,re.useState)(null),_=S[0],N=S[1],A=(0,re.useState)(!1),L=A[0],w=A[1],D=(0,re.useRef)(null);function O(){f({type:ea.HIDE_MODAL_CHALLENGE}),null!==d&&d((function(){return f({type:ea.SHOW_MODAL_CHALLENGE})}))}var R=(0,re.useCallback)((function(e,t){return f({type:ea.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{captchaToken:e,captchaId:t}})}),[f]),P=(0,re.useCallback)((function(){return f({type:ea.SET_CHALLENGE_INVALIDATED,errorCode:aa.UNKNOWN})}),[f]),M=(0,re.useCallback)((function(){C(!1),f({type:ea.SHOW_MODAL_CHALLENGE}),I(!0),s({displayed:!0}),N(Date.now())}),[f,s]);(0,re.useEffect)((function(){!function(){C(!0);var e=l.funCaptchaPublicKeys;y(e[Ia[n]]||""),c.fireTriggeredEvent()}()}),[]),(0,re.useEffect)((function(){function e(e){try{var t=JSON.parse(e.data);if(!Object.prototype.hasOwnProperty.call(t,"arkoseIframeId"))return;if(t.arkoseIframeId!==h)return;switch(t.eventId){case"challenge-complete":R(t.payload.captchaToken,a),c.fireSuccessEvent();var r=0;_&&(r=Date.now()-_),u.sendCaptchaRedeemEvent(n,r,!0,t.payload.captchaToken,a,Sa);break;case"challenge-error":P(),c.fireProviderErrorEvent(),u.sendCaptchaInitiatedEvent(n,ba,t.payload.captchaToken||"",a,t.payload.error,Sa);break;case"challenge-shown":M(),c.fireDisplayedEvent(),u.sendCaptchaInitiatedEvent(n,"visible",t.payload.captchaToken,a,null,Sa);break;case"challenge-resize":null!==D.current&&(D.current.height=t.payload.height,D.current.width=t.payload.width);break;case"challenge-suppressed":c.fireSuppressedEvent(),u.sendCaptchaInitiatedEvent(n,"hidden",t.payload.captchaToken,a,null,Sa);break;case"challenge-ready":c.fireInitializedEvent()}}catch(t){if(t instanceof SyntaxError)return;c.fireProviderErrorEvent(),console.error(Ca,"Got bad event data:",e.data),u.sendCaptchaInitiatedEvent(n,ba,null,a,String(t),Sa)}}return window.addEventListener("message",e),w(!0),function(){w(!1),window.removeEventListener("message",e)}}),[D,_,n,a,u,c,h,R,P,M]);var k=encodeURIComponent(r),x=ae().createElement("div",{className:"challenge-captcha-body",style:{height:g?0:void 0}},ae().createElement("iframe",{ref:D,title:"Challenge",id:"arkose-iframe",src:"/arkose/iframe?publicKey="+m+"&dataExchangeBlob="+k+"&Proxy="+encodeURIComponent(document.querySelector('meta[name="proxy"]').getAttribute("value"))+"&arkoseIframeId="+h+Ha,style:{border:"none",background:"transparent"}}));return i?ae().createElement(Na,{titleText:o.Description.VerifyingYouAreNotBot},ae().createElement(Aa,null,(g||!L)&&ae().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),L&&x)):ae().createElement(_a.Modal,{className:"modal-modern modal-modern-challenge-captcha",show:p||!T,style:{display:T?"block":"none"},onHide:O,backdrop:!!T&&"static"},ae().createElement(_a.Modal.Body,null,ae().createElement("button",{type:"button",className:"challenge-captcha-close-button",onClick:O,disabled:!1},ae().createElement("span",{className:"icon-close"})),(g||!L)&&ae().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),L&&x))}var Ga,Fa,za,Ba=(0,ga.withTranslations)((function(e){var t=e.actionType,n=e.appType,r=e.dataExchangeBlob,a=e.unifiedCaptchaId,i=e.captchaVersion,o=e.renderInline,l=e.requestService,u=e.metadataResponse,c=e.eventService,s=e.metricsService,d=e.translate,p=e.onChallengeDisplayed,f=e.onChallengeCompleted,h=e.onChallengeInvalidated,v=e.onModalChallengeAbandoned;return ae().createElement(Oa,{actionType:t,appType:n,dataExchangeBlob:r,unifiedCaptchaId:a,renderInline:o,requestService:l,translate:d,metadataResponse:u,eventService:c,metricsService:s,onChallengeDisplayed:p,onChallengeCompleted:f,onChallengeInvalidated:h,onModalChallengeAbandoned:v},i===Sa?ae().createElement(Ua,null):ae().createElement(ka,null))}),{common:[],feature:"Authentication.Captcha"}),qa=function(){function e(e){this.provider=e}return e.prototype.sendCaptchaRedeemEvent=function(e,t,n,r,a,i){var o=n?"true":"false";W().EventStream.SendEventWithTarget("captcha",e,{solveDuration:t,success:o,provider:this.provider,session:r||"",ucid:a||"",providerVersion:i},W().EventStream.TargetTypes.WWW)},e.prototype.sendCaptchaInitiatedEvent=function(e,t,n,r,a,i){W().EventStream.SendEventWithTarget("captchaInitiated",e,{type:t,provider:this.provider,ucid:r||"",session:n||"",message:a||"",providerVersion:i},W().EventStream.TargetTypes.WWW)},e.prototype.sendCaptchaV2ExperimentationEvent=function(e,t,n,r){W().EventStream.SendEventWithTarget("captchaV2Experimentation",e,{btid:n,provider:this.provider,ucid:t||"",captchaVersion:r},W().EventStream.TargetTypes.WWW)},e}(),Za=function(){function e(){this.timeStore={}}return e.prototype.start=function(e){this.timeStore[e]=Date.now()},e.prototype.end=function(e){var t=this.timeStore[e];return t?(delete this.timeStore[e],Date.now()-t):null},e}(),ja=window.EventTracker,Ya=function(){function e(e,t,n,r){this.applicationType=n,this.requestServiceDefault=r,this.actionType=e,this.eventTimer=new Za,this.provider=t,this.solveTimeSequenceName=""+this.actionType+this.provider+"_SolveTime"}return e.prototype.fireTriggeredEvent=function(){this.fireEvent("Triggered"),ja&&ja.start(this.appendApplicationType(this.solveTimeSequenceName)),this.eventTimer.start(this.solveTimeSequenceName)},e.prototype.fireInitializedEvent=function(){this.fireEvent("Initialized")},e.prototype.fireMetadataErrorEvent=function(){this.fireEvent("FailedToLoadMetadata")},e.prototype.fireSuppressedEvent=function(){this.fireEvent("Suppressed")},e.prototype.fireDisplayedEvent=function(){this.fireEvent("Displayed")},e.prototype.fireProviderErrorEvent=function(){this.fireEvent("FailedToLoad")},e.prototype.fireSuccessEvent=function(){this.fireEvent(Ta),ja&&ja.endSuccess(this.appendApplicationType(this.solveTimeSequenceName));var e=this.eventTimer.end(this.solveTimeSequenceName);null!==e&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeCaptcha,value:e,labelValues:{action_type:this.actionType,event_type:this.provider+"_"+Ta,application_type:this.applicationType||"unknown",version:Sa}}).catch((function(){}))},e.prototype.fireEvent=function(e){if(ja){var t=""+this.actionType+this.provider+"_"+e;ja.fireEvent(this.appendApplicationType(t))}this.requestServiceDefault.metrics.recordMetric({name:Pr.EventCaptcha,value:1,labelValues:{action_type:this.actionType,event_type:this.provider+"_"+e,application_type:this.applicationType||"unknown",version:Sa}}).catch((function(){}))},e.prototype.appendApplicationType=function(e){return this.applicationType?e+"_"+this.applicationType:e},e}(),Ka=new ma;function Ja(e){var t=e.containerId,n=e.actionType,r=e.appType,a=e.dataExchangeBlob,i=e.unifiedCaptchaId,o=e.renderInline,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,d,p,f,h,v,m,y,E;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(g){switch(g.label){case 0:return null===(e=document.getElementById(t))?[3,2]:((0,ie.unmountComponentAtNode)(e),d=new Ya(n,"FunCaptcha",r,Ka),[4,Ka.captcha.getMetadata()]);case 1:if((p=g.sent()).isError)return d.fireMetadataErrorEvent(),console.error(Ca,"Got error code "+((null===(E=p.error)||void 0===E?void 0:E.toString())||"null")+" fetching metadata"),[2,!1];if(f=new qa("FunCaptcha"),h="V1",!0!==p.value.disableCaptchaVersionExperiment){v=H.Cookies.getBrowserTrackerId()||"",m="";try{m=String((C=v,(new ne).finalize(C).toString()))}catch(e){console.error(Ca,e)}y=m.slice(-2)||"00",parseInt(y,16)%1==0&&(h="V2"),f.sendCaptchaV2ExperimentationEvent(n,i,v,h)}return(0,ie.render)(ae().createElement(Ba,{actionType:n,appType:r,dataExchangeBlob:a,unifiedCaptchaId:i,renderInline:o,requestService:Ka,metadataResponse:p.value,eventService:f,metricsService:d,captchaVersion:h,onChallengeDisplayed:l,onChallengeCompleted:u,onChallengeInvalidated:c,onModalChallengeAbandoned:s}),e),[2,!0];case 2:return[2,Promise.resolve(!1)]}var C}))}))}function Xa(e){var t=e.positiveButton,n=e.negativeButton,r=e.children;return ae().createElement("div",{className:"inline-challenge-footer"},ae().createElement("div",{className:"inline-challenge-footer-buttons"},null!==n&&ae().createElement("button",{type:"button",className:"btn-secondary-md inline-challenge-footer-button","aria-label":n.label,disabled:!n.enabled,onClick:n.action},n.content),ae().createElement("button",{type:"button",className:"btn-cta-md inline-challenge-footer-button","aria-label":t.label,disabled:!t.enabled,onClick:t.action},t.content)),r)}function Qa(e){var t=e.positiveButton,n=e.negativeButton,r=e.children;return ae().createElement(_a.Modal.Footer,null,ae().createElement("div",{className:"modal-modern-footer-buttons"},null!==n&&ae().createElement("button",{type:"button",className:"btn-secondary-md modal-modern-footer-button","aria-label":n.label,disabled:!n.enabled,onClick:n.action},n.content),ae().createElement("button",{type:"button",className:"btn-cta-md modal-modern-footer-button","aria-label":t.label,disabled:!t.enabled,onClick:t.action},t.content)),r)}function $a(e){var t=e.headerText,n=e.buttonType,r=e.buttonAction,a=e.buttonEnabled,i=e.headerInfo;return ae().createElement(_a.Modal.Header,{useBaseBootstrapComponent:!0},function(e,t,n){switch(e){case Ea.BACK:return ae().createElement("button",{type:"button",className:"modal-modern-header-button",onClick:t,disabled:!n},ae().createElement("span",{className:"icon-back"}));case Ea.CLOSE:return ae().createElement("button",{type:"button",className:"modal-modern-header-button",onClick:t,disabled:!n},ae().createElement("span",{className:"icon-close"}));case Ea.HIDDEN:default:return ae().createElement("div",null)}}(n,r,a),ae().createElement(_a.Modal.Title,null,t),ae().createElement("div",{className:"modal-modern-header-info"},i))}!function(e){e.BACK="BACK",e.CLOSE="CLOSE",e.HIDDEN="HIDDEN"}(Ea||={}),function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Ga||={}),function(e){e.ForceAuthenticator="ForceAuthenticator",e.ForceTwoStepVerification="ForceTwoStepVerification"}(Fa||={});var ei={common:[],feature:"Feature.ForceAuthenticator"},ti={common:[],feature:"Feature.ForceTwoStepVerification"},ni=["Action.Setup","Description.Reason","Description.SetupAuthenticator","Header.TurnOnAuthenticator"],ri=["ForceTwoStepVerification.Header","ForceTwoStepVerification.Body","ForceTwoStepVerification.Action"];function ai(){return(ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function ii(e,t){var n=ai({},e);switch(t.type){case za.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case za.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e[e.HIDE_MODAL_CHALLENGE=0]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=1]="SHOW_MODAL_CHALLENGE"}(za||={});var oi=(0,re.createContext)(null);function li(e){var t=e.forceActionRedirectChallengeConfig,n=e.renderInline,r=e.translate,a=e.onModalChallengeAbandoned,i=e.children,o=(0,re.useState)((function(){return t.getTranslationResources(r)}))[0],l=(0,re.useState)((function(){return{renderInline:n,resources:o,redirectURLSignifier:t.redirectURLSignifier,onModalChallengeAbandoned:a,isModalVisible:!0}}))[0],u=(0,re.useReducer)(ii,l),c=u[0],s=u[1];return ae().createElement(oi.Provider,{value:{state:c,dispatch:s}},i)}function ui(){var e=function(){var e=(0,re.useContext)(oi);if(null===e)throw new Error("ForceActionRedirectContext was not provided in the current scope");return e}(),t=e.state,n=t.renderInline,r=t.redirectURLSignifier,a=t.resources,i=t.onModalChallengeAbandoned,o=t.isModalVisible,l=e.dispatch;function u(){l({type:za.HIDE_MODAL_CHALLENGE}),null!==i&&i((function(){return l({type:za.SHOW_MODAL_CHALLENGE})}))}var c={content:a.Action,label:a.Action,enabled:!0,action:function(){var e="/my/account#!/security?src="+r;window.top&&window.top!==window.self?window.top.location.href=e:window.open(e,"_self")}};function s(){var e=n?Aa:_a.Modal.Body,t=n?Xa:Qa,r=n?"inline-challenge-lock-icon":"modal-lock-icon";return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("div",{className:r}),ae().createElement("p",null,a.Body)),ae().createElement(t,{positiveButton:c,negativeButton:null}))}return n?ae().createElement(Na,{titleText:a.Header},s()):ae().createElement(_a.Modal,{className:"modal-modern",show:o,onHide:u,backdrop:"static"},ae().createElement($a,{headerText:a.Header,buttonType:Ea.CLOSE,buttonAction:u,buttonEnabled:!0,headerInfo:null}),s())}function ci(e){var t=e.renderInline,n=e.forceActionRedirectChallengeConfig,r=e.translate,a=e.onModalChallengeAbandoned;return ae().createElement(li,{renderInline:t,forceActionRedirectChallengeConfig:n,translate:r,onModalChallengeAbandoned:a},ae().createElement(ui,null))}function si(e){var t=e.containerId,n=e.renderInline,r=e.forceActionRedirectChallengeType,a=e.onModalChallengeAbandoned,i=document.getElementById(t),o=function(e){switch(e){case Fa.ForceAuthenticator:return{redirectURLSignifier:"forceauthenticator",translationConfig:ei,translationResourceKeys:ni,getTranslationResources:function(e){return{Header:e("Header.TurnOnAuthenticator"),Body:e("Description.SetupAuthenticator")+"\n"+e("Description.Reason"),Action:e("Action.Setup")}}};case Fa.ForceTwoStepVerification:return{redirectURLSignifier:"forcetwostepverification",translationConfig:ti,translationResourceKeys:ri,getTranslationResources:function(e){return{Header:e("ForceTwoStepVerification.Header"),Body:e("ForceTwoStepVerification.Body"),Action:e("ForceTwoStepVerification.Action")}}};default:throw new Error("Invalid ForceActionRedirectChallengeType")}}(r);if(null!==i){(0,ie.unmountComponentAtNode)(i);var l=(0,ga.withTranslations)(ci,o.translationConfig);return(0,ie.render)(ae().createElement(l,{forceActionRedirectChallengeConfig:o,renderInline:n,onModalChallengeAbandoned:a}),i),!0}return!1}function di(){return(di=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function pi(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function fi(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}function hi(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||=Array.prototype.slice.call(t,0,a),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}new ma,Object.create,Object.create;var vi,mi,yi="3.4.1";function Ei(e,t){return new Promise((function(n){return setTimeout(n,e,t)}))}function gi(e){return!!e&&"function"==typeof e.then}function Ci(e,t){try{var n=e();gi(n)?n.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,n)}catch(e){t(!1,e)}}function bi(e,t,n=16){return pi(this,void 0,void 0,(function(){var r,a,i;return fi(this,(function(o){switch(o.label){case 0:r=Date.now(),a=0,o.label=1;case 1:return a<e.length?(t(e[a],a),(i=Date.now())>=r+n?(r=i,[4,Ei(0)]):[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return++a,[3,1];case 4:return[2]}}))}))}function Ti(e){e.then(void 0,(function(){}))}function Ii(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function Si(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function _i(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function Ni(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function Ai(e,t){return[e[0]^t[0],e[1]^t[1]]}function Li(e){return e=Ai(e,[0,e[0]>>>1]),e=Ai(e=Si(e,[4283543511,3981806797]),[0,e[0]>>>1]),Ai(e=Si(e,[3301882366,444984403]),[0,e[0]>>>1])}function wi(e){return parseInt(e)}function Di(e){return parseFloat(e)}function Oi(e,t){return"number"==typeof e&&isNaN(e)?t:e}function Ri(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function Pi(e,t=1){if(Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function Mi(e){return e&&"object"==typeof e&&"message"in e?e:{message:e}}function ki(e,t,n){var r=Object.keys(e).filter((function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(n,e)})),a=Array(r.length);return bi(r,(function(n,r){a[r]=function(e,t){var n=new Promise((function(n){var r=Date.now();Ci(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Date.now()-r;if(!e[0])return n((function(){return{error:Mi(e[1]),duration:a}}));var i=e[1];if(function(e){return"function"!=typeof e}(i))return n((function(){return{value:i,duration:a}}));n((function(){return new Promise((function(e){var t=Date.now();Ci(i,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=a+Date.now()-t;if(!n[0])return e({error:Mi(n[1]),duration:i});e({value:n[1],duration:i})}))}))}))}))}));return Ti(n),function(){return n.then((function(e){return e()}))}}(e[n],t)})),function(){return pi(this,void 0,void 0,(function(){var e,t,n,i,o,l;return fi(this,(function(u){switch(u.label){case 0:for(e={},t=0,n=r;t<n.length;t++)i=n[t],e[i]=void 0;o=Array(r.length),l=function(){var t;return fi(this,(function(n){switch(n.label){case 0:return t=!0,[4,bi(r,(function(n,r){if(!o[r])if(a[r]){var i=a[r]().then((function(t){return e[n]=t}));Ti(i),o[r]=i}else t=!1}))];case 1:return n.sent(),t?[2,"break"]:[4,Ei(1)];case 2:return n.sent(),[2]}}))},u.label=1;case 1:return[5,l()];case 2:if("break"===u.sent())return[3,4];u.label=3;case 3:return[3,1];case 4:return[4,Promise.all(o)];case 5:return u.sent(),[2,e]}}))}))}}function xi(){var e=window,t=navigator;return Ri(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Vi(){var e=window,t=navigator;return Ri(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Hi(){var e=window,t=navigator;return Ri(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function Wi(){var e=window;return Ri(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function Ui(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function Gi(){var e=Vi(),t=function(){var e=window;return Ri(["buildID"in navigator,"MozAppearance"in(document.documentElement?.style??{}),"onmozfullscreenchange"in e,"mozInnerScreenX"in e,"CSSMozDocumentRule"in e,"CanvasCaptureMediaStream"in e])>=4}();if(!e&&!t)return!1;var n=window;return Ri(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}function Fi(e){var t=new Error(e);return t.name=e,t}function zi(e,t,n){var r;return void 0===n&&(n=50),pi(this,void 0,void 0,(function(){var a,i;return fi(this,(function(o){switch(o.label){case 0:a=document,o.label=1;case 1:return a.body?[3,3]:[4,Ei(n)];case 2:return o.sent(),[3,1];case 3:i=a.createElement("iframe"),o.label=4;case 4:return o.trys.push([4,,10,11]),[4,new Promise((function(e,n){var r=!1;function o(){r=!0,e()}i.onload=o,i.onerror=function(e){r=!0,n(e)};var l=i.style;l.setProperty("display","block","important"),l.position="absolute",l.top="0",l.left="0",l.visibility="hidden",t&&"srcdoc"in i?i.srcdoc=t:i.src="about:blank",a.body.appendChild(i),function e(){r||("complete"===i.contentWindow?.document?.readyState?o():setTimeout(e,10))}()}))];case 5:o.sent(),o.label=6;case 6:return i.contentWindow?.document?.body?[3,8]:[4,Ei(n)];case 7:return o.sent(),[3,6];case 8:return[4,e(i,i.contentWindow)];case 9:return[2,o.sent()];case 10:return null!==(r=i.parentNode)&&void 0!==r&&r.removeChild(i),[7];case 11:return[2]}}))}))}function Bi(e){for(var t=function(e){var t=`Unexpected syntax '${e}'`,n=/^\s*([a-z-]*)(.*)$/i.exec(e),r=n[1]||void 0,a={},i=/([.:#][\w-]+|\[.+?\])/gi;function o(e,t){a[e]=a[e]||[],a[e].push(t)}for(;;){var l=i.exec(n[2]);if(!l)break;var u=l[0];switch(u[0]){case".":o("class",u.slice(1));break;case"#":o("id",u.slice(1));break;case"[":var c=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(u);if(!c)throw new Error(t);o(c[1],c[4]??c[5]??"");break;default:throw new Error(t)}}return[r,a]}(e),n=t[0],r=t[1],a=document.createElement(n??"div"),i=0,o=Object.keys(r);i<o.length;i++){var l=o[i],u=r[l].join(" ");"style"===l?qi(a.style,u):a.setAttribute(l,u)}return a}function qi(e,t){for(var n=0,r=t.split(";");n<r.length;n++){var a=r[n],i=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(a);if(i){var o=i[1],l=i[2],u=i[4];e.setProperty(o,l,u||"")}}}var Zi=["monospace","sans-serif","serif"],ji=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Yi(e){return e.toDataURL()}function Ki(){var e=screen;return[Oi(Di(e.availTop),null),Oi(Di(e.width)-Di(e.availWidth)-Oi(Di(e.availLeft),0),null),Oi(Di(e.height)-Di(e.availHeight)-Oi(Di(e.availTop),0),null),Oi(Di(e.availLeft),null)]}function Ji(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function Xi(e){var t;return pi(this,void 0,void 0,(function(){var n,r,a,i,o,l,u;return fi(this,(function(c){switch(c.label){case 0:for(n=document,r=n.createElement("div"),a=new Array(e.length),i={},Qi(r),u=0;u<e.length;++u)o=Bi(e[u]),Qi(l=n.createElement("div")),l.appendChild(o),r.appendChild(l),a[u]=o;c.label=1;case 1:return n.body?[3,3]:[4,Ei(50)];case 2:return c.sent(),[3,1];case 3:n.body.appendChild(r);try{for(u=0;u<e.length;++u)a[u].offsetParent||(i[e[u]]=!0)}finally{null!==(t=r.parentNode)&&void 0!==t&&t.removeChild(r)}return[2,i]}}))}))}function Qi(e){e.style.setProperty("display","block","important")}function $i(e){return matchMedia(`(inverted-colors: ${e})`).matches}function eo(e){return matchMedia(`(forced-colors: ${e})`).matches}function to(e){return matchMedia(`(prefers-contrast: ${e})`).matches}function no(e){return matchMedia(`(prefers-reduced-motion: ${e})`).matches}function ro(e){return matchMedia(`(dynamic-range: ${e})`).matches}var ao,io=Math;function oo(){return 0}var lo,uo={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},co={fonts:function(){return zi((function(e,t){var n=t.document,r=n.body;r.style.fontSize="48px";var a=n.createElement("div"),i={},o={};function l(e){var t=n.createElement("span"),r=t.style;return r.position="absolute",r.top="0",r.left="0",r.fontFamily=e,t.textContent="mmMwWLliI0O&1",a.appendChild(t),t}var u=Zi.map(l),c=function(){for(var e={},t=function(t){e[t]=Zi.map((function(e){return function(e,t){return l(`'${e}',${t}`)}(t,e)}))},n=0,r=ji;n<r.length;n++)t(r[n]);return e}();r.appendChild(a);for(var s=0;s<Zi.length;s++)i[Zi[s]]=u[s].offsetWidth,o[Zi[s]]=u[s].offsetHeight;return ji.filter((function(e){return t=c[e],Zi.some((function(e,n){return t[n].offsetWidth!==i[e]||t[n].offsetHeight!==o[e]}));var t}))}))},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return pi(this,void 0,void 0,(function(){var e,n,r,a,i;return fi(this,(function(o){switch(o.label){case 0:return Hi()||Gi()?(l=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",l("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",l("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",l("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),l("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",l("LnNwb25zb3JpdA=="),".ylamainos",l("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),l("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",l("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",l("LmhlYWRlci1ibG9ja2VkLWFk"),l("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",l("I2FkXzMwMFgyNTA="),l("I2Jhbm5lcmZsb2F0MjI="),l("I2FkLWJhbm5lcg=="),l("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[l("LlppX2FkX2FfSA=="),l("YVtocmVmKj0iL29kMDA1LmNvbSJd"),l("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[l("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",l("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[l("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),l("LmJveHN0YXJ0d2VyYnVuZw=="),l("LndlcmJ1bmcz"),l("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),l("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",l("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),l("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),l("LmFkZ29vZ2xl"),l("LmFkX3JlZ3VsYXIz")],adGuardMobile:[l("YW1wLWF1dG8tYWRz"),l("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",l("I2FkX2ludmlld19hcmVh")],adGuardRussian:[l("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),l("LnJlY2xhbWE="),'div[id^="smi2adblock"]',l("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),l("I2FkX3NxdWFyZQ==")],adGuardSocial:[l("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),l("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",l("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",l("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),l("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),l("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",l("I3Jla2xhbWk="),l("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),l("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),l("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[l("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",l("I25ld0Fk")],easyList:[l("I0FEX0NPTlRST0xfMjg="),l("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",l("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),l("LnNxdWFyZV9hZHM=")],easyListChina:[l("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),l("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),l("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",l("I3Jla2xhbW5pLWJveA=="),l("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",l("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[l("I2FkdmVydGVudGll"),l("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",l("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[l("I0FkX1dpbjJkYXk="),l("I3dlcmJ1bmdzYm94MzAw"),l("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),l("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),l("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[l("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",l("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),l("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),l("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[l("LnJla2xhbW9zX3RhcnBhcw=="),l("LnJla2xhbW9zX251b3JvZG9z"),l("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),l("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),l("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[l("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[l("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),l("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",l("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[l("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),l("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),l("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",l("LmFkX19tYWlu"),l("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[l("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[l("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),l("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[l("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),l("I2xpdmVyZUFkV3JhcHBlcg=="),l("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),l("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[l("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",l("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),l("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),l("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[l("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),l("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),l("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",l("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),l("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),l("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),l("ZGl2I3NrYXBpZWNfYWQ=")],ro:[l("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',l("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),l("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),l("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[l("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),l("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),l("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",l("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),l("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",l("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},n=Object.keys(e),[4,Xi((i=[]).concat.apply(i,n.map((function(t){return e[t]}))))]):[2,void 0];case 1:return r=o.sent(),t&&function(e,t){for(var n="DOM blockers debug:\n```",r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];n+=`\n${i}:`;for(var o=0,l=e[i];o<l.length;o++){var u=l[o];n+=`\n  ${t[u]?"":""} ${u}`}}console.log(`${n}\n\`\`\``)}(e,r),(a=n.filter((function(t){var n=e[t];return Ri(n.map((function(e){return r[e]})))>.6*n.length}))).sort(),[2,a]}var l}))}))},fontPreferences:function(){return function(e,t=4e3){return zi((function(n,r){var a=r.document,i=a.body,o=i.style;o.width=`${t}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",Vi()?i.style.zoom=""+1/r.devicePixelRatio:Hi()&&(i.style.zoom="reset");var l=a.createElement("div");return l.textContent=hi([],Array(t/20|0),!0).map((function(){return"word"})).join(" "),i.appendChild(l),e(a,i)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(e,t){for(var n={},r={},a=0,i=Object.keys(uo);a<i.length;a++){var o=i[a],l=uo[o],u=l[0],c=void 0===u?{}:u,s=l[1],d=void 0===s?"mmMwWLliI0fiflO&1":s,p=e.createElement("span");p.textContent=d,p.style.whiteSpace="nowrap";for(var f=0,h=Object.keys(c);f<h.length;f++){var v=h[f],m=c[v];void 0!==m&&(p.style[v]=m)}n[o]=p,t.appendChild(e.createElement("br")),t.appendChild(p)}for(var y=0,E=Object.keys(uo);y<E.length;y++)r[o=E[y]]=n[o].getBoundingClientRect().width;return r}))},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(Hi()&&!Wi()&&!function(){var e=window;return Ri(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var a=n.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.25,r.connect(a),a.connect(n.destination),r.start(0);var i=function(e){function t(){}return[new Promise((function(n,r){var a=!1,i=0,o=0;function l(){setTimeout((function(){return r(Fi("timeout"))}),Math.min(500,o+5e3-Date.now()))}e.oncomplete=function(e){return n(e.renderedBuffer)},function t(){try{var n=e.startRendering();switch(gi(n)&&Ti(n),e.state){case"running":o=Date.now(),a&&l();break;case"suspended":document.hidden||i++,a&&i>=3?r(Fi("suspended")):setTimeout(t,500)}}catch(e){r(e)}}(),t=function(){a||(a=!0,o>0&&l())}})),t]}(n),o=i[0],l=i[1],u=o.then((function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return Ti(u),function(){return l(),u}},screenFrame:function(){var e=this,t=function(){var e=this;return function(){if(void 0===mi){function e(){var t=Ki();Ji(t)?mi=setTimeout(e,2500):(vi=t,mi=void 0)}e()}}(),function(){return pi(e,void 0,void 0,(function(){var e;return fi(this,(function(t){switch(t.label){case 0:return Ji(e=Ki())?vi?[2,hi([],vi,!0)]:(n=document).fullscreenElement||n.msFullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement?[4,Ui()]:[3,2]:[3,2];case 1:t.sent(),e=Ki(),t.label=2;case 2:return Ji(e)||(vi=e),[2,e]}var n}))}))}}();return function(){return pi(e,void 0,void 0,(function(){var e,n;return fi(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,[(n=function(e){return null===e?null:Pi(e,10)})(e[0]),n(e[1]),n(e[2]),n(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,n=[],r=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==r&&n.push([r]),Array.isArray(t.languages))Vi()&&Ri([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||n.push(t.languages);else if("string"==typeof t.languages){var a=t.languages;a&&n.push(a.split(","))}return n},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return Oi(Di(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen;function t(e){return Oi(wi(e),null)}var n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return Oi(wi(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=window.Intl?.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}e=(new Date).getFullYear();var r=-Math.max(Di(new Date(e,0,1).getTimezoneOffset()),Di(new Date(e,6,1).getTimezoneOffset()));return`UTC${r>=0?"+":""}${Math.abs(r)}`},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){var e,t;if(!xi()&&(!(Ri(["msWriteProfilerMark"in(e=window),"MSStream"in e,"msLaunchUri"in(t=navigator),"msSaveBlob"in t])>=3)||xi()))try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&Hi()&&!Wi()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return Ri(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var a=[],i=0;i<r.length;++i){var o=r[i];a.push({type:o.type,suffixes:o.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:a})}}return t}},canvas:function(){var e,t,n=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),a=r[0],i=r[1];if(function(e,t){return!!t&&!!e.toDataURL}(a,i)){n=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(i),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(a,i);var o=Yi(a);o!==Yi(a)?e=t="unstable":(t=o,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var a=r[n],i=a[0],o=a[1],l=a[2];t.fillStyle=i,t.beginPath(),t.arc(o,l,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(a,i),e=Yi(a))}else e=t="";return{winding:n,geometry:e,text:t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=wi(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],a=window[r];a&&"object"==typeof a&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia(`(color-gamut: ${n})`).matches)return n}},invertedColors:function(){return!!$i("inverted")||!$i("none")&&void 0},forcedColors:function(){return!!eo("active")||!eo("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia(`(max-monochrome: ${e})`).matches)return e;throw new Error("Too high value")}},contrast:function(){return to("no-preference")?0:to("high")||to("more")?1:to("low")||to("less")?-1:to("forced")?10:void 0},reducedMotion:function(){return!!no("reduce")||!no("no-preference")&&void 0},hdr:function(){return!!ro("high")||!ro("standard")&&void 0},math:function(){var e,t=io.acos||oo,n=io.acosh||oo,r=io.asin||oo,a=io.asinh||oo,i=io.atanh||oo,o=io.atan||oo,l=io.sin||oo,u=io.sinh||oo,c=io.cos||oo,s=io.cosh||oo,d=io.tan||oo,p=io.tanh||oo,f=io.exp||oo,h=io.expm1||oo,v=io.log1p||oo;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,io.log(e+io.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:a(1),asinhPf:io.log(1+io.sqrt(2)),atanh:i(.5),atanhPf:io.log(3)/2,atan:o(.5),sin:l(-1e300),sinh:u(1),sinhPf:io.exp(1)-1/io.exp(1)/2,cos:c(10.000000000123),cosh:s(1),coshPf:(io.exp(1)+1/io.exp(1))/2,tan:d(-1e300),tanh:p(1),tanhPf:(io.exp(2)-1)/(io.exp(2)+1),exp:f(1),expm1:h(1),expm1Pf:io.exp(1)-1,log1p:v(10),log1pPf:io.log(11),powPI:io.pow(io.PI,-100)}},videoCard:function(){var e=document.createElement("canvas"),t=e.getContext("webgl")??e.getContext("experimental-webgl");if(t&&"getExtension"in t){var n=t.getExtension("WEBGL_debug_renderer_info");if(n)return{vendor:(t.getParameter(n.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(t.getParameter(n.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}};function so(e){var t=function(e){if(Gi())return.4;if(Hi())return Wi()?.5:.3;var t=e.platform.value||"";return/^Win/.test(t)?.6:/^Mac/.test(t)?.5:.7}(e),n=function(e){return Pi(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,`${n}`)}}function po(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?function(e){var t;return di({name:e.name,message:e.message,stack:null===(t=e.stack)||void 0===t?void 0:t.split("\n")},e)}(t):t}),2)}function fo(e){return function(e,t){var n;t=t||0;var r=(e=e||"").length%16,a=e.length-r,i=[0,t],o=[0,t],l=[0,0],u=[0,0],c=[2277735313,289559509],s=[1291169091,658871167];for(n=0;n<a;n+=16)l=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],u=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],l=_i(l=Si(l,c),31),i=Ii(i=_i(i=Ai(i,l=Si(l,s)),27),o),i=Ii(Si(i,[0,5]),[0,1390208809]),u=_i(u=Si(u,s),33),o=Ii(o=_i(o=Ai(o,u=Si(u,c)),31),i),o=Ii(Si(o,[0,5]),[0,944331445]);switch(l=[0,0],u=[0,0],r){case 15:u=Ai(u,Ni([0,e.charCodeAt(n+14)],48));case 14:u=Ai(u,Ni([0,e.charCodeAt(n+13)],40));case 13:u=Ai(u,Ni([0,e.charCodeAt(n+12)],32));case 12:u=Ai(u,Ni([0,e.charCodeAt(n+11)],24));case 11:u=Ai(u,Ni([0,e.charCodeAt(n+10)],16));case 10:u=Ai(u,Ni([0,e.charCodeAt(n+9)],8));case 9:u=Si(u=Ai(u,[0,e.charCodeAt(n+8)]),s),o=Ai(o,u=Si(u=_i(u,33),c));case 8:l=Ai(l,Ni([0,e.charCodeAt(n+7)],56));case 7:l=Ai(l,Ni([0,e.charCodeAt(n+6)],48));case 6:l=Ai(l,Ni([0,e.charCodeAt(n+5)],40));case 5:l=Ai(l,Ni([0,e.charCodeAt(n+4)],32));case 4:l=Ai(l,Ni([0,e.charCodeAt(n+3)],24));case 3:l=Ai(l,Ni([0,e.charCodeAt(n+2)],16));case 2:l=Ai(l,Ni([0,e.charCodeAt(n+1)],8));case 1:l=Si(l=Ai(l,[0,e.charCodeAt(n)]),c),i=Ai(i,l=Si(l=_i(l,31),s))}return i=Ii(i=Ai(i,[0,e.length]),o=Ai(o,[0,e.length])),o=Ii(o,i),i=Ii(i=Li(i),o=Li(o)),o=Ii(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var a=r[n],i=e[a],o=i.error?"error":JSON.stringify(i.value);t+=`${t?"|":""}${a.replace(/([:|\\])/g,"\\$1")}:${o}`}return t}(e))}function ho(e=50){return function(e,t=1/0){var n=window.requestIdleCallback;return n?new Promise((function(e){return n.call(window,(function(){return e()}),{timeout:t})})):Ei(Math.min(e,t))}(e,2*e)}function vo(e,t){var n=Date.now();return{get:function(r){return pi(this,void 0,void 0,(function(){var a,i,o;return fi(this,(function(l){switch(l.label){case 0:return a=Date.now(),[4,e()];case 1:return i=l.sent(),o=function(e){var t;return{get visitorId(){return void 0===t&&(t=fo(this.components)),t},set visitorId(e){t=e},confidence:so(e),components:e,version:yi}}(i),(t||(null==r?void 0:r.debug))&&console.log(`Copy the text below to get the debug data:\n\n\`\`\`\nversion: ${o.version}\nuserAgent: ${navigator.userAgent}\ntimeBetweenLoadAndGet: ${a-n}\nvisitorId: ${o.visitorId}\ncomponents: ${po(i)}\n\`\`\``),[2,o]}}))}))}}}var mo={load:function(e){var t=void 0===e?{}:e,n=t.delayFallback,r=t.debug,a=t.monitoring,i=void 0===a||a;return pi(this,void 0,void 0,(function(){return fi(this,(function(e){switch(e.label){case 0:return i&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${yi}/npm-monitoring`,!0),e.send()}catch(e){console.error(e)}}(),[4,ho(n)];case 1:return e.sent(),[2,vo(ki(co,{debug:r},[]),r)]}}))}))},hashComponents:fo,componentsToDebugString:po},yo="accountSecurityChallengeDeviceIntegrityEvent",Eo="ChallengeCompleted",go="ChallengeInvalidated",Co="ChallengeAbandoned";function bo(){return(bo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function To(e,t){var n=bo({},e);switch(t.type){case ao.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n;case ao.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n;default:return e}}!function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED"}(ao||={});var Io,So=(0,re.createContext)(null);function _o(e){var t=e.challengeId,n=e.requestHash,r=e.integrityType,a=e.renderInline,i=e.eventService,o=e.metricsService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=e.children,f=(0,re.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")}}}(l)}))[0],h=(0,re.useState)((function(){return{challengeId:t,requestHash:n,integrityType:r,renderInline:a,resources:f,eventService:i,metricsService:o,onChallengeDisplayed:u,onModalChallengeAbandoned:d,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1}}))[0],v=(0,re.useReducer)(To,h),m=v[0],y=v[1];return(0,re.useEffect)((function(){null!==m.onChallengeCompletedData&&null===m.onChallengeInvalidatedData&&c(m.onChallengeCompletedData)}),[m.onChallengeCompletedData,m.onChallengeInvalidatedData,c]),(0,re.useEffect)((function(){null===m.onChallengeCompletedData&&null!==m.onChallengeInvalidatedData&&s(m.onChallengeInvalidatedData)}),[i,o,m.onChallengeCompletedData,m.onChallengeInvalidatedData,s]),ae().createElement(So.Provider,{value:{state:m,dispatch:y}},p)}function No(){var e=function(){var e=(0,re.useContext)(So);if(null===e)throw new Error("DeviceIntegrityContext was not provided in the current scope");return e}(),t=e.state,n=t.integrityType,r=t.requestHash,a=t.renderInline,i=t.resources,o=t.metricsService,l=t.eventService,u=e.dispatch,c=(0,re.useCallback)((function(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,a,i;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),H.DeviceMeta&&(0,H.DeviceMeta)().isInApp?(e={requestHash:r,timeoutMillis:450},[4,Nn.hybridResponseService.getNativeResponse(Nn.hybridResponseService.FeatureTarget.GET_INTEGRITY_TOKEN,{deviceIntegrityParams:JSON.stringify(e)},1200)]):[3,2];case 1:return null!==(t=c.sent())?(a=JSON.parse(t),u({type:ao.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{integrityType:n,redemptionToken:a.token}}),l.sendChallengeCompletedEvent(a.result),o.fireChallengeCompletedEvent(),[2]):(l.sendChallengeInvalidatedEvent("INVALID_NATIVE_RESPONSE"),o.fireChallengeInvalidatedEvent(),[3,3]);case 2:l.sendChallengeInvalidatedEvent("NOT_IN_APP"),o.fireChallengeInvalidatedEvent(),c.label=3;case 3:return[3,5];case 4:return i=c.sent(),console.error(i),l.sendChallengeInvalidatedEvent("NATIVE_EXCEPTION"),o.fireChallengeInvalidatedEvent(),[3,5];case 5:return u({type:ao.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{integrityType:n,redemptionToken:""}}),[2]}}))}))}),[u,n,r,l,o]);return(0,re.useEffect)((function(){c()}),[]),a?ae().createElement(Na,{titleText:i.Description.VerifyingYouAreNotBot},ae().createElement(Aa,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin"}))):ae().createElement(_a.Modal,{className:"modal-modern",backdrop:"static"},ae().createElement(_a.Modal.Body,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin"})))}var Ao=(0,ga.withTranslations)((function(e){var t=e.challengeId,n=e.requestHash,r=e.integrityType,a=e.renderInline,i=e.eventService,o=e.metricsService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned;return ae().createElement(_o,{challengeId:t,requestHash:n,integrityType:r,renderInline:a,eventService:i,metricsService:o,translate:l,onChallengeDisplayed:u,onChallengeCompleted:c,onChallengeInvalidated:s,onModalChallengeAbandoned:d},ae().createElement(No,null))}),{common:["CommonUI.Messages"],feature:"Feature.DeviceIntegrityChallenge"}),Lo=function(){function e(e,t){this.challengeId=e,this.integrityType=t}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(yo,"challengeInitialized",{challengeId:this.challengeId,integrityType:this.integrityType},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(e){W().EventStream.SendEventWithTarget(yo,"challengeCompleted",{challengeId:this.challengeId,integrityType:this.integrityType,result:e},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(e){W().EventStream.SendEventWithTarget(yo,"challengeInvalidated",{challengeId:this.challengeId,integrityType:this.integrityType,result:e},W().EventStream.TargetTypes.WWW)},e}(),wo=function(){function e(e,t){this.appType=e||"unknown",this.requestServiceDefault=t,this.eventTimer=new Za,this.challengeSolveTimeSequenceName="DeviceIntegrity_ChallengeSolveTime"}return e.prototype.fireChallengeInitializedEvent=function(){this.fireEvent("ChallengeInitialized"),this.eventTimer.start(this.challengeSolveTimeSequenceName)},e.prototype.fireChallengeCompletedEvent=function(){this.fireEvent(Eo),this.fireSolveTimeEvent(Eo)},e.prototype.fireChallengeInvalidatedEvent=function(){this.fireEvent(go),this.fireSolveTimeEvent(go)},e.prototype.fireChallengeAbandonedEvent=function(){this.fireEvent(Co),this.fireSolveTimeEvent(Co)},e.prototype.fireEvent=function(e){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventDeviceIntegrity,value:1,labelValues:{event_type:"DeviceIntegrity_"+e,application_type:this.appType}}).catch((function(){}))},e.prototype.fireSolveTimeEvent=function(e){var t=this.eventTimer.end(this.challengeSolveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeDeviceIntegrity,value:t,labelValues:{event_type:"DeviceIntegrity_"+e,application_type:this.appType}}).catch((function(){}))},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(lo||={});var Do,Oo,Ro,Po=new ma;function Mo(e){var t=e.containerId,n=e.challengeId,r=e.requestHash,a=e.integrityType,i=e.appType,o=e.renderInline,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,d=document.getElementById(t);if(null!==d){(0,ie.unmountComponentAtNode)(d);var p=new Lo(n,a),f=new wo(i,Po);return(0,ie.render)(ae().createElement(Ao,{challengeId:n,requestHash:r,renderInline:o,integrityType:a,eventService:p,metricsService:f,onChallengeDisplayed:l,onChallengeCompleted:u,onChallengeInvalidated:c,onModalChallengeAbandoned:s}),d),p.sendChallengeInitializedEvent(),f.fireChallengeInitializedEvent(),!0}return!1}var ko="accountSecurityChallengePrivateAccessTokenEvent",xo="ChallengeCompleted",Vo="ChallengeInvalidated",Ho="ChallengeAbandoned";function Wo(){return(Wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function Uo(e,t){var n=Wo({},e);switch(t.type){case Oo.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n;case Oo.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n;default:return e}}!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Io||={}),function(e){e[e.INITIAL=0]="INITIAL",e[e.COMPLETED_ERROR=1]="COMPLETED_ERROR",e[e.COMPLETED_SUCCESS=2]="COMPLETED_SUCCESS"}(Do||={}),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED"}(Oo||={});var Go=(0,re.createContext)(null);function Fo(e){var t=e.challengeId,n=e.renderInline,r=e.eventService,a=e.metricsService,i=e.requestService,o=e.translate,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,d=e.children,p=(0,re.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")}}}(o)}))[0],f=(0,re.useState)((function(){return{challengeId:t,renderInline:n,resources:p,eventService:r,metricsService:a,requestService:i,onChallengeDisplayed:l,onModalChallengeAbandoned:s,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1}}))[0],h=(0,re.useReducer)(Uo,f),v=h[0],m=h[1];return(0,re.useEffect)((function(){null!==v.onChallengeCompletedData&&null===v.onChallengeInvalidatedData&&u(v.onChallengeCompletedData)}),[v.onChallengeCompletedData,v.onChallengeInvalidatedData,u]),(0,re.useEffect)((function(){null!==v.onChallengeInvalidatedData&&null===v.onChallengeCompletedData&&(r.sendChallengeInvalidatedEvent(),a.fireChallengeInvalidatedEvent(),c(v.onChallengeInvalidatedData))}),[r,a,v.onChallengeCompletedData,v.onChallengeInvalidatedData,c]),ae().createElement(Go.Provider,{value:{state:v,dispatch:m}},d)}function zo(){var e=function(){var e=(0,re.useContext)(Go);if(null===e)throw new Error("PrivateAccessTokenContext was not provided in the current scope");return e}(),t=e.state,n=t.renderInline,r=t.challengeId,a=t.resources,i=t.requestService,o=t.metricsService,l=t.eventService,u=e.dispatch,c=(0,re.useState)(Do.INITIAL),s=c[0],d=c[1],p="ChallengeId",f=(0,re.useCallback)((function(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){switch(n.label){case 0:return s!==Do.INITIAL?[2]:(e=Nn.localStorageService.getLocalStorage(p),r===e?[2]:(Nn.localStorageService.setLocalStorage(p,r),[4,i.privateAccessToken.getPatToken(r)]));case 1:if((t=n.sent()).isError){if(t.errorStatusCode===oe.httpResponseCodes.unauthorized)return d(Do.COMPLETED_SUCCESS),u({type:Oo.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:""}}),l.sendChallengeCompletedEvent(!1),o.fireChallengeCompletedEvent(),[2];d(Do.COMPLETED_ERROR),u({type:Oo.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:(t.error,Io.UNKNOWN),errorMessage:a.Description.VerificationError}})}else d(Do.COMPLETED_SUCCESS),l.sendChallengeCompletedEvent(!0),o.fireChallengeCompletedEvent(),u({type:Oo.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:t.value.redemptionToken}});return[2]}}))}))}),[a,u,i.privateAccessToken,s,o,l,r]);return(0,re.useEffect)((function(){f()}),[]),n?ae().createElement(Na,{titleText:a.Description.VerifyingYouAreNotBot},ae().createElement(Aa,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin"}))):ae().createElement(_a.Modal,{className:"modal-modern",backdrop:"static"},ae().createElement(_a.Modal.Body,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin"})))}var Bo,qo=(0,ga.withTranslations)((function(e){var t=e.challengeId,n=e.renderInline,r=e.eventService,a=e.metricsService,i=e.requestService,o=e.translate,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return ae().createElement(Fo,{challengeId:t,renderInline:n,eventService:r,metricsService:a,requestService:i,translate:o,onChallengeDisplayed:l,onChallengeCompleted:u,onChallengeInvalidated:c,onModalChallengeAbandoned:s},ae().createElement(zo,null))}),{common:["CommonUI.Messages"],feature:"Feature.PrivateAccessTokenChallenge"}),Zo=function(){function e(e){this.challengeId=e}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(ko,"challengeInitialized",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(e){W().EventStream.SendEventWithTarget(ko,"challengeCompleted",{challengeId:this.challengeId,supportPAT:e},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(){W().EventStream.SendEventWithTarget(ko,"challengeInvalidated",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(){W().EventStream.SendEventWithTarget(ko,"challengeAbandoned",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e}(),jo=function(){function e(e,t){this.appType=e||"unknown",this.requestServiceDefault=t,this.eventTimer=new Za,this.challengeSolveTimeSequenceName="PrivateAccessToken_ChallengeSolveTime"}return e.prototype.fireChallengeInitializedEvent=function(){this.fireEvent("ChallengeInitialized"),this.eventTimer.start(this.challengeSolveTimeSequenceName)},e.prototype.fireChallengeCompletedEvent=function(){this.fireEvent(xo),this.fireSolveTimeEvent(xo)},e.prototype.fireChallengeInvalidatedEvent=function(){this.fireEvent(Vo),this.fireSolveTimeEvent(Vo)},e.prototype.fireChallengeAbandonedEvent=function(){this.fireEvent(Ho),this.fireSolveTimeEvent(Ho)},e.prototype.fireEvent=function(e){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventPat,value:1,labelValues:{event_type:"PrivateAccessToken_"+e,application_type:this.appType}}).catch((function(){}))},e.prototype.fireSolveTimeEvent=function(e){var t=this.eventTimer.end(this.challengeSolveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimePat,value:t,labelValues:{event_type:"PrivateAccessToken_"+e,application_type:this.appType}}).catch((function(){}))},e}(),Yo=new ma;function Ko(e){var t=e.containerId,n=e.challengeId,r=e.appType,a=e.renderInline,i=e.onChallengeDisplayed,o=e.onChallengeCompleted,l=e.onChallengeInvalidated,u=e.onModalChallengeAbandoned,c=document.getElementById(t);if(null!==c){(0,ie.unmountComponentAtNode)(c);var s=new Zo(n),d=new jo(r,Yo);return(0,ie.render)(ae().createElement(qo,{challengeId:n,renderInline:a,eventService:s,metricsService:d,requestService:Yo,onChallengeDisplayed:i,onChallengeCompleted:o,onChallengeInvalidated:l,onModalChallengeAbandoned:u}),c),s.sendChallengeInitializedEvent(),d.fireChallengeInitializedEvent(),!0}return!1}var Jo,Xo,Qo,$o="Proof-of-Space:",el="accountSecurityChallengeProofOfSpaceEvent",tl="PuzzleCompleted",nl="ChallengeCompleted",rl="ChallengeInvalidated",al="ChallengeAbandoned",il="ChallengeTimeout",ol=function(){function e(e,t,n){this.blocks=[],this.length=e,this.blockSize=Math.pow(2,Math.floor(Math.log2(t))),this.blockIndexShift=Math.log2(this.blockSize)>>>0,this.blockOffsetMask=this.blockSize-1>>>0,this.head=0,n||this.allocate(this.length)}return e.prototype.allocate=function(e){for(var t=0;t<Math.ceil(e/this.blockSize);t++)this.blocks.push(new Uint32Array(this.blockSize))},e.prototype.destructor=function(){this.blocks=[]},e.prototype.push=function(e){this.blocks[this.head>>>this.blockIndexShift][this.head&this.blockOffsetMask]=e,this.head+=1},e.prototype.concat=function(e){for(var t=0;t<e.blocks.length;t++)this.blocks.push(e.blocks[t]),this.head+=this.blockSize},e.prototype.get=function(e){return this.blocks[e>>>this.blockIndexShift][e&this.blockOffsetMask]},e.prototype.getHead=function(){return this.head},e}(),ll=function(){function e(e){this.seed=parseInt(e,10)}return e.prototype.hash=function(e){for(var t=this.seed,n=0;n<e.length;n++){var r=e[n];r=(r=Math.imul(r,3432918353))<<15|r>>>17,t=(t^=r=Math.imul(r>>>0,461845907)>>>0)<<13|t>>>19,t=3864292196+(Math.imul(t>>>0,5)>>>0)>>>0}return t^=4*e.length,t^=t>>>16,t=Math.imul(t,2246822507),t^=t>>>13,t=Math.imul(t,3266489909),(t^=t>>>16)>>>0},e.prototype.hashOneValue=function(e){var t=this.seed,n=e;return n=(n=Math.imul(n,3432918353))<<15|n>>>17,t=(t^=n=Math.imul(n>>>0,461845907)>>>0)<<13|t>>>19,t=3864292196+(Math.imul(t>>>0,5)>>>0)>>>0,t^=4,t^=t>>>16,t=Math.imul(t,2246822507),t^=t>>>13,t=Math.imul(t,3266489909),(t^=t>>>16)>>>0},e.prototype.hashTwoValues=function(e,t){var n=this.seed,r=e;return r=(r=Math.imul(r,3432918353))<<15|r>>>17,n=(n^=r=Math.imul(r>>>0,461845907)>>>0)<<13|n>>>19,n=3864292196+(Math.imul(n>>>0,5)>>>0)>>>0,r=t,r=(r=Math.imul(r,3432918353))<<15|r>>>17,n=(n^=r=Math.imul(r>>>0,461845907)>>>0)<<13|n>>>19,n=3864292196+(Math.imul(n>>>0,5)>>>0)>>>0,n^=8,n^=n>>>16,n=Math.imul(n,2246822507),n^=n>>>13,n=Math.imul(n,3266489909),(n^=n>>>16)>>>0},e.prototype.hashThreeValues=function(e,t,n){var r=this.seed,a=e;return a=(a=Math.imul(a,3432918353))<<15|a>>>17,r=(r^=a=Math.imul(a>>>0,461845907)>>>0)<<13|r>>>19,r=3864292196+(Math.imul(r>>>0,5)>>>0)>>>0,a=t,a=(a=Math.imul(a,3432918353))<<15|a>>>17,r=(r^=a=Math.imul(a>>>0,461845907)>>>0)<<13|r>>>19,r=3864292196+(Math.imul(r>>>0,5)>>>0)>>>0,a=n,a=(a=Math.imul(a,3432918353))<<15|a>>>17,r=(r^=a=Math.imul(a>>>0,461845907)>>>0)<<13|r>>>19,r=3864292196+(Math.imul(r>>>0,5)>>>0)>>>0,r^=12,r^=r>>>16,r=Math.imul(r,2246822507),r^=r>>>13,r=Math.imul(r,3266489909),(r^=r>>>16)>>>0},e}(),ul=Math.pow(2,18);!function(e){e[e.INIT_GRAPH=0]="INIT_GRAPH",e[e.PEBBLE_GRAPH=1]="PEBBLE_GRAPH",e[e.CREATE_MERKLE_TREE=2]="CREATE_MERKLE_TREE",e[e.GENERATE_SOLUTION=3]="GENERATE_SOLUTION"}(Ro||={});var cl,sl,dl=function(){function e(e){this.layers=e.layers,this.rounds=e.rounds,this.hasher=new ll(e.seed),this.merkleLayers=Math.pow(2,Math.floor(Math.log2(this.layers))),this.blockSize=Math.pow(2,Math.min(this.layers,17)),this.layerSize=Math.pow(2,this.layers),this.prevLayer=new ol(this.layerSize,this.blockSize,!0),this.curLayer=new ol(this.layerSize,this.blockSize,!0),this.merkleTree=new ol(2*this.merkleLayers*this.layerSize-1,this.blockSize,!0),this.step=Ro.INIT_GRAPH,this.pebblingLayer=0,this.totalComputedNodes=(this.layers+this.merkleLayers+1)*this.layerSize-1,this.isCancelled=!1}return e.prototype.initPebbling=function(e){0===this.curLayer.getHead()&&this.curLayer.allocate(this.layerSize);for(var t=0;t<e&&this.curLayer.getHead()<this.layerSize;++t)this.curLayer.push(this.hasher.hashOneValue(this.curLayer.getHead()));this.curLayer.getHead()===this.layerSize&&(this.pebblingLayer+=1,this.prevLayer=this.curLayer,this.curLayer=new ol(this.layerSize,this.blockSize),this.step=Ro.PEBBLE_GRAPH)},e.prototype.pebble=function(e){for(var t=0;t<e&&this.curLayer.getHead()<this.layerSize;++t){var n=this.curLayer.getHead()|1<<this.layers-this.pebblingLayer,r=this.curLayer.getHead()&~(1<<this.layers-this.pebblingLayer);this.curLayer.push(this.hasher.hashThreeValues(this.curLayer.getHead()+this.pebblingLayer*this.layerSize,this.prevLayer.get(n),this.prevLayer.get(r)))}this.curLayer.getHead()===this.layerSize&&(this.layers-this.pebblingLayer<this.merkleLayers&&this.merkleTree.concat(this.curLayer),this.pebblingLayer+=1,this.prevLayer=this.curLayer,this.curLayer=new ol(this.layerSize,this.blockSize)),this.pebblingLayer===this.layers+1&&(this.prevLayer.destructor(),this.curLayer.destructor(),this.step=Ro.CREATE_MERKLE_TREE,this.merkleTree.allocate(this.merkleLayers*this.layerSize-1))},e.prototype.createMerkleTree=function(e){for(var t=2*(this.merkleTree.getHead()-Math.ceil(this.merkleTree.length/2)),n=0;n<e&&this.merkleTree.getHead()<this.merkleTree.length;n++)this.merkleTree.push(this.hasher.hashTwoValues(this.merkleTree.get(t),this.merkleTree.get(t+1))),t+=2;this.merkleTree.getHead()===this.merkleTree.length&&(this.step=Ro.GENERATE_SOLUTION)},e.prototype.dispatch=function(e){try{switch(this.step){case Ro.INIT_GRAPH:this.initPebbling(e);break;case Ro.PEBBLE_GRAPH:this.pebble(e);break;case Ro.CREATE_MERKLE_TREE:this.createMerkleTree(e)}}catch(e){return e instanceof Error?e.message:String(e)}return null},e.prototype.run=function(e,t,n){for(var r=Math.ceil(this.totalComputedNodes/1e3);!this.isDone();){var a=this.dispatch(r);if(null!==a)return void n(a);e(this.progress())}t(this.answer()),this.merkleTree.destructor()},e.prototype.runAsync=function(e,t,n,r){var a=this;setTimeout((function i(){var o=a.dispatch(r||ul);null===o?(e(a.progress()),a.isCancelled||(a.isDone()?t(a.answer()):setTimeout(i,0))):n(o)}),0),this.merkleTree.destructor()},e.prototype.cancelRunAsync=function(){this.isCancelled=!0},e.prototype.generateChallenge=function(e){var t=this.hasher.hashOneValue(e),n=(this.layers-this.merkleLayers+1+1)*this.layerSize;return t%((this.merkleLayers-1)*this.layerSize)+n},e.prototype.open=function(e){var t=[],n=e-(this.layers-this.merkleLayers+1)*this.layerSize;t.push(this.merkleTree.get(n));for(var r=0;r<this.layers+Math.log2(this.merkleLayers);r++)n=n%2==0?n+1:n-1,t.push(this.merkleTree.get(n)),n=this.merkleTree.length-Math.floor((this.merkleTree.length-n)/2);return t},e.prototype.answer=function(){if(!this.isDone())return null;for(var e=[],t=this.merkleTree.get(this.merkleTree.length-1),n=this.generateChallenge(t),r=0;r<this.rounds;r++){var a=this.open(n),i=n>>>this.layers,o=(n|1<<this.layers-i)-this.layerSize,l=(n&~(1<<this.layers-i))-this.layerSize;a=(a=a.concat(this.open(o))).concat(this.open(l)),e.push(a.map((function(e){return e.toString()}))),n=this.generateChallenge(n)}return{commitment:t.toString(),solutions:e}},e.prototype.progress=function(){return(this.pebblingLayer*this.layerSize+this.curLayer.getHead()+Math.max(this.merkleTree.getHead()-this.merkleLayers*this.layerSize,0))/this.totalComputedNodes},e.prototype.isDone=function(){return this.step===Ro.GENERATE_SOLUTION},e}();!function(e){e[e.TIME_LOCK_PUZZLE=0]="TIME_LOCK_PUZZLE",e[e.GRAPH_PEBBLING_PUZZLE=1]="GRAPH_PEBBLING_PUZZLE"}(Bo||={});var pl=1e4;function fl(e){return e===St.INVALID_SESSION?Xo.SESSION_INVALID:Xo.UNKNOWN}function hl(){return(hl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function vl(e,t){var n=hl({},e);switch(t.type){case cl.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n;case cl.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n;case cl.SET_CHALLENGE_ABANDONED:return n.isAbandoned=!0,n;case cl.SET_CHALLENGE_TIMEOUT:return n.progressWhenTimedOut=t.progress,n;case cl.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case cl.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e[e.INITIAL=0]="INITIAL",e[e.READY_TO_COMPUTE=1]="READY_TO_COMPUTE",e[e.COMPUTING=2]="COMPUTING",e[e.COMPUTING_DONE=3]="COMPUTING_DONE",e[e.VERIFIED_CORRECT=4]="VERIFIED_CORRECT",e[e.VERIFIED_INCORRECT=5]="VERIFIED_INCORRECT"}(Jo||={}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_INVALID=1]="SESSION_INVALID",e[e.ANSWER_INVALID=2]="ANSWER_INVALID",e[e.WORKER_LOAD_ERROR=3]="WORKER_LOAD_ERROR",e[e.TIMEOUT=4]="TIMEOUT"}(Xo||={}),function(e){e.INVALID="PROOF_OF_SPACE_PUZZLE_TYPE_INVALID",e.NONINTERACTIVE="PROOF_OF_SPACE_PUZZLE_TYPE_NONINTERACTIVE",e.INTERACTIVE="PROOF_OF_SPACE_PUZZLE_TYPE_INTERACTIVE"}(Qo||={}),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.SET_CHALLENGE_ABANDONED=2]="SET_CHALLENGE_ABANDONED",e[e.SET_CHALLENGE_TIMEOUT=3]="SET_CHALLENGE_TIMEOUT",e[e.HIDE_MODAL_CHALLENGE=4]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=5]="SHOW_MODAL_CHALLENGE"}(cl||={});var ml=(0,re.createContext)(null);function yl(e){var t=e.challengeId,n=e.renderInline,r=e.artifacts,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=e.children,f=(0,re.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")}}}(l)}))[0],h=(0,re.useState)((function(){return{challengeId:t,renderInline:n,artifacts:r,resources:f,eventService:a,metricsService:i,requestService:o,onChallengeDisplayed:u,onModalChallengeAbandoned:d,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1,isAbandoned:!1,progressWhenTimedOut:null}}))[0],v=(0,re.useReducer)(vl,h),m=v[0],y=v[1];return(0,re.useEffect)((function(){null===m.onChallengeCompletedData||null!==m.onChallengeInvalidatedData||m.isAbandoned||null!==m.progressWhenTimedOut||(a.sendChallengeCompletedEvent(),i.fireChallengeCompletedEvent(),c(m.onChallengeCompletedData))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,m.isAbandoned,m.progressWhenTimedOut,c]),(0,re.useEffect)((function(){null!==m.onChallengeCompletedData||null===m.onChallengeInvalidatedData||m.isAbandoned||null!==m.progressWhenTimedOut||(a.sendChallengeInvalidatedEvent(),i.fireChallengeInvalidatedEvent(),s(m.onChallengeInvalidatedData))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,m.isAbandoned,m.progressWhenTimedOut,s]),(0,re.useEffect)((function(){null===m.onChallengeCompletedData&&null===m.onChallengeInvalidatedData&&m.isAbandoned&&null===m.progressWhenTimedOut&&(a.sendChallengeAbandonedEvent(),i.fireChallengeAbandonedEvent(),null!==d&&d((function(){return y({type:cl.SHOW_MODAL_CHALLENGE})})))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,m.isAbandoned,m.progressWhenTimedOut,d]),(0,re.useEffect)((function(){null!==m.onChallengeCompletedData||null!==m.onChallengeInvalidatedData||m.isAbandoned||null===m.progressWhenTimedOut||(a.sendChallengeTimeoutEvent(m.progressWhenTimedOut),i.fireChallengeTimeoutEvent(),c({redemptionToken:""}))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,m.isAbandoned,m.progressWhenTimedOut,c]),ae().createElement(ml.Provider,{value:{state:m,dispatch:y}},p)}var El=location.origin+"/worker-resources/script/?component=ChallengeWebWorkers";function gl(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Cl(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function bl(e){return e.toFixed(0)+"%"}function Tl(){var e=function(){var e=(0,re.useContext)(ml);if(null===e)throw new Error("ProofOfSpaceContext was not provided in the current scope");return e}(),t=e.state,n=t.challengeId,r=t.artifacts,a=t.renderInline,i=t.resources,o=t.eventService,l=t.metricsService,u=t.requestService,c=t.onChallengeDisplayed,s=t.isModalVisible,d=e.dispatch,p=(0,re.useState)(null),f=p[0],h=p[1],v=(0,re.useState)(Jo.INITIAL),m=v[0],y=v[1],E=(0,re.useState)(0),g=E[0],C=E[1],b=(0,re.useRef)(null),T=(0,re.useRef)(null),I=(0,re.useRef)(null),S=(0,re.useRef)(0),_=(0,re.useRef)(0),N=(0,re.useCallback)((function(){I.current=setTimeout((function(){d({type:cl.SHOW_MODAL_CHALLENGE}),c({displayed:!0})}),1e3)}),[d,c]);function A(){b.current&&(b.current.terminate(),b.current=null),T.current&&(T.current.cancelRunAsync(),T.current=null),h(null),y(Jo.INITIAL)}function L(){return d({type:cl.HIDE_MODAL_CHALLENGE})}function w(){d({type:cl.SET_CHALLENGE_ABANDONED}),A(),L()}function D(){d({type:cl.SET_CHALLENGE_TIMEOUT,progress:S.current}),A(),L()}function O(){1!==S.current&&(S.current<_.current+.33?D():(_.current=S.current,setTimeout(O,pl)))}function R(){var e=a?Aa:_a.Modal.Body,t=100*(g||0);return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("div",{className:"computation-progress-body"},ae().createElement(_a.ProgressBar,{now:t,label:bl(t),striped:!0}))))}return(0,re.useEffect)((function(){return function(){A();try{b.current=new Worker(El)}catch(e){b.current=null}y(Jo.READY_TO_COMPUTE)}(),A}),[]),(0,re.useEffect)((function(){gl(void 0,void 0,void 0,(function(){return Cl(this,(function(e){switch(e.label){case 0:switch(m){case Jo.READY_TO_COMPUTE:return[3,1];case Jo.COMPUTING_DONE:return[3,2]}return[3,4];case 1:return o.sendPuzzleInitializedEvent(),l.firePuzzleInitializedEvent(),N(),function(){if(m!==Jo.READY_TO_COMPUTE)return y(Jo.VERIFIED_INCORRECT),d({type:cl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:Xo.UNKNOWN,errorMessage:i.Description.VerificationError}}),void L();var e={seed:r.seed,layers:parseInt(r.layers,10),rounds:parseInt(r.rounds,10)};if(null==b.current)return T.current=new dl(e),y(Jo.COMPUTING),T.current.runAsync((function(e){C(e),S.current=e}),(function(e){h(e),y(Jo.COMPUTING_DONE)}),(function(e){console.error($o,"exception caught in fallback solver:",e),D()})),void setTimeout(O,pl);y(Jo.COMPUTING),b.current.onmessage=function(e){var t="object"==typeof e.data?e.data:JSON.parse(e.data);if(t.error)return console.error($o,"exception caught in worker:",t.error),void D();C(t.progress),S.current=t.progress,t.answer&&(h(t.answer),y(Jo.COMPUTING_DONE))},b.current.postMessage(JSON.stringify({solverType:Bo.GRAPH_PEBBLING_PUZZLE,solverParameters:e})),setTimeout(O,pl)}(),[3,5];case 2:return o.sendPuzzleCompletedEvent(),l.firePuzzleCompletedEvent(),clearTimeout(I.current||void 0),[4,gl(void 0,void 0,void 0,(function(){var e;return Cl(this,(function(t){switch(t.label){case 0:return null==f?[2]:[4,u.proofOfSpace.verifyPuzzle(n,f)];case 1:return(e=t.sent()).isError?(d({type:cl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:fl(e.error),errorMessage:i.Description.VerificationError}}),[2]):(e.value.redemptionToken?(y(Jo.VERIFIED_CORRECT),d({type:cl.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:e.value.redemptionToken}})):(y(Jo.VERIFIED_INCORRECT),d({type:cl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:Xo.ANSWER_INVALID,errorMessage:i.Description.VerificationError}})),[2])}}))}))];case 3:return e.sent(),A(),L(),[3,5];case 4:return[3,5];case 5:return[2]}}))}))}),[m]),a?ae().createElement(Na,{titleText:i.Description.VerifyingYouAreNotBot},R()):ae().createElement(_a.Modal,{className:"modal-modern modal-modern-challenge-computation-progress",show:s,onHide:w,backdrop:"static"},ae().createElement($a,{headerText:i.Description.VerifyingYouAreNotBot,buttonType:Ea.CLOSE,buttonAction:w,buttonEnabled:!0,headerInfo:null}),R())}var Il,Sl,_l,Nl,Al=(0,ga.withTranslations)((function(e){var t=e.challengeId,n=e.renderInline,r=e.artifacts,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned;return ae().createElement(yl,{challengeId:t,renderInline:n,artifacts:r,eventService:a,metricsService:i,requestService:o,translate:l,onChallengeDisplayed:u,onChallengeCompleted:c,onChallengeInvalidated:s,onModalChallengeAbandoned:d},ae().createElement(Tl,null))}),{common:["CommonUI.Messages"],feature:"Feature.ProofOfSpaceChallenge"}),Ll=function(){function e(e){this.challengeId=e,this.startTime=null}return e.prototype.sendChallengeInitializedEvent=function(){this.startTime=Date.now(),W().EventStream.SendEventWithTarget(el,"challengeInitialized",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleInitializedEvent=function(){W().EventStream.SendEventWithTarget(el,"puzzleInitialized",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleCompletedEvent=function(){W().EventStream.SendEventWithTarget(el,"puzzleCompleted",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(){W().EventStream.SendEventWithTarget(el,"challengeCompleted",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(){W().EventStream.SendEventWithTarget(el,"challengeInvalidated",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(){W().EventStream.SendEventWithTarget(el,"challengeAbandoned",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeTimeoutEvent=function(e){W().EventStream.SendEventWithTarget(el,"challengeTimeout",{challengeId:this.challengeId,timeoutProgress:e,timeoutElapsedTime:null!==this.startTime?Date.now()-this.startTime:0},W().EventStream.TargetTypes.WWW)},e}(),wl=function(){function e(e,t){this.appType=e||"unknown",this.requestServiceDefault=t,this.eventTimer=new Za,this.challengeSolveTimeSequenceName="ProofOfSpace_ChallengeSolveTime",this.puzzleWorkingTimeSequenceName="ProofOfSpace_PuzzleWorkingTime"}return e.prototype.fireChallengeInitializedEvent=function(){this.fireEvent("ChallengeInitialized"),ja&&ja.start(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.eventTimer.start(this.challengeSolveTimeSequenceName)},e.prototype.firePuzzleInitializedEvent=function(){this.fireEvent("PuzzleInitialized"),ja&&ja.start(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType),this.eventTimer.start(this.puzzleWorkingTimeSequenceName)},e.prototype.firePuzzleCompletedEvent=function(){this.fireEvent(tl),ja&&ja.endSuccess(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType);var e=this.eventTimer.end(this.puzzleWorkingTimeSequenceName);null!==e&&this.requestServiceDefault.metrics.recordMetric({name:Pr.PuzzleComputeTimePos,value:e,labelValues:{event_type:"ProofOfSpace_"+tl,application_type:this.appType}}).catch((function(){}))},e.prototype.fireChallengeCompletedEvent=function(){this.fireEvent(nl),ja&&ja.endSuccess(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(nl)},e.prototype.fireChallengeInvalidatedEvent=function(){this.fireEvent(rl),ja&&ja.endFailure(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(rl)},e.prototype.fireChallengeAbandonedEvent=function(){this.fireEvent(al),ja&&ja.endCancel(this.challengeSolveTimeSequenceName,this.puzzleWorkingTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType,this.puzzleWorkingTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(al)},e.prototype.fireChallengeTimeoutEvent=function(){this.fireEvent(il),ja&&ja.endFailure(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(il)},e.prototype.fireEvent=function(e){if(ja){var t="ProofOfSpace_"+e;ja.fireEvent(t,t+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.EventPos,value:1,labelValues:{event_type:"ProofOfSpace_"+e,application_type:this.appType}}).catch((function(){}))},e.prototype.fireSolveTimeEvent=function(e){var t=this.eventTimer.end(this.challengeSolveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimePos,value:t,labelValues:{event_type:"ProofOfSpace_"+e,application_type:this.appType}}).catch((function(){}))},e}(),Dl=new ma;function Ol(e){var t=e.containerId,n=e.challengeId,r=e.artifacts,a=e.appType,i=e.renderInline,o=e.onChallengeDisplayed,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,c=e.onModalChallengeAbandoned,s=document.getElementById(t);if(null!==s){(0,ie.unmountComponentAtNode)(s);var d=new Ll(n),p=new wl(a,Dl);return(0,ie.render)(ae().createElement(Al,{challengeId:n,renderInline:i,artifacts:r,eventService:d,metricsService:p,requestService:Dl,onChallengeDisplayed:o,onChallengeCompleted:l,onChallengeInvalidated:u,onModalChallengeAbandoned:c}),s),d.sendChallengeInitializedEvent(),p.fireChallengeInitializedEvent(),!0}return!1}var Rl="accountSecurityChallengeProofOfWorkEvent",Pl="PuzzleCompleted",Ml="ChallengeCompleted",kl="ChallengeInvalidated",xl="ChallengeAbandoned",Vl=n(135),Hl=n.n(Vl),Wl=function(){function e(e){this.n=Hl()(e.N),this.a=Hl()(e.A),this.t=e.T,this.curBase=this.a,this.curT=0,this.isCancelled=!1}return e.prototype.run=function(e,t){for(var n=Math.max(1,this.t/1e3);!this.isDone();)this.doRepeatedSquaring(n),e(this.progress());t(this.answer())},e.prototype.runAsync=function(e,t,n){var r=this;setTimeout((function a(){r.doRepeatedSquaring(n||200),e(r.progress()),r.isCancelled||(r.isDone()?t(r.answer()):setTimeout(a,0))}),0)},e.prototype.cancelRunAsync=function(){this.isCancelled=!0},e.prototype.doRepeatedSquaring=function(e){for(var t=void 0!==e?Math.min(this.t,this.curT+e):this.t;this.curT<t;this.curT+=1)this.curBase=this.curBase.square().mod(this.n)},e.prototype.answer=function(){return this.isDone()?this.curBase.toString():null},e.prototype.progress=function(){return this.curT/this.t},e.prototype.isDone=function(){return this.curT===this.t},e}();function Ul(e){return e===At.SESSION_INACTIVE?sl.SESSION_INVALID:sl.UNKNOWN}function Gl(){return(Gl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function Fl(e,t){var n=Gl({},e);switch(t.type){case Sl.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Sl.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n.isModalVisible=!1,n;case Sl.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Sl.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_INVALID=1]="SESSION_INVALID",e[e.ANSWER_INVALID=2]="ANSWER_INVALID",e[e.WORKER_LOAD_ERROR=3]="WORKER_LOAD_ERROR"}(sl||={}),function(e){e[e.INITIAL=0]="INITIAL",e[e.READY_TO_COMPUTE=1]="READY_TO_COMPUTE",e[e.COMPUTING=2]="COMPUTING",e[e.COMPUTING_DONE=3]="COMPUTING_DONE",e[e.VERIFIED_CORRECT=4]="VERIFIED_CORRECT",e[e.VERIFIED_INCORRECT=5]="VERIFIED_INCORRECT"}(Il||={}),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(Sl||={});var zl=(0,re.createContext)(null);function Bl(e){var t=e.sessionId,n=e.renderInline,r=e.eventService,a=e.metricsService,i=e.requestService,o=e.translate,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,d=e.children,p=(0,re.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")}}}(o)}))[0],f=(0,re.useState)((function(){return{sessionId:t,renderInline:n,resources:p,eventService:r,metricsService:a,requestService:i,onChallengeDisplayed:l,onModalChallengeAbandoned:s,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1}}))[0],h=(0,re.useReducer)(Fl,f),v=h[0],m=h[1];return(0,re.useEffect)((function(){null!==v.onChallengeCompletedData&&null===v.onChallengeInvalidatedData&&(r.sendChallengeCompletedEvent(),a.fireChallengeCompletedEvent(),u(v.onChallengeCompletedData))}),[r,a,v.onChallengeCompletedData,v.onChallengeInvalidatedData,u]),(0,re.useEffect)((function(){null!==v.onChallengeInvalidatedData&&null===v.onChallengeCompletedData&&(r.sendChallengeInvalidatedEvent(),a.fireChallengeInvalidatedEvent(),c(v.onChallengeInvalidatedData))}),[r,a,v.onChallengeCompletedData,v.onChallengeInvalidatedData,c]),ae().createElement(zl.Provider,{value:{state:v,dispatch:m}},d)}var ql=(H.EnvironmentUrls.websiteUrl??"URL_NOT_FOUND")+"/worker-resources/script/?component=ChallengeWebWorkers";function Zl(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function jl(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Yl(e){return e.toFixed(0)+"%"}function Kl(){var e=function(){var e=(0,re.useContext)(zl);if(null===e)throw new Error("ProofOfWorkContext was not provided in the current scope");return e}(),t=e.state,n=t.sessionId,r=t.renderInline,a=t.resources,i=t.eventService,o=t.metricsService,l=t.requestService,u=t.onChallengeDisplayed,c=t.onModalChallengeAbandoned,s=t.isModalVisible,d=e.dispatch,p=(0,re.useState)(null),f=p[0],h=p[1],v=(0,re.useState)(null),m=v[0],y=v[1],E=(0,re.useState)(Il.INITIAL),g=E[0],C=E[1],b=(0,re.useState)(0),T=b[0],I=b[1],S=(0,re.useRef)(null),_=(0,re.useRef)(null),N=(0,re.useRef)(null),A=(0,re.useCallback)((function(){N.current=setTimeout((function(){d({type:Sl.SHOW_MODAL_CHALLENGE}),u({displayed:!0})}),5e3)}),[d,u]);function L(){h(null),y(null),C(Il.INITIAL)}function w(){d({type:Sl.HIDE_MODAL_CHALLENGE}),S.current&&S.current.terminate(),_.current&&_.current.cancelRunAsync(),L(),null!==c&&c((function(){return d({type:Sl.SHOW_MODAL_CHALLENGE})}))}function D(){var e=r?Aa:_a.Modal.Body,t=100*(T||0);return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("div",{className:"computation-progress-body"},ae().createElement(_a.ProgressBar,{now:t,label:Yl(t),striped:!0}))))}return(0,re.useEffect)((function(){return Zl(void 0,void 0,void 0,(function(){var e;return jl(this,(function(t){switch(t.label){case 0:L();try{S.current=new Worker(ql)}catch(e){S.current=null}return[4,l.proofOfWork.getPuzzle(n)];case 1:return(e=t.sent()).isError?(d({type:Sl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:sl.UNKNOWN,errorMessage:a.Description.VerificationError}}),[2]):(h(e.value.artifacts),C(Il.READY_TO_COMPUTE),[2])}}))})),function(){S.current&&(S.current.terminate(),S.current=null),_.current&&(_.current.cancelRunAsync(),_.current=null),L()}}),[]),(0,re.useEffect)((function(){Zl(void 0,void 0,void 0,(function(){return jl(this,(function(e){switch(e.label){case 0:switch(g){case Il.READY_TO_COMPUTE:return[3,1];case Il.COMPUTING_DONE:return[3,2]}return[3,4];case 1:return i.sendPuzzleInitializedEvent(),o.firePuzzleInitializedEvent(),A(),function(){if(null==f||g!==Il.READY_TO_COMPUTE)return C(Il.VERIFIED_INCORRECT),void d({type:Sl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:sl.UNKNOWN,errorMessage:a.Description.VerificationError}});var e=JSON.parse(f);if(null==S.current)return _.current=new Wl(e),C(Il.COMPUTING),void _.current.runAsync((function(e){I(e)}),(function(e){y(e),C(Il.COMPUTING_DONE)}));C(Il.COMPUTING),S.current.onmessage=function(e){var t="object"==typeof e.data?e.data:JSON.parse(e.data);I(t.progress),t.answer&&(y(t.answer),C(Il.COMPUTING_DONE))},S.current.postMessage(JSON.stringify({solverType:Bo.TIME_LOCK_PUZZLE,solverParameters:e}))}(),[3,5];case 2:return i.sendPuzzleCompletedEvent(),o.firePuzzleCompletedEvent(),clearTimeout(N.current||void 0),[4,Zl(void 0,void 0,void 0,(function(){var e;return jl(this,(function(t){switch(t.label){case 0:return null==m?[2]:[4,l.proofOfWork.verifyPuzzle(n,m)];case 1:return(e=t.sent()).isError?(d({type:Sl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:Ul(e.error),errorMessage:a.Description.VerificationError}}),[2]):(e.value.answerCorrect?(C(Il.VERIFIED_CORRECT),d({type:Sl.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:e.value.redemptionToken}})):(C(Il.VERIFIED_INCORRECT),d({type:Sl.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:sl.ANSWER_INVALID,errorMessage:a.Description.VerificationError}})),[2])}}))}))];case 3:return e.sent(),[3,5];case 4:return[3,5];case 5:return[2]}}))}))}),[g]),r?ae().createElement(Na,{titleText:a.Description.VerifyingYouAreNotBot},D()):ae().createElement(_a.Modal,{className:"modal-modern modal-modern-challenge-computation-progress",show:s,onHide:w,backdrop:"static"},ae().createElement($a,{headerText:a.Description.VerifyingYouAreNotBot,buttonType:Ea.CLOSE,buttonAction:w,buttonEnabled:!0,headerInfo:null}),D())}var Jl,Xl,Ql,$l=(0,ga.withTranslations)((function(e){var t=e.sessionId,n=e.renderInline,r=e.eventService,a=e.metricsService,i=e.requestService,o=e.translate,l=e.onChallengeDisplayed,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return ae().createElement(Bl,{sessionId:t,renderInline:n,eventService:r,metricsService:a,requestService:i,translate:o,onChallengeDisplayed:l,onChallengeCompleted:u,onChallengeInvalidated:c,onModalChallengeAbandoned:s},ae().createElement(Kl,null))}),{common:["CommonUI.Messages"],feature:"Feature.ProofOfWorkChallenge"}),eu=function(){function e(e){this.sessionId=e}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"challengeInitialized",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleInitializedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"puzzleInitialized",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleCompletedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"puzzleCompleted",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"challengeCompleted",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"challengeInvalidated",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(){W().EventStream.SendEventWithTarget(Rl,"challengeAbandoned",{sessionId:this.sessionId},W().EventStream.TargetTypes.WWW)},e}(),tu=function(){function e(e,t){this.appType=e||"unknown",this.requestServiceDefault=t,this.eventTimer=new Za,this.challengeSolveTimeSequenceName="ProofOfWork_ChallengeSolveTime",this.puzzleWorkingTimeSequenceName="ProofOfWork_PuzzleWorkingTime"}return e.prototype.fireChallengeInitializedEvent=function(){this.fireEvent("ChallengeInitialized"),ja&&ja.start(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.eventTimer.start(this.challengeSolveTimeSequenceName)},e.prototype.firePuzzleInitializedEvent=function(){this.fireEvent("PuzzleInitialized"),ja&&ja.start(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType),this.eventTimer.start(this.puzzleWorkingTimeSequenceName)},e.prototype.firePuzzleCompletedEvent=function(){this.fireEvent(Pl),ja&&ja.endSuccess(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType);var e=this.eventTimer.end(this.puzzleWorkingTimeSequenceName);null!==e&&this.requestServiceDefault.metrics.recordMetric({name:Pr.PuzzleComputeTimePow,value:e,labelValues:{event_type:"ProofOfWork_"+Pl,application_type:this.appType}}).catch((function(){}))},e.prototype.fireChallengeCompletedEvent=function(){this.fireEvent(Ml),ja&&ja.endSuccess(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(Ml)},e.prototype.fireChallengeInvalidatedEvent=function(){this.fireEvent(kl),ja&&ja.endFailure(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(kl)},e.prototype.fireChallengeAbandonedEvent=function(){this.fireEvent(xl),ja&&ja.endCancel(this.challengeSolveTimeSequenceName,this.puzzleWorkingTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType,this.puzzleWorkingTimeSequenceName+"_"+this.appType),this.fireSolveTimeEvent(xl)},e.prototype.fireEvent=function(e){if(ja){var t="ProofOfWork_"+e;ja.fireEvent(t,t+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.EventPow,value:1,labelValues:{event_type:"ProofOfWork_"+e,application_type:this.appType}}).catch((function(){}))},e.prototype.fireSolveTimeEvent=function(e){var t=this.eventTimer.end(this.challengeSolveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimePow,value:t,labelValues:{event_type:"ProofOfWork_"+e,application_type:this.appType}}).catch((function(){}))},e}(),nu=new ma;function ru(e){var t=e.containerId,n=e.sessionId,r=e.appType,a=e.renderInline,i=e.onChallengeDisplayed,o=e.onChallengeCompleted,l=e.onChallengeInvalidated,u=e.onModalChallengeAbandoned,c=document.getElementById(t);if(null!==c){(0,ie.unmountComponentAtNode)(c);var s=new eu(n),d=new tu(r,nu);return(0,ie.render)(ae().createElement($l,{sessionId:n,renderInline:a,eventService:s,metricsService:d,requestService:nu,onChallengeDisplayed:i,onChallengeCompleted:o,onChallengeInvalidated:l,onModalChallengeAbandoned:u}),c),s.sendChallengeInitializedEvent(),d.fireChallengeInitializedEvent(),!0}return!1}var au=ReactRouterDOM,iu="accountSecurityChallengeReauthenticationEvent",ou="Verified",lu="Invalidated",uu="Abandoned",cu=ReactRouter;function su(){var e=(0,cu.useLocation)(),t=(0,cu.matchPath)(e.pathname,{path:"/:activeReauthenticationType",exact:!0,strict:!1});return(null==t?void 0:t.params)?null==t?void 0:t.params.activeReauthenticationType:null}function du(e){return"/"+(e||"")}function pu(e,t){return t===_l.OTP_CODE_EXPIRED?e.Message.Error.OtpCodeExpired:e.Message.Error.Default}function fu(e,t){switch(t){case Mt.PASSWORD_INCORRECT:return e.Message.Error.PasswordIncorrect;case Mt.OTP_EMAIL_REDEEM_FAILURE:return e.Message.Error.OtpRedeemFailure;default:return e.Message.Error.Default}}function hu(e,t){switch(t){case xe.INVALID_CODE:return e.Message.Error.OtpCodeIncorrect;case xe.TOO_MANY_REQUESTS:return e.Message.Error.OtpCodeThrottled;default:return e.Message.Error.Default}}function vu(e){switch(e){case xe.CODE_EXPIRED:case xe.INVALID_SESSION_TOKEN:return _l.OTP_CODE_EXPIRED;default:return _l.UNKNOWN}}function mu(){return(mu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function yu(e,t){var n=mu({},e);switch(t.type){case Jl.SET_REAUTHENTICATION_TYPES:return n.defaultType=t.defaultType,n.availableTypes=t.availableTypes,n;case Jl.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Jl.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:pu(e.resources,t.errorCode)},n.isModalVisible=!1,n;case Jl.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Jl.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;case Jl.INITIALIZE_EMAIL_OTP_SESSION:return n.initialOtpSessionId=t.sessionId,n;default:return e}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.OTP_CODE_EXPIRED=1]="OTP_CODE_EXPIRED"}(_l||={}),function(e){e.Password="Password",e.OtpEmail="Otp_Email",e.Passkey="Passkey"}(Nl||={}),function(e){e[e.SET_REAUTHENTICATION_TYPES=0]="SET_REAUTHENTICATION_TYPES",e[e.SET_CHALLENGE_COMPLETED=1]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=2]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=3]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=4]="SHOW_MODAL_CHALLENGE",e[e.SET_CURRENT_REAUTHENTICATION_TYPE=5]="SET_CURRENT_REAUTHENTICATION_TYPE",e[e.INITIALIZE_EMAIL_OTP_SESSION=6]="INITIALIZE_EMAIL_OTP_SESSION"}(Jl||={});var Eu=(0,re.createContext)(null);function gu(e){var t=e.renderInline,n=e.requestService,r=e.metricsService,a=e.eventService,i=e.defaultType,o=e.availableTypes,l=e.defaultTypeMetadata,u=e.translate,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=e.children,f=(0,re.useState)((function(){return function(e){return{Action:{ForgotYourPassword:function(t,n){return e("Action.ForgotYourPassword",{linkStart:t,linkEnd:n})},PleaseTryAgain:e("Action.PleaseTryAgain"),Verify:e("Action.Verify"),CodeSent:e("Action.CodeSent"),ResendCode:e("Action.ResendCode"),ChangeVerificationMethod:e("Action.ChangeVerificationMethod"),TryAlternativeMethod:e("Action.TryAlternativeMethod")},Description:{EnterYourPassword:e("Description.EnterYourPassword"),EnterYourOtpCode:e("Description.EnterYourOtpCode",{lineBreak:"\n"})},Header:{PasskeyVerification:e("Header.PasskeyVerification"),PasswordVerification:e("Header.PasswordVerification"),OtpVerification:e("Header.OtpVerification"),VerificationMethodSelection:e("Header.VerificationMethodSelection")},Label:{Passkey:e("Label.Passkey"),PasskeyDirections:e("Label.PasskeyDirections"),Password:e("Label.Password"),OneTimeCode:e("Label.OneTimeCode"),VerifyWithPasskey:e("Label.VerifyWithPasskey"),YourPassword:e("Label.YourPassword"),YourOtpCode:e("Label.YourOtpCode"),ChooseVerificationMethod:e("Label.ChooseVerificationMethod")},Message:{Error:{Default:e("Message.Error.Default"),NoCredentialsFound:e("Message.Error.NoCredentialsFound"),PasswordIncorrect:e("Message.Error.PasswordIncorrect"),OtpCodeIncorrect:e("Message.Error.OtpCodeIncorrect"),OtpCodeExpired:e("Message.Error.OtpCodeExpired"),OtpRedeemFailure:e("Message.Error.OtpRedeemFailure"),OtpCodeThrottled:e("Message.Error.OtpCodeThrottled")}}}}(u)}))[0],h=(0,re.useState)((function(){return{renderInline:t,resources:f,requestService:n,metricsService:r,eventService:a,defaultType:i,availableTypes:o,defaultTypeMetadata:l,onModalChallengeAbandoned:d,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0,initialOtpSessionId:null}}))[0],v=(0,re.useReducer)(yu,h),m=v[0],y=v[1],E=su();return(0,re.useEffect)((function(){null!==m.onChallengeCompletedData&&null===m.onChallengeInvalidatedData&&(r.fireVerifiedEvent(E),a.sendChallengeCompletedEvent(E),c(m.onChallengeCompletedData))}),[E,r,a,m.onChallengeCompletedData,m.onChallengeInvalidatedData,c]),(0,re.useEffect)((function(){null!==m.onChallengeInvalidatedData&&null===m.onChallengeCompletedData&&(r.fireInvalidatedEvent(E),a.sendChallengeInvalidatedEvent(E),s(m.onChallengeInvalidatedData))}),[E,r,a,m.onChallengeCompletedData,m.onChallengeInvalidatedData,s]),(0,re.useEffect)((function(){a.sendReauthenticationTypeChangedEvent(E)}),[E,a]),ae().createElement(Eu.Provider,{value:{state:m,dispatch:y}},p)}function Cu(){var e=(0,re.useContext)(Eu);if(null===e)throw new Error("ReauthenticationContext was not provided in the current scope");return e}function bu(e){var t=e.requestInFlight,n=e.setRequestError,r=Cu().state,a=r.resources,i=r.renderInline,o=(0,cu.useHistory)(),l=i?"inline-challenge-body-button-link":"modal-body-button-link";return ae().createElement("p",null,ae().createElement("button",{type:"button",className:l+" small",onClick:function(){n(null),o.push(du(null))},disabled:t},a.Action.ChangeVerificationMethod))}function Tu(e){var t=e.requestInFlightState,n=e.requestErrorState,r=e.children,a=Cu(),i=a.state,o=i.renderInline,l=i.resources,u=i.requestService,c=i.defaultTypeMetadata,s=a.dispatch,d=t[0],p=t[1],f=n[0],h=n[1],v=o?Aa:_a.Modal.Body,m=o?"inline-challenge-lock-icon":"modal-lock-icon",y=o?"inline-challenge-margin-bottom":"modal-margin-bottom",E=o?"inline-challenge-action-button":"modal-action-button";E=(E=E.concat(" ","btn-cta-md")).concat(" ",y);var g=(o?"inline-margin-bottom-xlarge":"modal-margin-bottom-xlarge").concat(" ","text-error xsmall"),C=o?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm";return c&&ae().createElement(ae().Fragment,null,ae().createElement(v,null,ae().createElement("div",{className:m}),ae().createElement("p",{className:C},l.Label.VerifyWithPasskey),ae().createElement("p",{className:y},l.Label.PasskeyDirections),ae().createElement("button",{type:"button",className:E,"aria-label":l.Action.Verify,disabled:d,onClick:function(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,n,r,a,i;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(o){switch(o.label){case 0:return p(!0),h(null),null===c||void 0===c.passkeyAuthOptions||void 0===c.passkeySessionId?(h(l.Message.Error.Default+" "+l.Action.PleaseTryAgain),p(!1),[2]):(e=!H.DeviceMeta||!(0,H.DeviceMeta)().isInApp||!(0,H.DeviceMeta)().isAndroidApp,(t=e?Nn.fido2Util.convertPublicKeyParametersToStandardBase64(c.passkeyAuthOptions):JSON.parse(c.passkeyAuthOptions)).publicKey?(n="",H.DeviceMeta&&(0,H.DeviceMeta)().isInApp?(t.keyType="platform",[4,u.fido2.getNativeResponse(Nn.hybridResponseService.FeatureTarget.GET_CREDENTIALS,{authenticationOptionsJSON:JSON.stringify(t)},3e5)]):[3,2]):(h(l.Message.Error.Default+" "+l.Action.PleaseTryAgain),p(!1),[2]));case 1:return(r=o.sent()).isError?(h(function(e,t){switch(t){case Xr.UNKNOWN:return e.Message.Error.Default+" "+e.Action.PleaseTryAgain;case Xr.NO_CREDENTIALS_FOUND:return e.Message.Error.NoCredentialsFound;default:return e.Message.Error.Default+" "+e.Action.PleaseTryAgain}}(l,r.error)),p(!1),[2]):null===r.value?(h(l.Message.Error.Default+" "+l.Action.PleaseTryAgain),p(!1),[2]):(n=r.value,[3,4]);case 2:return[4,u.fido2.getNavigatorCredentials({publicKey:Nn.fido2Util.formatCredentialRequestWeb(JSON.stringify(t))})];case 3:if((a=o.sent()).isError||null==a.value)return h(l.Message.Error.Default+" "+l.Action.PleaseTryAgain),p(!1),[2];n=a.value,o.label=4;case 4:return[4,u.reauthentication.generateToken({password:n,sessionId:c.passkeySessionId,type:Nl.Passkey})];case 5:return(i=o.sent()).isError?(h(fu(l,i.error)+" "+l.Action.PleaseTryAgain),p(!1),[2]):(h(null),s({type:Jl.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{reauthenticationToken:i.value.token}}),[2])}}))}))}},d?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):l.Action.Verify),r,ae().createElement("p",{className:g},f)))}function Iu(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Su(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function _u(e,t){return function(n){return Iu(void 0,void 0,Promise,(function(){return Su(this,(function(r){switch(r.label){case 0:return"Enter"===n.key&&t?(n.preventDefault(),n.stopPropagation(),[4,e()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}}function Nu(){return Promise.resolve(null)}function Au(e,t,n,r,a,i){return function(o){return Iu(void 0,void 0,Promise,(function(){var l,u;return Su(this,(function(c){switch(c.label){case 0:return l=o.currentTarget.value,void 0===t||t.test(l)||(l=e),void 0!==i&&i(l),r(l),u=a,[4,n(l)];case 1:return u.apply(void 0,[c.sent()]),[2]}}))}))}}function Lu(e){var t=e.id,n=e.inputType,r=e.placeholder,a=e.disabled,i=e.value,o=e.error,l=e.canSubmit,u=e.validate,c=e.setValue,s=e.setError,d=e.handleSubmit,p=e.onChange,f=e.label,h=e.bottomLabel,v=e.inputMode,m=e.autoComplete,y=e.maxLength,E=e.validCharactersRegEx,g=e.hideFeedback,C=e.concealInput,b=e.autoFocus,T=""!==i&&null===o,I=""!==i&&null!==o,S=T||I;return ae().createElement("div",{className:"input-control-wrapper"},f&&ae().createElement("label",{className:"text-label xsmall",htmlFor:t},f),ae().createElement(_a.FormGroup,{controlId:t,className:(S?"form-has-feedback":"")+" "+(T?"form-has-success":"")+" "+(I?"form-has-error":"")},ae().createElement(_a.FormControl,{as:"input",className:"input-field"+(C&&i.length>0?" input-field-concealed":""),type:n,inputMode:v,autoComplete:m,maxLength:y,disabled:a,value:i,placeholder:r,onChange:Au(i,E,u,c,s,p),onKeyDown:_u(d,l),autoFocus:b}),!a&&!g&&T&&ae().createElement("span",{className:"icon-checkmark-on"}),!a&&!g&&I&&ae().createElement("span",{className:"icon-close"}),ae().createElement("div",{className:"form-control-label bottom-label xsmall"},!a&&I?o:h||"")))}function wu(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Du(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Ou(e){var t,n=e.otpResendCodeRemainingTimeState,r=e.requestInFlightState,a=e.requestErrorState,i=e.children,o=Cu(),l=o.state,u=l.renderInline,c=l.resources,s=l.requestService,d=l.metricsService,p=l.eventService,f=l.initialOtpSessionId,h=o.dispatch,v=function(){var e=(0,re.useState)(6),t=e[0],n=e[1];return(0,re.useEffect)((function(){!function(e,t,n,r){new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,Promise,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return[4,et(Ue.Reauth)];case 1:return(e=t.sent()).isError||n(e.value.OtpCodeLength),[2]}}))}))}),[]),t}(),m=(0,re.useState)(""),y=m[0],E=m[1],g=(0,re.useState)(f),C=g[0],b=g[1],T=n[0],I=n[1],S=(0,re.useState)(null),_=S[0],N=S[1],A=r[0],L=r[1],w=a[0],D=a[1],O=(0,re.useCallback)((function(){return wu(void 0,void 0,void 0,(function(){var e,t,n,r,a;return Du(this,(function(i){switch(i.label){case 0:return L(!0),null===C?(D(fu(c,Mt.UNKNOWN)+" "+c.Action.PleaseTryAgain),L(!1),[2]):(p.sendCodeSubmittedEvent(Nl.OtpEmail),[4,s.otp.validateCode(We.Email,C,y)]);case 1:if((e=i.sent()).isError){t=void 0;try{t=e.errorRaw.data}catch(e){t=null}return n=e.error||t,r=hu(c,n),D(r+" "+c.Action.PleaseTryAgain),p.sendCodeVerificationFailedEvent(Nl.OtpEmail,r),n!==xe.CODE_EXPIRED&&n!==xe.INVALID_SESSION_TOKEN||h({type:Jl.SET_CHALLENGE_INVALIDATED,errorCode:vu(n)}),L(!1),[2]}return p.sendCodeVerifiedEvent(Nl.OtpEmail),[4,s.reauthentication.generateToken({sessionId:C,type:Nl.OtpEmail})];case 2:return(a=i.sent()).isError?(D(fu(c,a.error)+" "+c.Action.PleaseTryAgain),L(!1),[2]):(d.fireVerifiedEvent(Nl.OtpEmail),D(null),h({type:Jl.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{reauthenticationToken:a.value.token}}),[2])}}))}))}),[h,y,C,s.otp,s.reauthentication,d,p,c,D,L]);function R(){var e=Date.now()+3e4;I(30);var t=setInterval((function(){var n=Math.round((e-Date.now())/1e3),r=Math.max(0,n);r<=0&&clearInterval(t),I(r)}),1e3);N(t)}(0,re.useEffect)((function(){return wu(void 0,void 0,void 0,(function(){var e;return Du(this,(function(t){switch(t.label){case 0:return null!==f?[2]:[4,s.otp.sendCodeForUser(We.Email)];case 1:return(e=t.sent()).isError?(D(fu(c,Mt.UNKNOWN)+" "+c.Action.TryAlternativeMethod),[2]):(b(e.value.otpSessionToken),R(),h({type:Jl.INITIALIZE_EMAIL_OTP_SESSION,sessionId:e.value.otpSessionToken}),[2])}}))})),function(){null!==_&&(clearInterval(_),N(null))}}),[]),(0,re.useEffect)((function(){y.length===v&&wu(void 0,void 0,void 0,(function(){return Du(this,(function(e){switch(e.label){case 0:return[4,O()];case 1:return e.sent(),[2]}}))}))}),[y,v,O]);var P={content:A?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):(t=T>0?c.Action.CodeSent+" ("+T+")":""+c.Action.ResendCode,w?c.Message.Error.Default:t),label:c.Action.ResendCode,enabled:!A&&T<=0,action:function(){return wu(void 0,void 0,void 0,(function(){var e;return Du(this,(function(t){switch(t.label){case 0:return L(!0),null===C?(D(fu(c,Mt.UNKNOWN)+" "+c.Action.PleaseTryAgain),L(!1),[2]):[4,s.otp.resendCode(We.Email,C)];case 1:return(e=t.sent()).isError?(D(hu(c,xe.UNKNOWN)+" "+c.Action.PleaseTryAgain),L(!1),[2]):(p.sendOtpResendRequestedEvent(),R(),D(null),b(e.value.otpSessionToken),L(!1),[2])}}))}))}},M=u?Aa:_a.Modal.Body,k=u?Xa:Qa,x=u?"inline-challenge-lock-icon":"modal-lock-icon",V=u?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return ae().createElement(ae().Fragment,null,ae().createElement(M,null,ae().createElement("div",{className:x}),ae().createElement("p",{className:V},w||c.Description.EnterYourOtpCode),ae().createElement(Lu,{id:"reauthentication-email-otp-input",inputType:"password",disabled:A,value:y,setValue:E,error:w,setError:D,validate:Nu,canSubmit:y.length===v,handleSubmit:O,onChange:function(){return D(null)},autoComplete:"off",placeholder:c.Label.YourOtpCode,hideFeedback:!0}),ae().createElement("p",null,i)),ae().createElement(k,{positiveButton:P,negativeButton:null}))}function Ru(){var e=Cu().state.resources.Action.ForgotYourPassword('<a class="text-name text-footer" href="https://en.help.roblox.com/hc/articles/203313070-I-Forgot-My-Password" target="_blank">',"</a>");return ae().createElement("span",{dangerouslySetInnerHTML:{__html:e}})}function Pu(e){var t=e.requestInFlightState,n=e.requestErrorState,r=e.children,a=Cu(),i=a.state,o=i.renderInline,l=i.resources,u=i.requestService;i.metricsService,i.eventService;var c=a.dispatch,s=(0,re.useState)(""),d=s[0],p=s[1],f=t[0],h=t[1],v=n[0],m=n[1];function y(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return h(!0),[4,u.reauthentication.generateToken({password:d})];case 1:return(e=t.sent()).isError?(m(fu(l,e.error)+" "+l.Action.PleaseTryAgain),h(!1),[2]):(m(null),c({type:Jl.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{reauthenticationToken:e.value.token}}),[2])}}))}))}var E={content:f?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):l.Action.Verify,label:l.Action.Verify,enabled:!f&&d.length>0,action:y},g=o?Aa:_a.Modal.Body,C=o?Xa:Qa,b=o?"inline-challenge-lock-icon":"modal-lock-icon",T=o?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return ae().createElement(ae().Fragment,null,ae().createElement(g,null,ae().createElement("div",{className:b}),ae().createElement("p",{className:T},l.Description.EnterYourPassword),ae().createElement(Lu,{id:"reauthentication-password-input",inputType:"password",disabled:f,value:d,setValue:p,error:v,setError:m,validate:Nu,canSubmit:d.length>0,handleSubmit:y,onChange:function(){return m(null)},autoComplete:"off",placeholder:l.Label.YourPassword,hideFeedback:!0}),ae().createElement("p",null,ae().createElement(Ru,null),r)),ae().createElement(C,{positiveButton:E,negativeButton:null}))}function Mu(e){var t=e.rowLabel,n=e.rowIcon,r=e.requestInFlight,a=e.typeToBeSelected,i=(0,cu.useHistory)();return ae().createElement("tr",{onClick:r?void 0:function(){return i.push(du(a))},className:r?"media-type-row disabled":"media-type-row"},ae().createElement("td",null,ae().createElement("span",{className:n})),ae().createElement("td",{className:"media-type-label"},t),ae().createElement("td",{className:"media-type-selector"},ae().createElement("span",{className:"icon-next"}),ae().createElement("div",{className:"icon-placeholder"})))}function ku(e){var t=e.listItemConfig,n=Cu().state,r=n.resources,a=n.renderInline,i=a?Aa:_a.Modal.Body,o=a?"inline-challenge-lock-icon":"modal-lock-icon",l=a?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge",u=a?"":"modal-margin-bottom-large";return ae().createElement(i,null,ae().createElement("div",{className:o}),ae().createElement("p",{className:l},r.Label.ChooseVerificationMethod),ae().createElement("table",{className:"table table-striped media-type-list "+u},ae().createElement("tbody",null,t.map((function(e){return ae().createElement(Mu,{key:e.rowLabel,rowLabel:e.rowLabel,rowIcon:e.rowIcon,requestInFlight:e.requestInFlight,typeToBeSelected:e.typeToBeSelected})})))))}function xu(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Vu(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Hu(){var e=Cu(),t=e.state,n=t.availableTypes,r=t.resources,a=t.defaultType,i=t.renderInline,o=t.isModalVisible,l=t.metricsService,u=t.eventService,c=t.onModalChallengeAbandoned,s=e.dispatch,d=(0,re.useState)(!1),p=(0,re.useState)(""),f=(0,re.useState)(30),h=su();function v(){s({type:Jl.HIDE_MODAL_CHALLENGE}),l.fireAbandonedEvent(h),u.sendChallengeAbandonedEvent(h),null!==c&&c((function(){return s({type:Jl.SHOW_MODAL_CHALLENGE})}))}var m=(0,cu.useHistory)(),y=n.length>1;function E(){return ae().createElement(cu.Switch,null,ae().createElement(cu.Route,{path:du(Nl.Passkey)},ae().createElement(Tu,{requestInFlightState:d,requestErrorState:p},y&&ae().createElement(bu,{requestInFlight:d[0],setRequestError:p[1]}))),ae().createElement(cu.Route,{path:du(Nl.OtpEmail)},ae().createElement(Ou,{otpResendCodeRemainingTimeState:f,requestInFlightState:d,requestErrorState:p},y&&ae().createElement(bu,{requestInFlight:d[0],setRequestError:p[1]}))),ae().createElement(cu.Route,{path:du(Nl.Password)},ae().createElement(Pu,{requestInFlightState:d,requestErrorState:p},y&&ae().createElement(bu,{requestInFlight:d[0],setRequestError:p[1]}))),y&&ae().createElement(cu.Route,null,ae().createElement(ku,{listItemConfig:n.map((function(e){var t;return(t={},t[Nl.Password]={rowLabel:r.Label.Password,rowIcon:"icon-status-private",requestInFlight:d[0],typeToBeSelected:Nl.Password},t[Nl.OtpEmail]={rowLabel:r.Label.OneTimeCode,rowIcon:"icon-status-private",requestInFlight:d[0],typeToBeSelected:Nl.OtpEmail},t[Nl.Passkey]={rowLabel:r.Label.Passkey,rowIcon:"icon-status-private",requestInFlight:d[0],typeToBeSelected:Nl.Passkey},t)[e]}))})))}function g(){var e;return null===h?r.Header.VerificationMethodSelection:(e={},e[Nl.Password]=r.Header.PasswordVerification,e[Nl.OtpEmail]=r.Header.OtpVerification,e[Nl.Passkey]=r.Header.PasskeyVerification,e)[h]}(0,re.useEffect)((function(){!function(e,t,n,r){new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,r;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(i){switch(i.label){case 0:return a!==Nl.Passkey?[3,2]:[4,xu(void 0,void 0,Promise,(function(){var e,t,n,r;return Vu(this,(function(a){switch(a.label){case 0:return e=H.DeviceMeta&&(0,H.DeviceMeta)().isInApp,t=!0,!e&&function(){try{return void 0!==PublicKeyCredential}catch(e){return!1}}()||(t=!1),n=H.DeviceMeta&&((0,H.DeviceMeta)().isIosApp||(0,H.DeviceMeta)().isAndroidApp),r=!1,e&&n?[4,xu(void 0,void 0,Promise,(function(){return Vu(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Nn.hybridResponseService.getNativeResponse(Nn.hybridResponseService.FeatureTarget.CREDENTIALS_PROTOCOL_AVAILABLE,{},2e3)];case 1:return"true"===e.sent()?[2,!0]:[3,3];case 2:return e.sent(),[2,!1];case 3:return[2,!1]}}))}))]:[3,2];case 1:r=a.sent(),a.label=2;case 2:return[2,t||r]}}))}))];case 1:if(e=i.sent(),t=a,!e){if(0===(r=n.filter((function(e){return e!==Nl.Passkey}))).length)return s({type:Jl.SET_CHALLENGE_INVALIDATED,errorCode:0}),[2];t=r[r.length-1],s({type:Jl.SET_REAUTHENTICATION_TYPES,defaultType:t,availableTypes:r})}return m.replace(t),[2];case 2:return m.replace(a),[2]}}))}))}),[]);var C=ae().createElement(Na,{titleText:g()},E()),b=ae().createElement(_a.Modal,{className:"modal-modern",show:o,onHide:v,backdrop:"static"},ae().createElement($a,{headerText:g(),buttonType:Ea.CLOSE,buttonAction:v,buttonEnabled:!d[0],headerInfo:null}),E());return i?C:b}var Wu,Uu,Gu,Fu=(0,ga.withTranslations)((function(e){var t=e.renderInline,n=e.requestService,r=e.metricsService,a=e.eventService,i=e.defaultType,o=e.availableTypes,l=e.defaultTypeMetadata,u=e.shouldModifyBrowserHistory,c=e.translate,s=e.onChallengeCompleted,d=e.onChallengeInvalidated,p=e.onModalChallengeAbandoned,f=ae().createElement(gu,{renderInline:t,requestService:n,metricsService:r,eventService:a,translate:c,defaultType:i,availableTypes:o,defaultTypeMetadata:l,onChallengeCompleted:s,onChallengeInvalidated:d,onModalChallengeAbandoned:p},ae().createElement(Hu,null));return u?ae().createElement(au.HashRouter,{hashType:"noslash"},f):ae().createElement(au.MemoryRouter,null,f)}),{common:[],feature:"Feature.Reauthentication"}),zu=function(){function e(e){this.defaultType=e}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(iu,"challengeInitialized",{defaultType:this.defaultType},W().EventStream.TargetTypes.WWW)},e.prototype.sendNoEnabledMethodsReturnedEvent=function(e,t){W().EventStream.SendEventWithTarget(iu,"noEnabledMethodsReturned",{defaultType:this.defaultType,primaryReauthenticationType:e||"unknown",methodsReturned:t},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"challengeInvalidated",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"challengeAbandoned",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"challengeCompleted",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e.prototype.sendOtpResendRequestedEvent=function(){W().EventStream.SendEventWithTarget(iu,"otpResendRequested",{defaultType:this.defaultType},W().EventStream.TargetTypes.WWW)},e.prototype.sendReauthenticationTypeChangedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"reauthenticationTypeChanged",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeSubmittedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"codeSubmitted",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerificationFailedEvent=function(e,t){W().EventStream.SendEventWithTarget(iu,"codeVerificationFailed",{defaultType:this.defaultType,reauthenticationType:e||"unknown",reason:t},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerifiedEvent=function(e){W().EventStream.SendEventWithTarget(iu,"codeVerified",{defaultType:this.defaultType,reauthenticationType:e||"unknown"},W().EventStream.TargetTypes.WWW)},e}(),Bu={of:function(e){return null==e?{hasValue:!1}:{hasValue:!0,value:e}},empty:function(){return{hasValue:!1}},map:function(e,t){return e.hasValue?Bu.of(t(e.value)):{hasValue:!1}},orElse:function(e,t){return e.hasValue?e:Bu.of(t)}},qu=function(){function e(e,t,n=new Za){this.defaultType=e,this.requestServiceDefault=t,this.eventTimer=n,this.solveTimeSequenceName="Reauthentication_SolveTime"}return e.prototype.fireInitializedEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventReauthentication,value:1,labelValues:{event_type:"Initialized",reauthentication_type:this.defaultType}}),this.eventTimer.start(this.solveTimeSequenceName)},e.prototype.fireVerifiedEvent=function(e){var t=this;this.requestServiceDefault.metrics.recordMetric({name:Pr.EventReauthentication,value:1,labelValues:{event_type:ou,reauthentication_type:e??"unknown"}}),Bu.map(Bu.of(this.eventTimer.end(this.solveTimeSequenceName)),(function(n){t.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeReauthentication,value:n,labelValues:{event_type:ou,reauthentication_type:e??"unknown"}})}))},e.prototype.fireInvalidatedEvent=function(e){var t=this;this.requestServiceDefault.metrics.recordMetric({name:Pr.EventReauthentication,value:1,labelValues:{event_type:lu,reauthentication_type:e??"unknown"}}),Bu.map(Bu.of(this.eventTimer.end(this.solveTimeSequenceName)),(function(n){t.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeReauthentication,value:n,labelValues:{event_type:""+lu,reauthentication_type:e??"unknown"}})}))},e.prototype.fireAbandonedEvent=function(e){var t=this;this.requestServiceDefault.metrics.recordMetric({name:Pr.EventReauthentication,value:1,labelValues:{event_type:uu,reauthentication_type:e??"unknown"}}),Bu.map(Bu.of(this.eventTimer.end(this.solveTimeSequenceName)),(function(n){t.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeReauthentication,value:n,labelValues:{event_type:""+uu,reauthentication_type:e??"unknown"}})}))},e}(),Zu=new ma;function ju(e){var t=e.containerId,n=e.renderInline,r=e.defaultType,a=e.availableTypes,i=e.defaultTypeMetadata,o=e.shouldModifyBrowserHistory,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,c=e.onModalChallengeAbandoned,s=document.getElementById(t);if(null!==s){(0,ie.unmountComponentAtNode)(s);var d=new zu(r),p=new qu(r,Zu);return(0,ie.render)(ae().createElement(Fu,{renderInline:n,requestService:Zu,metricsService:p,eventService:d,defaultType:r,availableTypes:a,defaultTypeMetadata:i,shouldModifyBrowserHistory:o||!1,onChallengeCompleted:l,onChallengeInvalidated:u,onModalChallengeAbandoned:c}),s),d.sendChallengeInitializedEvent(),p.fireInitializedEvent(),!0}return!1}function Yu(e){return Ip.match(e)&&e.parameters.data.challengeType===Ls.REAUTHENTICATION&&e.parameters.kind===Es.INVALIDATED&&""!==e.parameters.data.errorMessage?e.parameters.data.errorMessage:null}var Ku="accountSecurityChallengeRostileEvent",Ju="ChallengeCompleted",Xu="ChallengeInvalidated",Qu="ChallengeAbandoned";function $u(e){return e===Ht.INVALID_SESSION?Xl.INVALID_SESSION:Xl.UNKNOWN}function ec(){return(ec=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function tc(e,t){var n=ec({},e);switch(t.type){case Uu.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n;case Uu.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n;case Uu.SET_CHALLENGE_ABANDONED:return n.isAbandoned=!0,n;case Uu.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Uu.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INVALID_SESSION=1]="INVALID_SESSION"}(Xl||={}),function(e){e.INVALID="ROSTILE_PUZZLE_TYPE_INVALID",e.VISIBLE="ROSTILE_PUZZLE_TYPE_VISIBLE",e.INVISIBLE="ROSTILE_PUZZLE_TYPE_INVISIBLE"}(Ql||={}),function(e){e[e.INITIAL=0]="INITIAL",e[e.COMPLETED_UNRESOLVED=1]="COMPLETED_UNRESOLVED",e[e.COMPLETED_SUCCESS=2]="COMPLETED_SUCCESS",e[e.COMPLETED_ERROR=3]="COMPLETED_ERROR"}(Wu||={}),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.SET_CHALLENGE_ABANDONED=2]="SET_CHALLENGE_ABANDONED",e[e.HIDE_MODAL_CHALLENGE=3]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=4]="SHOW_MODAL_CHALLENGE"}(Uu||={});var nc=(0,re.createContext)(null);function rc(e){var t=e.challengeId,n=e.puzzleType,r=e.renderInline,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=e.children,f=(0,re.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerificationPrompt:e("Description.VerificationPrompt"),VerificationHeader:e("Description.VerificationHeader"),VerificationErrorHeader:e("Description.VerificationErrorHeader"),ImAHuman:e("Description.ImAHuman"),Ok:e("Description.Ok")}}}(l)}))[0],h=(0,re.useState)((function(){return{challengeId:t,puzzleType:n,renderInline:r,resources:f,eventService:a,metricsService:i,requestService:o,onChallengeDisplayed:u,onModalChallengeAbandoned:d,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isAbandoned:!1,isModalVisible:!1}}))[0],v=(0,re.useReducer)(tc,h),m=v[0],y=v[1];return(0,re.useEffect)((function(){null!==m.onChallengeCompletedData&&null===m.onChallengeInvalidatedData&&(a.sendChallengeCompletedEvent(),i.fireChallengeCompletedEvent(),c(m.onChallengeCompletedData))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,c]),(0,re.useEffect)((function(){m.isAbandoned||null===m.onChallengeInvalidatedData||null!==m.onChallengeCompletedData||(a.sendChallengeInvalidatedEvent(),i.fireChallengeInvalidatedEvent(),s(m.onChallengeInvalidatedData))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,s,m.isAbandoned]),(0,re.useEffect)((function(){m.isAbandoned&&null===m.onChallengeCompletedData&&null===m.onChallengeInvalidatedData&&(a.sendChallengeAbandonedEvent(),i.fireChallengeAbandonedEvent(),null!==d&&d((function(){return y({type:Uu.SHOW_MODAL_CHALLENGE})})))}),[a,i,m.onChallengeCompletedData,m.onChallengeInvalidatedData,m.isAbandoned,s,d]),ae().createElement(nc.Provider,{value:{state:m,dispatch:y}},p)}function ac(){var e=(0,re.useContext)(nc);if(null===e)throw new Error("RostileContext was not provided in the current scope");return e}function ic(e){return new Promise((function(t){return setTimeout((function(){return t(void 0)}),e)}))}function oc(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e}function lc(e){var t=e.answerState,n=e.checkAnswer,r=ac(),a=r.state,i=a.isModalVisible,o=a.renderInline,l=a.resources,u=r.dispatch,c=(0,re.useState)(!1),s=c[0],d=c[1],p=(0,re.useRef)(null),f=(0,re.useState)(null),h=f[0],v=f[1],m=(0,re.useState)(null),y=m[0],E=m[1],g=function(){var e=ac().state.puzzleType,t=(0,re.useRef)([]);return(0,re.useEffect)((function(){var e;function n(n){n.timeStamp-e>20&&(t.current=oc(oc([],t.current.slice(-99)),[{x:n.clientX,y:n.clientY,timestamp:n.timeStamp}]),e=n.timeStamp)}return e=0,window.addEventListener("mousemove",n),function(){window.removeEventListener("mousemove",n)}}),[e]),t}();function C(){u({type:Uu.HIDE_MODAL_CHALLENGE})}function b(e){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var t,r,a,i,o;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(l){switch(l.label){case 0:return e.preventDefault(),t=performance.now(),r={width:window.screen.width,height:window.screen.height},a={width:window.innerWidth,height:window.innerHeight},p.current?(i=p.current.getBoundingClientRect(),o={x:i.x,y:i.y,width:i.width,height:i.height},null==h||null==y?[3,2]:(d(!0),[4,ic(200)])):[2];case 1:l.sent(),n({buttonClicked:!0,click:{x:e.clientX,y:e.clientY,timestamp:e.timeStamp,duration:e.timeStamp-y},completionTime:t-h,mouseMovements:g.current,screenSize:r,buttonLocation:o,windowSize:a}).then((function(){return d(!1)}),(function(){return d(!1)})),l.label=2;case 2:return[2]}}))}))}function T(e){E(e.timeStamp)}return(0,re.useEffect)((function(){i&&v(performance.now())}),[i]),ae().createElement("div",{className:"rostile-visible-puzzle"},function(){if(s)return ae().createElement(_a.Loading,null);switch(t){case Wu.INITIAL:return ae().createElement(ae().Fragment,null,ae().createElement("span",null,l.Description.VerificationPrompt),ae().createElement("br",null),ae().createElement("span",{ref:p},ae().createElement(_a.Button,{className:"rostile-verify-button",onClick:b,onMouseDown:T},l.Description.ImAHuman)));case Wu.COMPLETED_UNRESOLVED:return ae().createElement(_a.Loading,null);case Wu.COMPLETED_SUCCESS:return ae().createElement(ae().Fragment,null,ae().createElement("div",{className:"icon-checkmark"}),ae().createElement("br",null),ae().createElement("span",null,l.Description.VerificationSuccess));case Wu.COMPLETED_ERROR:return ae().createElement(ae().Fragment,null,ae().createElement("span",null,l.Description.VerificationError),ae().createElement("br",null),!o&&ae().createElement(_a.Button,{className:"rostile-verify-button",onClick:C},l.Description.Ok));default:return null}}())}function uc(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function cc(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function sc(){var e=ac(),t=e.state,n=t.challengeId,r=t.puzzleType,a=t.renderInline,i=t.resources,o=t.requestService,l=t.onChallengeDisplayed,u=t.isModalVisible,c=e.dispatch,s=(0,re.useState)(Wu.INITIAL),d=s[0],p=s[1];function f(){c({type:Uu.HIDE_MODAL_CHALLENGE})}function h(){p(Wu.INITIAL),c({type:Uu.SET_CHALLENGE_ABANDONED}),f()}function v(e,t=!1){return uc(void 0,void 0,Promise,(function(){var r;return cc(this,(function(a){switch(a.label){case 0:return p(Wu.COMPLETED_UNRESOLVED),[4,o.rostile.verifyPuzzle(n,e)];case 1:if((r=a.sent()).isError){if(r.error!==Ht.INVALID_SESSION&&!t)return[2,v(e,!0)];p(Wu.COMPLETED_ERROR),c({type:Uu.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:$u(r.error),errorMessage:i.Description.VerificationError}})}else p(Wu.COMPLETED_SUCCESS),c({type:Uu.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:r.value.redemptionToken}}),setTimeout((function(){return u&&f()}),2e3);return[2,void 0]}}))}))}function m(){var e=a?Aa:_a.Modal.Body;switch(r){case Ql.VISIBLE:return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement(lc,{answerState:d,checkAnswer:v})));case Ql.INVISIBLE:default:return null}}return(0,re.useEffect)((function(){switch(r){case Ql.VISIBLE:c({type:Uu.SHOW_MODAL_CHALLENGE}),l({displayed:!0});break;case Ql.INVISIBLE:uc(void 0,void 0,void 0,(function(){return cc(this,(function(e){switch(e.label){case 0:return[4,v({})];case 1:return e.sent(),[2]}}))})).then((function(){}),(function(){}));break;default:c({type:Uu.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:Xl.UNKNOWN,errorMessage:i.Description.VerificationError}}),u&&f()}}),[c,l,r]),a?ae().createElement(Na,{titleText:d!==Wu.COMPLETED_ERROR?i.Description.VerificationHeader:i.Description.VerificationErrorHeader},m()):ae().createElement(_a.Modal,{className:"modal-modern modal-modern-challenge-rostile",show:u,onHide:d===Wu.COMPLETED_ERROR?f:h,backdrop:"static"},ae().createElement($a,{headerText:d!==Wu.COMPLETED_ERROR?i.Description.VerificationHeader:i.Description.VerificationErrorHeader,buttonType:d===Wu.COMPLETED_ERROR?Ea.HIDDEN:Ea.CLOSE,buttonAction:h,buttonEnabled:d!==Wu.COMPLETED_ERROR,headerInfo:null}),m())}var dc=(0,ga.withTranslations)((function(e){var t=e.challengeId,n=e.puzzleType,r=e.renderInline,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeDisplayed,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned;return ae().createElement(rc,{challengeId:t,puzzleType:n,renderInline:r,eventService:a,metricsService:i,requestService:o,translate:l,onChallengeDisplayed:u,onChallengeCompleted:c,onChallengeInvalidated:s,onModalChallengeAbandoned:d},ae().createElement(sc,null))}),{common:["CommonUI.Messages"],feature:"Feature.RostileChallenge"}),pc=function(){function e(e){this.challengeId=e}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(Ku,"challengeInitialized",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(){W().EventStream.SendEventWithTarget(Ku,"challengeCompleted",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(){W().EventStream.SendEventWithTarget(Ku,"challengeInvalidated",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(){W().EventStream.SendEventWithTarget(Ku,"challengeAbandoned",{challengeId:this.challengeId},W().EventStream.TargetTypes.WWW)},e}();function fc(e){switch(e){case Ql.VISIBLE:return"Visible";case Ql.INVISIBLE:return"Invisible";case Ql.INVALID:default:return"Invalid"}}var hc,vc,mc,yc,Ec=function(){function e(e,t,n){this.appType=e||"unknown",this.puzzleType=t||Ql.INVALID,this.requestServiceDefault=n,this.eventTimer=new Za,this.challengeSolveTimeSequenceName="Rostile_ChallengeSolveTime"}return e.prototype.fireChallengeInitializedEvent=function(){this.fireEvent("ChallengeInitialized"),this.eventTimer.start(this.challengeSolveTimeSequenceName)},e.prototype.fireChallengeCompletedEvent=function(){this.fireEvent(Ju),this.fireSolveTimeEvent(Ju)},e.prototype.fireChallengeInvalidatedEvent=function(){this.fireEvent(Xu),this.fireSolveTimeEvent(Xu)},e.prototype.fireChallengeAbandonedEvent=function(){this.fireEvent(Qu),this.fireSolveTimeEvent(Qu)},e.prototype.fireEvent=function(e){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventRostile,value:1,labelValues:{event_type:"Rostile_"+e,application_type:this.appType,puzzle_type:fc(this.puzzleType)}}).catch((function(){}))},e.prototype.fireSolveTimeEvent=function(e){var t=this.eventTimer.end(this.challengeSolveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTimeRostile,value:t,labelValues:{event_type:"Rostile_"+e,application_type:this.appType,puzzle_type:fc(this.puzzleType)}}).catch((function(){}))},e}(),gc=new ma;function Cc(e){var t=e.containerId,n=e.challengeId,r=e.puzzleType,a=e.appType,i=e.renderInline,o=e.onChallengeDisplayed,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,c=e.onModalChallengeAbandoned,s=document.getElementById(t);if(null!==s){(0,ie.unmountComponentAtNode)(s);var d=new pc(n),p=new Ec(a,r,gc);return(0,ie.render)(ae().createElement(dc,{challengeId:n,puzzleType:r,renderInline:i,eventService:d,metricsService:p,requestService:gc,onChallengeDisplayed:o,onChallengeCompleted:l,onChallengeInvalidated:u,onModalChallengeAbandoned:c}),s),d.sendChallengeInitializedEvent(),p.fireChallengeInitializedEvent(),!0}return!1}function bc(e,t){switch(t){case Gu.USER_WAS_FORCE_RESET:return e.Message.Error.SecurityQuestions.UserWasForceReset;case Gu.SESSION_EXPIRED:return e.Message.Error.SecurityQuestions.SessionInactive;default:return e.Message.Error.Default}}function Tc(e,t){return t===Bt.SESSION_INACTIVE?e.Message.Error.SecurityQuestions.SessionInactive:e.Message.Error.Default}function Ic(e){return e===Bt.SESSION_INACTIVE?Gu.SESSION_EXPIRED:Gu.UNKNOWN}function Sc(){return(Sc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function _c(e,t){var n=Sc({},e);switch(t.type){case hc.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case hc.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:bc(e.resources,t.errorCode)},n.isModalVisible=!1,n;case hc.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case hc.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_EXPIRED=1]="SESSION_EXPIRED",e[e.USER_WAS_FORCE_RESET=2]="USER_WAS_FORCE_RESET"}(Gu||={}),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(hc||={});var Nc=(0,re.createContext)(null);function Ac(e){var t=e.userId,n=e.sessionId,r=e.renderInline,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,d=e.children,p=(0,re.useState)((function(){return function(e){return{Action:{Confirm:e("Action.Confirm"),Continue:e("Action.Continue"),Ok:e("Action.OK"),PickN:function(t){return e("Action.PickN",{count:t})},PleaseTryAgain:e("Action.PleaseTryAgain"),Reload:e("Action.Reload"),SelectAllThatApply:e("Action.SelectAllThatApply")},Description:{RegainAccessGeneric:function(t){return e("Description.RegainAccessGeneric",{styledLinkText:t})},UnknownChoice:e("Description.UnknownChoice"),VerifyYourIdentity:e("Description.VerifyYourIdentity"),WhichGames:e("Description.WhichGames",{days:7}),YourPasswordHasBeenReset:e("Description.YourPasswordHasBeenReset")},Header:{PleaseConfirmYourIdentity:e("Header.PleaseConfirmYourIdentity")},Message:{Error:{AnswerIncorrect:e("Message.Error.AnswerIncorrect"),Default:e("Message.Error.Default"),MustPickN:e("Message.Error.MustPickN"),SecurityQuestions:{SessionInactive:e("Message.Error.SecurityQuestions.SessionInactive"),UserWasForceReset:e("Message.Error.SecurityQuestions.UserWasForceReset")}}}}}(l)}))[0],f=(0,re.useState)((function(){return{userId:t,sessionId:n,renderInline:r,resources:p,eventService:a,metricsService:i,requestService:o,onModalChallengeAbandoned:s,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],h=(0,re.useReducer)(_c,f),v=h[0],m=h[1];return(0,re.useEffect)((function(){null!==v.onChallengeCompletedData&&null===v.onChallengeInvalidatedData&&u(v.onChallengeCompletedData)}),[v.onChallengeCompletedData,v.onChallengeInvalidatedData,u]),(0,re.useEffect)((function(){null!==v.onChallengeInvalidatedData&&null===v.onChallengeCompletedData&&c(v.onChallengeInvalidatedData)}),[v.onChallengeCompletedData,v.onChallengeInvalidatedData,c]),ae().createElement(Nc.Provider,{value:{state:v,dispatch:m}},d)}function Lc(){var e=(0,re.useContext)(Nc);if(null===e)throw new Error("SecurityQuestionsContext was not provided in the current scope");return e}function wc(e){var t=e.setSelected,n=e.caption,r=e.imageUrl,a=e.selected,i=Lc().state.resources,o="answer-choice-image"+(a?" answer-choice-selected":""),l=n||i.Description.UnknownChoice;function u(){return t(!a)}return ae().createElement("div",{className:"answer-choice"},ae().createElement("div",{className:o,role:"checkbox","aria-checked":a,onClick:function(e){u(),e.currentTarget.blur()},onKeyDown:function(e){"Enter"===e.key&&u()},tabIndex:0},null!==r?ae().createElement("img",{src:r,alt:l}):ae().createElement("div",{className:"answer-choice-img-placeholder"},l)),ae().createElement("div",{className:"answer-choice-caption xsmall"},l))}function Dc(){return(Dc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function Oc(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Rc(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function Pc(){var e,t=Lc(),n=t.state,r=n.userId,a=n.sessionId,i=n.renderInline,o=n.resources,l=n.eventService,u=n.metricsService,c=n.requestService,s=n.onModalChallengeAbandoned,d=n.isModalVisible,p=t.dispatch,f=(0,re.useState)(),h=f[0],v=f[1],m=(0,re.useState)(null),y=m[0],E=m[1],g=(0,re.useState)(null),C=g[0],b=g[1],T=(0,re.useState)(null),I=T[0],S=T[1],_=(0,re.useState)(!1),N=_[0],A=_[1],L=(0,re.useState)(null),w=L[0],D=L[1],O=(0,re.useState)(!1),R=O[0],P=O[1],M=(0,re.useState)(!1),k=M[0],x=M[1];function V(){v(null),E(null),b(null)}function W(){p({type:hc.HIDE_MODAL_CHALLENGE}),null!==s&&s((function(){return p({type:hc.SHOW_MODAL_CHALLENGE})}))}function U(e){return function(t){var n;null!==C&&void 0!==C[e]&&b(Dc(Dc({},C),((n={})[e]=Dc(Dc({},C[e]),{selected:t}),n)))}}e=function(){return Oc(void 0,void 0,void 0,(function(){var e,t,n,i,u,s,d,f,h;return Rc(this,(function(m){switch(m.label){case 0:return S(null),[4,c.securityQuestions.getQuestion(r,a)];case 1:return(e=m.sent()).isError?(e.error===Bt.SESSION_INACTIVE?p({type:hc.SET_CHALLENGE_INVALIDATED,errorCode:Ic(e.error)}):S(Tc(o,e.error)+" "+o.Action.PleaseTryAgain),[2]):(v(e.value.questionType),e.value.answerPrompt===Zt.PICK_ALL_CORRECT_CHOICES?E({answerPrompt:Zt.PICK_ALL_CORRECT_CHOICES}):E({answerPrompt:Zt.PICK_C_CORRECT_CHOICES,correctAnswerChoiceCount:e.value.correctAnswerChoiceCount}),t={},n=e.value.answerChoices,i=new Set(n),u=new Set(n),[4,c.games.getDetailsForUniverseIds(n)]);case 2:return(s=m.sent()).isError?(S(function(e){return e.Message.Error.Default}(o,s.error)+" "+o.Action.PleaseTryAgain),[2]):(d={},s.value.data.forEach((function(e){d[e.id]=e.name,i.delete(e.id.toString())})),[4,c.thumbnails.getIconsForUniverseIds(n,"256x256",rn.PNG,!1)]);case 3:return(f=m.sent()).isError?(S(function(e){return e.Message.Error.Default}(o,f.error)+" "+o.Action.PleaseTryAgain),[2]):(h={},f.value.data.forEach((function(e){e.state===an.COMPLETED&&(h[e.targetId]=e.imageUrl,u.delete(e.targetId.toString()))})),n.forEach((function(e){t[e]={caption:d[e]||null,imageUrl:h[e]||null,selected:!1}})),b(t),(i.size>0||u.size>0)&&l.sendAnswerChoicesFailedToLoadEvent(Array.from(i),Array.from(u)),[2])}}))}))},(0,re.useEffect)((function(){return e(),function(){V()}}),[]);var G=null!==C?Object.entries(C).filter((function(e){return e[1].selected})).length:0,F=null!==y&&(y.answerPrompt===Zt.PICK_ALL_CORRECT_CHOICES||y.correctAnswerChoiceCount===G),z={content:N?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):o.Action.Confirm,label:o.Action.Confirm,enabled:!N&&F,action:function(){return Oc(void 0,void 0,void 0,(function(){var t,n;return Rc(this,(function(i){switch(i.label){case 0:return null===C?[2]:(t=Object.entries(C).filter((function(e){return e[1].selected})).map((function(e){return e[0]})),A(!0),[4,c.securityQuestions.answerQuestion(r,t,a)]);case 1:return(n=i.sent()).isError?n.error===Bt.SESSION_INACTIVE?(p({type:hc.SET_CHALLENGE_INVALIDATED,errorCode:Ic(n.error)}),[2]):(u.fireErroredEvent(),D(Tc(o,n.error)+" "+o.Action.PleaseTryAgain),A(!1),[2]):(D(null),n.value.answerCorrect?(u.fireSolvedEvent(),p({type:hc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:n.value.redemptionToken}}),[3,6]):[3,2]);case 2:return n.value.shouldRequestNewQuestion?(u.fireIncorrectEvent(),V(),[4,ic(250)]):[3,5];case 3:return i.sent(),P(!0),[4,e()];case 4:return i.sent(),A(!1),[3,6];case 5:n.value.userWasForceReset?(u.fireFailedEvent(),x(!0)):(u.fireErroredEvent(),u.fireFailedEvent(),p({type:hc.SET_CHALLENGE_INVALIDATED,errorCode:Gu.UNKNOWN})),i.label=6;case 6:return[2]}}))}))}},B={content:o.Action.Reload,label:o.Action.Reload,enabled:null!==I,action:e},q={content:o.Action.Continue,label:o.Action.Continue,enabled:!0,action:function(){window.location.href=H.Endpoints.getAbsoluteUrl("/login/securityNotification")}};function Z(){var e=i?Aa:_a.Modal.Body,t=i?Xa:Qa,n=i?"inline-challenge-lock-icon":"modal-lock-icon",r=i?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm",a=i?"inline-challenge-margin-bottom":"modal-margin-bottom",l=i?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";if(k)return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("div",{className:n}),ae().createElement("p",{className:a+" font-bold"},o.Description.YourPasswordHasBeenReset),ae().createElement("p",{dangerouslySetInnerHTML:{__html:o.Description.RegainAccessGeneric('<span class="font-bold">'+o.Action.Continue+"</span>")}})),ae().createElement(t,{positiveButton:q,negativeButton:null}));if(null!==I)return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("p",null,I)),ae().createElement(t,{positiveButton:B,negativeButton:null}));if(null===h||null===y||null===C)return ae().createElement(e,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin modal-margin-bottom-large"}));var u=Object.keys(C).length%3==1;return ae().createElement(ae().Fragment,null,ae().createElement(e,null,ae().createElement("div",{className:n}),ae().createElement("p",{className:r},o.Description.WhichGames),ae().createElement("p",{className:l+" font-bold"},y.answerPrompt===Zt.PICK_ALL_CORRECT_CHOICES?o.Action.SelectAllThatApply:o.Action.PickN(y.correctAnswerChoiceCount)),ae().createElement("p",{className:(R?r:l)+" small"},o.Description.VerifyYourIdentity),R&&ae().createElement("p",{className:l+" text-error"},o.Message.Error.AnswerIncorrect," ",o.Action.PleaseTryAgain),ae().createElement("div",{className:l+" answer-choice-area"},Object.keys(C).map((function(e,t){return ae().createElement(ae().Fragment,{key:e},ae().createElement(wc,Dc({key:e,setSelected:U(e)},C[e])),u&&t===Object.keys(C).length-3?ae().createElement("br",null):null)}))),ae().createElement("p",{className:"text-error xsmall"},w)),ae().createElement(t,{positiveButton:z,negativeButton:null}))}return i?ae().createElement(Na,{titleText:o.Header.PleaseConfirmYourIdentity},Z()):ae().createElement(_a.Modal,{className:"modal-modern",show:d,onHide:W,backdrop:"static"},ae().createElement($a,{headerText:o.Header.PleaseConfirmYourIdentity,buttonType:k?Ea.HIDDEN:Ea.CLOSE,buttonAction:W,buttonEnabled:!N,headerInfo:null}),Z())}var Mc,kc,xc=(0,ga.withTranslations)((function(e){var t=e.userId,n=e.sessionId,r=e.renderInline,a=e.eventService,i=e.metricsService,o=e.requestService,l=e.translate,u=e.onChallengeCompleted,c=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return ae().createElement(Ac,{userId:t,sessionId:n,renderInline:r,eventService:a,metricsService:i,requestService:o,translate:l,onChallengeCompleted:u,onChallengeInvalidated:c,onModalChallengeAbandoned:s},ae().createElement(Pc,null))}),{common:["CommonUI.Messages"],feature:"Feature.SecurityQuestions"}),Vc=function(){function e(e){this.sessionId=e}return e.prototype.sendAnswerChoicesFailedToLoadEvent=function(e,t){W().EventStream.SendEventWithTarget("securityQuestionsEvent","answerChoicesFailedToLoad",{sessionId:this.sessionId,answerChoicesWithNoCaption:JSON.stringify(e),answerChoicesWithNoIcon:JSON.stringify(t)},W().EventStream.TargetTypes.WWW)},e}(),Hc=function(){function e(e){var t=e.appType,n=e.requestServiceDefault;this.appType=t||"unknown",this.requestServiceDefault=n}return e.prototype.fireInitializedEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventSecurityQuestion,value:1,labelValues:{event_type:"Initialized",application_type:this.appType}}).catch((function(){}))},e.prototype.fireErroredEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventSecurityQuestion,value:1,labelValues:{event_type:"Errored",application_type:this.appType}}).catch((function(){}))},e.prototype.fireSolvedEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventSecurityQuestion,value:1,labelValues:{event_type:"Solved",application_type:this.appType}}).catch((function(){}))},e.prototype.fireIncorrectEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventSecurityQuestion,value:1,labelValues:{event_type:"Incorrect",application_type:this.appType}}).catch((function(){}))},e.prototype.fireFailedEvent=function(){this.requestServiceDefault.metrics.recordMetric({name:Pr.EventSecurityQuestion,value:1,labelValues:{event_type:"Failed",application_type:this.appType}}).catch((function(){}))},e}(),Wc=new ma;function Uc(e){var t=e.containerId,n=e.userId,r=e.sessionId,a=e.appType,i=e.renderInline,o=e.onChallengeCompleted,l=e.onChallengeInvalidated,u=e.onModalChallengeAbandoned;n=n.toString();var c=document.getElementById(t);if(null!==c){(0,ie.unmountComponentAtNode)(c);var s=new Vc(r),d=new Hc({appType:a,requestServiceDefault:Wc});return(0,ie.render)(ae().createElement(xc,{userId:n,sessionId:r,renderInline:i,eventService:s,metricsService:d,requestService:Wc,onChallengeCompleted:o,onChallengeInvalidated:l,onModalChallengeAbandoned:u}),c),d.fireInitializedEvent(),!0}return!1}var Gc=100,Fc="accountSecurityChallengeTwoStepVerificationEvent",zc="Initialized",Bc="Verified",qc="Invalidated",Zc="Abandoned";function jc(e,t){return t===yc.SESSION_EXPIRED?e.Response.SessionExpired:e.Response.DefaultError}function Yc(e,t){switch(t){case hn.FEATURE_DISABLED:return e.Response.FeatureNotAvailable;case hn.INVALID_CODE:return e.Response.InvalidCode;case hn.TOO_MANY_REQUESTS:return e.Response.TooManyAttempts;case hn.INVALID_CHALLENGE_ID:return e.Response.SessionExpired;case hn.AUTHENTICATOR_CODE_ALREADY_USED:return e.Response.AuthenticatorCodeAlreadyUsed;default:return e.Response.DefaultError}}function Kc(e){return e===hn.INVALID_CHALLENGE_ID?yc.SESSION_EXPIRED:yc.UNKNOWN}function Jc(){var e=(0,cu.useLocation)(),t=(0,cu.matchPath)(e.pathname,{path:"/:activeMediaType",exact:!0,strict:!1});return(null==t?void 0:t.params)?null==t?void 0:t.params.activeMediaType:null}function Xc(e){return"/"+(e||"")}function Qc(){return(Qc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function $c(e,t){var n=Qc({},e);switch(t.type){case Mc.SET_METADATA:return n.metadata=t.metadata,n;case Mc.SET_USER_CONFIGURATION:return n.userConfiguration=t.userConfiguration,n.enabledMediaTypes=t.enabledMediaTypes,n;case Mc.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Mc.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:jc(e.resources,t.errorCode)},n.isModalVisible=!1,n;case Mc.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Mc.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}}!function(e){e.Unknown="Unknown",e.Login="Login",e.RobuxSpend="RobuxSpend",e.ItemTrade="ItemTrade",e.Resale="Resale",e.PasswordReset="PasswordReset",e.RevertAccount="RevertAccount",e.Generic="Generic",e.GenericWithRecoveryCodes="GenericWithRecoveryCodes"}(vc||={}),function(e){e.Email="Email",e.Authenticator="Authenticator",e.RecoveryCode="RecoveryCode",e.SMS="SMS",e.SecurityKey="SecurityKey",e.CrossDevice="CrossDevice"}(mc||={}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_EXPIRED=1]="SESSION_EXPIRED"}(yc||={}),function(e){e[e.SET_METADATA=0]="SET_METADATA",e[e.SET_USER_CONFIGURATION=1]="SET_USER_CONFIGURATION",e[e.SET_CHALLENGE_COMPLETED=2]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=3]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=4]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=5]="SHOW_MODAL_CHALLENGE"}(Mc||={});var es=(0,re.createContext)(null);function ts(e){var t=e.userId,n=e.challengeId,r=e.actionType,a=e.renderInline,i=e.shouldShowRememberDeviceCheckbox,o=e.eventService,l=e.metricsService,u=e.requestService,c=e.translate,s=e.onChallengeCompleted,d=e.onChallengeInvalidated,p=e.onModalChallengeAbandoned,f=e.children,h=(0,re.useState)((function(){return function(e){return{Action:{ChangeMediaType:e("Action.ChangeMediaType"),Okay:e("Action.Okay"),Reload:e("Action.Reload"),Resend:e("Action.Resend"),Retry:e("Action.Retry"),Verify:e("Action.Verify")},Description:{LoginDenied:e("Description.LoginDenied"),LoginExpired:e("Description.LoginExpired"),SecurityWarningShort:e("Description.SecurityWarningShort",{boldStart:"",boldEnd:""}),SecurityWarningShortBackupCodes:e("Description.SecurityWarningShortBackupCodes",{boldStart:"",boldEnd:""})},Heading:{LoginDenied:e("Heading.LoginDenied"),LoginError:e("Heading.LoginError")},Label:{ApproveWithDevice:e("Label.ApproveWithDevice"),AuthenticatorMediaType:e("Label.AuthenticatorMediaType"),CrossDeviceMediaType:e("Label.UseYourDevice"),ChooseAlternateMediaType:e("Label.ChooseAlternateMediaType"),CharacterCodeInputPlaceholderText:function(t){return e("Label.CharacterCodeInputPlaceholderText",{codeLength:t})},CodeInputPlaceholderText:function(t){return e("Label.CodeInputPlaceholderText",{codeLength:t})},EmailMediaType:e("Label.EmailMediaType"),EnterAuthenticatorCode:e("Label.EnterAuthenticatorCode"),EnterEmailCode:e("Label.EnterEmailCode"),EnterRecoveryCode:e("Label.EnterRecoveryCode"),EnterTextCode:e("Label.EnterTextCode"),LearnMore:e("Label.LearnMore"),HelpCenter:e("Label.HelpCenter"),HelpCenterLink:function(t){return e("Label.HelpCenterLink",{helpCenterLink:t})},NeedHelpContactSupport:function(t){return e("Label.NeedHelpContactSupport",{supportLink:t})},NewLogin:e("Label.NewLogin"),RecoveryCodeMediaType:e("Label.RecoveryCodeMediaType"),RobloxSupport:e("Label.RobloxSupport"),SecurityKeyDirections:e("Label.SecurityKeyDirections"),SecurityKeyMediaType:e("Label.SecurityKeyMediaType"),SmsMediaType:e("Label.SmsMediaType"),TrustThisDevice:e("Label.TrustThisDevice"),TwoStepVerification:e("Label.TwoStepVerification"),VerifyWithSecurityKey:e("Label.VerifyWithSecurityKey")},Response:{AuthenticatorCodeAlreadyUsed:e("Response.AuthenticatorCodeAlreadyUsed"),CodeSent:e("Response.CodeSent"),DefaultError:e("Response.DefaultError"),FeatureNotAvailable:e("Response.FeatureNotAvailable"),InvalidCode:e("Response.InvalidCode"),SessionExpired:e("Response.SessionExpired"),SystemErrorSwitchingToEmail:e("Response.SystemErrorSwitchingToEmail"),TooManyAttempts:e("Response.TooManyAttempts"),VerificationError:e("Response.VerificationError")}}}(c)}))[0],v=(0,re.useState)((function(){return{userId:t,challengeId:n,actionType:r,renderInline:a,shouldShowRememberDeviceCheckbox:i,resources:h,eventService:o,metricsService:l,requestService:u,onModalChallengeAbandoned:p,metadata:null,userConfiguration:null,enabledMediaTypes:[],onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],m=Jc(),y=(0,re.useReducer)($c,v),E=y[0],g=y[1];return(0,re.useEffect)((function(){if(null!==E.onChallengeCompletedData&&null===E.onChallengeInvalidatedData){var e=E.onChallengeCompletedData;setTimeout((function(){return s(e)}),Gc)}}),[E.onChallengeCompletedData,E.onChallengeInvalidatedData,s]),(0,re.useEffect)((function(){if(null!==E.onChallengeInvalidatedData&&null===E.onChallengeCompletedData){o.sendChallengeInvalidatedEvent(m),l.fireInvalidatedEvent();var e=E.onChallengeInvalidatedData;setTimeout((function(){return d(e)}),Gc)}}),[E.onChallengeCompletedData,E.onChallengeInvalidatedData,d,o,l,m]),(0,re.useEffect)((function(){null!==m&&o.sendMediaTypeChangedEvent(m)}),[o,m]),ae().createElement(es.Provider,{value:{state:E,dispatch:g}},f)}function ns(){var e=(0,re.useContext)(es);if(null===e)throw new Error("TwoStepVerificationContext was not provided in the current scope");return e}function rs(e){var t=e.hasSentEmailCode,n=e.setHasSentEmailCode,r=e.hasSentSmsCode,a=e.setHasSentSmsCode,i=e.requestInFlight,o=e.setRequestInFlight,l=e.setModalTitleText,u=e.children,c=ns(),s=c.state,d=s.userId,p=s.challengeId,f=s.actionType,h=s.renderInline,v=s.resources,m=s.requestService,y=s.enabledMediaTypes,E=c.dispatch,g=(0,cu.useHistory)(),C=(0,re.useState)(null),b=C[0],T=C[1];function I(e){switch(e){case mc.Authenticator:return"icon-menu-mobile";case mc.Email:return"icon-menu-email";case mc.RecoveryCode:return"icon-menu-recover";case mc.SMS:return"icon-menu-mobile";case mc.SecurityKey:return"icon-menu-usb";case mc.CrossDevice:return"icon-menu-mobile";default:return"icon-brokenpage"}}function S(e,l){var u=function(e){switch(e){case mc.Authenticator:return v.Label.AuthenticatorMediaType;case mc.Email:return v.Label.EmailMediaType;case mc.RecoveryCode:return v.Label.RecoveryCodeMediaType;case mc.SMS:return v.Label.SmsMediaType;case mc.SecurityKey:return v.Label.SecurityKeyMediaType;case mc.CrossDevice:return v.Label.CrossDeviceMediaType;default:return null}}(e);return u?ae().createElement("tr",{key:l,onClick:i?void 0:function(){return function(e){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var l;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(u){switch(u.label){case 0:return i?[2]:e!==mc.CrossDevice&&y.includes(mc.CrossDevice)?[4,m.twoStepVerification.retractCrossDevice(d,{challengeId:p,actionType:f})]:[3,2];case 1:u.sent(),u.label=2;case 2:return e!==mc.Email||t?[3,4]:(o(!0),[4,m.twoStepVerification.sendEmailCode(d,{challengeId:p,actionType:f})]);case 3:if(l=u.sent(),o(!1),l.isError)return l.error===hn.INVALID_USER_ID||l.error===hn.INVALID_CHALLENGE_ID?E({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(l.error)}):T(Yc(v,l.error)),[2];n(!0),u.label=4;case 4:return e!==mc.SMS||r?[3,6]:(o(!0),[4,m.twoStepVerification.sendSmsCode(d,{challengeId:p,actionType:f})]);case 5:if(l=u.sent(),o(!1),l.isError)return l.error===hn.INVALID_USER_ID||l.error===hn.INVALID_CHALLENGE_ID?E({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(l.error)}):T(Yc(v,l.error)),[2];a(!0),u.label=6;case 6:return e!==mc.CrossDevice?[3,8]:(o(!0),[4,m.twoStepVerification.retryCrossDevice(d,{challengeId:p,actionType:f})]);case 7:if(l=u.sent(),o(!1),l.isError){if(l.error===hn.INVALID_USER_ID||l.error===hn.INVALID_CHALLENGE_ID)return E({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(l.error)}),[2];T(Yc(v,l.error))}u.label=8;case 8:return g.push(Xc(e)),[2]}}))}))}(e)},className:i?"media-type-row disabled":"media-type-row"},ae().createElement("td",null,ae().createElement("span",{className:I(e)})),ae().createElement("td",{className:"media-type-label"},u),ae().createElement("td",{className:"media-type-selector"},ae().createElement("span",{className:"icon-next"}),ae().createElement("div",{className:"icon-placeholder"}))):null}l(v.Label.TwoStepVerification);var _=h?Aa:_a.Modal.Body,N=h?"inline-challenge-lock-icon":"modal-lock-icon",A=h?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge",L=h?"":"modal-margin-bottom-large",w=h?"inline-challenge-margin-top-large":"modal-margin-bottom-large";return ae().createElement(_,null,ae().createElement("div",{className:N}),ae().createElement("p",{className:A},v.Label.ChooseAlternateMediaType),ae().createElement("table",{className:"table table-striped media-type-list "+L},ae().createElement("tbody",null,y.map((function(e,t){return S(e,t)})))),b?ae().createElement("p",{className:"text-error xsmall "+w},b):null,u)}function as(e){var t=e.requestInFlight,n=e.className,r=ns().state,a=r.renderInline,i=r.resources,o=(0,cu.useHistory)(),l=a?"inline-challenge-body-button-link":"modal-body-button-link";return ae().createElement("p",{className:n},ae().createElement("button",{type:"button",className:l+" small",onClick:function(){o.push(Xc(null))},disabled:t},i.Action.ChangeMediaType))}function is(e){var t=e.disabled,n=e.rememberDevice,r=e.setRememberDevice,a=e.className,i=ns().state.resources;return ae().createElement("p",{className:a},ae().createElement("input",{id:"remember-device",type:"checkbox",onChange:function(e){r(e.target.checked)},checked:n,disabled:t,tabIndex:0})," ",ae().createElement("label",{htmlFor:"remember-device"},i.Label.TrustThisDevice))}function os(e){var t=e.className,n=ns().state.resources,r=n.Label.NeedHelpContactSupport('<a class="text-name text-footer contact" href="https://www.roblox.com/info/2sv" target="_blank" rel="noopener noreferrer">'+n.Label.RobloxSupport+"</a>");return ae().createElement("p",{className:"text-footer"+(t?" "+t:""),dangerouslySetInnerHTML:{__html:r}})}var ls=/^[0-9]*$/,us=/^[A-Za-z0-9]*$/;function cs(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ns(),i=a.state,o=i.userId,l=i.challengeId,u=i.actionType,c=i.renderInline,s=i.shouldShowRememberDeviceCheckbox,d=i.metadata,p=i.resources,f=i.eventService,h=i.metricsService,v=i.requestService,m=a.dispatch,y=Jc(),E=(0,re.useState)(""),g=E[0],C=E[1],b=(0,re.useState)(null),T=b[0],I=b[1],S=(0,re.useState)(null),_=S[0],N=S[1],A=(0,re.useState)(!1),L=(A[0],A[1]);function w(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return n(!0),N(null),f.sendCodeSubmittedEvent(y),[4,v.twoStepVerification.verifyAuthenticatorCode(o,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(y,hn[e.error||hn.UNKNOWN]),e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?(m({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}),[2]):(n(!1),N(Yc(p,e.error)),[2])):(f.sendCodeVerifiedEvent(y),h.fireVerifiedEvent(y),m({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:!0}}),[2])}}))}))}var D=null===T&&g.length===(null==d?void 0:d.authenticatorCodeLength),O={content:t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):p.Action.Verify,label:p.Action.Verify,enabled:!t&&D,action:w},R=c?Aa:_a.Modal.Body,P=c?Xa:Qa,M=c?"inline-challenge-lock-icon":"modal-lock-icon",k=c?"inline-challenge-margin-bottom":"modal-margin-bottom",x=c?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return d&&ae().createElement(ae().Fragment,null,ae().createElement(R,null,ae().createElement("div",{className:M}),ae().createElement("p",{className:x},p.Label.EnterAuthenticatorCode),ae().createElement(Lu,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:C,error:_||T,setError:I,validate:Nu,canSubmit:D,handleSubmit:w,onChange:function(){return N(null)},inputMode:"numeric",autoComplete:"off",placeholder:p.Label.CodeInputPlaceholderText(d.authenticatorCodeLength),maxLength:d.authenticatorCodeLength,validCharactersRegEx:ls,hideFeedback:!0,concealInput:!0,autoFocus:!0}),s&&ae().createElement(is,{disabled:t,rememberDevice:!0,setRememberDevice:L,className:x}),r),ae().createElement(P,{positiveButton:O,negativeButton:null},ae().createElement(os,{className:k}),ae().createElement("p",{className:"text-footer"},p.Description.SecurityWarningShort)))}function ss(e){var t=e.disabled,n=e.setCodeError,r=e.mediaType,a=e.className,i=ns(),o=i.state,l=o.userId,u=o.challengeId,c=o.actionType,s=o.renderInline,d=o.resources,p=o.eventService,f=o.requestService,h=i.dispatch,v=(0,re.useState)(!1),m=v[0],y=v[1];if(m)return ae().createElement("p",{className:a},ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}));var E=s?"inline-challenge-body-button-link":"modal-body-button-link";return ae().createElement("p",{className:a},ae().createElement("button",{type:"button",className:E+" small",onClick:function(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,a;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(i){switch(i.label){case 0:return e=null,y(!0),r!==mc.Email?[3,2]:(p.sendEmailResendRequestedEvent(),[4,f.twoStepVerification.sendEmailCode(l,{challengeId:u,actionType:c})]);case 1:return(t=i.sent()).isError&&(e=t.error),[3,4];case 2:return r!==mc.SMS?[3,4]:(p.sendSmsResendRequestedEvent(),[4,f.twoStepVerification.sendSmsCode(l,{challengeId:u,actionType:c})]);case 3:(a=i.sent()).isError&&(e=a.error),i.label=4;case 4:return y(!1),null!=e&&(e===hn.INVALID_USER_ID||e===hn.INVALID_CHALLENGE_ID?h({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e)}):n(Yc(d,e))),[2]}}))}))},disabled:t||m},d.Action.Resend))}function ds(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ns(),i=a.state,o=i.userId,l=i.challengeId,u=i.actionType,c=i.renderInline,s=i.shouldShowRememberDeviceCheckbox,d=i.resources,p=i.metadata,f=i.eventService,h=i.metricsService,v=i.requestService,m=a.dispatch,y=Jc(),E=(0,re.useState)(""),g=E[0],C=E[1],b=(0,re.useState)(null),T=b[0],I=b[1],S=(0,re.useState)(null),_=S[0],N=S[1],A=(0,re.useState)(!1),L=(A[0],A[1]);function w(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return n(!0),N(null),f.sendCodeSubmittedEvent(y),[4,v.twoStepVerification.verifyEmailCode(o,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(y,hn[e.error||hn.UNKNOWN]),e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?(m({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}),[2]):(n(!1),N(Yc(d,e.error)),[2])):(f.sendCodeVerifiedEvent(y),h.fireVerifiedEvent(y),m({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:!0}}),[2])}}))}))}var D=null===T&&g.length===(null==p?void 0:p.emailCodeLength),O={content:t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&D,action:w},R=c?Aa:_a.Modal.Body,P=c?Xa:Qa,M=c?"inline-challenge-lock-icon":"modal-lock-icon",k=c?"inline-challenge-margin-bottom":"modal-margin-bottom",x=c?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return p&&ae().createElement(ae().Fragment,null,ae().createElement(R,null,ae().createElement("div",{className:M}),ae().createElement("p",{className:x},d.Label.EnterEmailCode),ae().createElement(Lu,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:C,error:_||T,setError:I,validate:Nu,canSubmit:D,handleSubmit:w,onChange:function(){return N(null)},inputMode:"numeric",autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(p.emailCodeLength),maxLength:p.emailCodeLength,validCharactersRegEx:ls,hideFeedback:!0,concealInput:!0,autoFocus:!0}),s&&ae().createElement(is,{disabled:t,rememberDevice:!0,setRememberDevice:L,className:x}),ae().createElement(ss,{disabled:t,setCodeError:I,mediaType:y}),r),ae().createElement(P,{positiveButton:O,negativeButton:null},ae().createElement(os,{className:k}),ae().createElement("p",{className:"text-footer"},d.Description.SecurityWarningShort)))}function ps(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ns(),i=a.state,o=i.userId,l=i.challengeId,u=i.actionType,c=i.renderInline,s=i.shouldShowRememberDeviceCheckbox,d=i.resources,p=i.eventService,f=i.metricsService,h=i.requestService,v=a.dispatch,m=Jc(),y=(0,re.useState)(""),E=y[0],g=y[1],C=(0,re.useState)(null),b=C[0],T=C[1],I=(0,re.useState)(null),S=I[0],_=I[1],N=(0,re.useState)(!1),A=(N[0],N[1]);function L(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return n(!0),_(null),p.sendCodeSubmittedEvent(m),[4,h.twoStepVerification.verifyRecoveryCode(o,{challengeId:l,actionType:u,code:E})];case 1:return(e=t.sent()).isError?(p.sendCodeVerificationFailedEvent(m,hn[e.error||hn.UNKNOWN]),e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?(v({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}),[2]):(n(!1),_(Yc(d,e.error)),[2])):(p.sendCodeVerifiedEvent(m),f.fireVerifiedEvent(m),v({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:!0}}),[2])}}))}))}var w=null===b&&9===E.length,D={content:t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&w,action:L},O=c?Aa:_a.Modal.Body,R=c?Xa:Qa,P=c?"inline-challenge-lock-icon":"modal-lock-icon",M=c?"inline-challenge-margin-bottom":"modal-margin-bottom",k=c?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return ae().createElement(ae().Fragment,null,ae().createElement(O,null,ae().createElement("div",{className:P}),ae().createElement("p",{className:k},d.Label.EnterRecoveryCode),ae().createElement(Lu,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:E,setValue:g,error:S||b,setError:T,validate:Nu,canSubmit:w,handleSubmit:L,onChange:function(){return _(null)},autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(9),maxLength:9,validCharactersRegEx:us,hideFeedback:!0,concealInput:!0,autoFocus:!0}),s&&ae().createElement(is,{disabled:t,rememberDevice:!0,setRememberDevice:A,className:k}),r),ae().createElement(R,{positiveButton:D,negativeButton:null},ae().createElement(os,{className:M}),ae().createElement("p",{className:"text-footer"},d.Description.SecurityWarningShortBackupCodes)))}function fs(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ns(),i=a.state,o=i.userId,l=i.challengeId,u=i.actionType,c=i.renderInline,s=i.shouldShowRememberDeviceCheckbox,d=i.resources,p=i.metadata,f=i.eventService,h=i.metricsService,v=i.requestService,m=a.dispatch,y=Jc(),E=(0,re.useState)(null),g=E[0],C=E[1],b=(0,re.useState)(!1),T=(b[0],b[1]);function I(e,t){t&&f.sendCodeVerificationFailedEvent(y,hn[e||hn.UNKNOWN]),e!==hn.INVALID_USER_ID&&e!==hn.INVALID_CHALLENGE_ID?(n(!1),C(Yc(d,e))):m({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e)})}var S=c?Aa:_a.Modal.Body,_=c?"inline-challenge-lock-icon":"modal-lock-icon",N=c?"inline-challenge-margin-bottom":"modal-margin-bottom",A=c?"inline-challenge-action-button":"modal-action-button";A=(A=A.concat(" ","btn-cta-md")).concat(" ",N);var L=(c?"inline-margin-bottom-xlarge":"modal-margin-bottom-xlarge").concat(" ","text-error xsmall"),w=c?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm";return p&&ae().createElement(ae().Fragment,null,ae().createElement(S,null,ae().createElement("div",{className:_}),ae().createElement("p",{className:w},d.Label.VerifyWithSecurityKey),ae().createElement("p",{className:N},d.Label.SecurityKeyDirections),ae().createElement("button",{type:"button",className:A,"aria-label":d.Action.Verify,disabled:t,onClick:function(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,r,a,i,c,s;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(d){switch(d.label){case 0:return n(!0),C(null),[4,v.twoStepVerification.getSecurityKeyOptions(o,{challengeId:l,actionType:u})];case 1:return(e=d.sent()).isError?(I(e.error,!0),[2]):(t=!H.DeviceMeta||!(0,H.DeviceMeta)().isInApp||!(0,H.DeviceMeta)().isAndroidApp,(r=t?Nn.fido2Util.convertPublicKeyParametersToStandardBase64(e.value.authenticationOptions):JSON.parse(e.value.authenticationOptions)).publicKey?(a="",H.DeviceMeta&&(0,H.DeviceMeta)().isInApp?[4,Nn.hybridResponseService.getNativeResponse(Nn.hybridResponseService.FeatureTarget.GET_CREDENTIALS,{authenticationOptionsJSON:JSON.stringify(r)},3e5).catch((function(){I(hn.UNKNOWN,!1)}))]:[3,3]):(I(hn.UNKNOWN,!1),[2]));case 2:if(null==(i=d.sent()))return I(hn.UNKNOWN,!1),[2];if(void 0!==(c=JSON.parse(i)).errorCode)return I(hn.UNKNOWN,!1),[2];try{a=t?Nn.fido2Util.formatCredentialAuthenticationResponseApp(i):i}catch(e){return I(hn.UNKNOWN,!1),[2]}return[3,5];case 3:return[4,navigator.credentials.get({publicKey:Nn.fido2Util.formatCredentialRequestWeb(JSON.stringify(r))}).catch((function(){I(hn.UNKNOWN,!1)}))];case 4:c=d.sent();try{a=Nn.fido2Util.formatCredentialAuthenticationResponseWeb(c)}catch(e){return I(hn.UNKNOWN,!1),[2]}d.label=5;case 5:return[4,v.twoStepVerification.verifySecurityKeyCredential(o,{challengeId:l,actionType:u,code:a})];case 6:return(s=d.sent()).isError?(I(s.error,!0),[2]):(f.sendCodeVerifiedEvent(y),h.fireVerifiedEvent(y),m({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:s.value.verificationToken,rememberDevice:!0}}),[2])}}))}))}},t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify),s&&ae().createElement(is,{disabled:t,rememberDevice:!0,setRememberDevice:T,className:N}),r,ae().createElement(os,{className:N}),ae().createElement("p",{className:L},g)))}function hs(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ns(),i=a.state,o=i.userId,l=i.challengeId,u=i.actionType,c=i.renderInline,s=i.shouldShowRememberDeviceCheckbox,d=i.resources,p=i.metadata,f=i.eventService,h=i.metricsService,v=i.requestService,m=a.dispatch,y=Jc(),E=(0,re.useState)(""),g=E[0],C=E[1],b=(0,re.useState)(null),T=b[0],I=b[1],S=(0,re.useState)(null),_=S[0],N=S[1],A=(0,re.useState)(!1),L=(A[0],A[1]);function w(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return n(!0),N(null),f.sendCodeSubmittedEvent(y),[4,v.twoStepVerification.verifySmsCode(o,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(y,hn[e.error||hn.UNKNOWN]),e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?(m({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}),[2]):(n(!1),N(Yc(d,e.error)),[2])):(f.sendCodeVerifiedEvent(y),h.fireVerifiedEvent(y),m({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:!0}}),[2])}}))}))}var D=null===T&&g.length===(null==p?void 0:p.emailCodeLength),O={content:t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&D,action:w},R=c?Aa:_a.Modal.Body,P=c?Xa:Qa,M=c?"inline-challenge-lock-icon":"modal-lock-icon",k=c?"inline-challenge-margin-bottom":"modal-margin-bottom",x=c?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return p&&ae().createElement(ae().Fragment,null,ae().createElement(R,null,ae().createElement("div",{className:M}),ae().createElement("p",{className:x},d.Label.EnterTextCode),ae().createElement(Lu,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:C,error:_||T,setError:I,validate:Nu,canSubmit:D,handleSubmit:w,onChange:function(){return N(null)},inputMode:"numeric",autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(p.emailCodeLength),maxLength:p.emailCodeLength,validCharactersRegEx:ls,hideFeedback:!0,concealInput:!0,autoFocus:!0}),s&&ae().createElement(is,{disabled:t,rememberDevice:!0,setRememberDevice:L,className:x}),ae().createElement(ss,{disabled:t,setCodeError:I,mediaType:y}),r),ae().createElement(P,{positiveButton:O,negativeButton:null},ae().createElement(os,{className:k}),ae().createElement("p",{className:"text-footer"},d.Description.SecurityWarningShort)))}function vs(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.setModalTitleText,a=e.setShowChangeMediaType,i=e.children,o=ns(),l=o.state,u=l.userId,c=l.challengeId,s=l.actionType,d=l.renderInline,p=l.resources,f=l.metadata,h=l.eventService,v=l.metricsService,m=l.requestService,y=l.onModalChallengeAbandoned,E=o.dispatch,g=Jc(),C=(0,re.useState)(null),b=C[0],T=C[1],I=(0,re.useState)(p.Label.ApproveWithDevice),S=I[0],_=I[1],N=(0,re.useState)(!0),A=N[0],L=N[1],w=(0,re.useState)(!1),D=w[0],O=w[1],R=(0,re.useState)(0),P=R[0],M=R[1],k=(0,re.useState)(!1),x=k[0],V=k[1];function H(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return P>=4?[4,m.twoStepVerification.retractCrossDevice(u,{challengeId:c,actionType:s})]:[3,2];case 1:return t.sent(),r(p.Heading.LoginError),_(p.Description.LoginExpired),a(!1),L(!1),O(!0),[2];case 2:return M(P+1),n(!0),T(null),r(p.Label.NewLogin),_(p.Label.ApproveWithDevice),[4,m.twoStepVerification.retryCrossDevice(u,{challengeId:c,actionType:s})];case 3:return(e=t.sent()).isError?(h.sendCodeVerificationFailedEvent(g,hn[e.error||hn.UNKNOWN]),e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?(E({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}),[2]):(n(!1),T(Yc(p,e.error)),[2])):(P>0&&V(!0),n(!1),[2])}}))}))}var W=d?Aa:_a.Modal.Body,U=d?"inline-challenge-margin-bottom":"modal-margin-bottom",G=d?"inline-challenge-action-button":"modal-action-button";G=(G=G.concat(" ","btn-secondary-md")).concat(" ",U);var F=d?"inline-challenge-action-button":"modal-action-button";F=(F=F.concat(" ","btn-cta-md")).concat(" ",U);var z=(d?"inline-margin-bottom-xlarge":"modal-margin-bottom-xlarge").concat(" ","text-error xsmall"),B=d?"inline-challenge-lock-icon":"modal-lock-icon";return(0,re.useEffect)((function(){if(x){var e=setTimeout((function(){V(!1)}),3e3);return function(){return clearTimeout(e)}}}),[x]),(0,re.useEffect)((function(){H().then((function(){return T(null)})).catch((function(){return T(Yc(p,hn.UNKNOWN))}));var e=setInterval((function(){m.twoStepVerification.verifyCrossDevice(u,{challengeId:c,actionType:s}).then((function(t){if(t.isError){if(h.sendCodeVerificationFailedEvent(g,hn[t.error||hn.UNKNOWN]),t.error===hn.CHALLENGE_DENIED)return r(p.Heading.LoginDenied),_(p.Description.LoginDenied),a(!1),L(!1),void clearInterval(e);if(t.error===hn.CROSS_DEVICE_DIALOG_EXPIRED)return r(p.Heading.LoginError),_(p.Description.LoginExpired),a(!1),L(!1),O(!0),void clearInterval(e);if(t.error===hn.INVALID_USER_ID||t.error===hn.INVALID_CHALLENGE_ID)return void E({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(t.error)});T(Yc(p,t.error))}else t.value.verificationToken&&(h.sendCodeVerifiedEvent(g),v.fireVerifiedEvent(g),E({type:Mc.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:t.value.verificationToken,rememberDevice:!1}}))})).catch((function(){return T(Yc(p,hn.UNKNOWN))}))}),1e3);return function(){clearInterval(e)}}),[]),f&&ae().createElement(ae().Fragment,null,ae().createElement(W,null,ae().createElement("div",{className:B}),ae().createElement("p",{className:U},S),A?ae().createElement("button",{type:"button",className:G,"aria-label":p.Action.Retry,disabled:t,onClick:H},t||x?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):p.Action.Retry):ae().createElement("button",{type:"button",className:F,"aria-label":p.Action.Okay,disabled:t,onClick:function(){E({type:Mc.HIDE_MODAL_CHALLENGE}),h.sendChallengeAbandonedEvent(g),v.fireAbandonedEvent(),null!==y&&setTimeout((function(){return y((function(){return E({type:Mc.SHOW_MODAL_CHALLENGE})}))}),Gc)}},t?ae().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):p.Action.Okay),A?i:null,A||D?ae().createElement("p",{className:"text-footer "+U,dangerouslySetInnerHTML:{__html:p.Label.HelpCenterLink('<a class="text-name text-footer contact" href="https://www.roblox.com/info/2sv" target="_blank" rel="noopener noreferrer">'+p.Label.HelpCenter+"</a>")}}):null,ae().createElement("p",{className:z},b)))}function ms(){var e=ns(),t=e.state,n=t.userId,r=t.challengeId,a=t.actionType,i=t.renderInline,o=t.metadata,l=t.enabledMediaTypes,u=t.resources,c=t.eventService,s=t.metricsService,d=t.requestService,p=t.onModalChallengeAbandoned,f=t.isModalVisible,h=e.dispatch,v=Jc(),m=(0,cu.useHistory)(),y=(0,re.useState)(!1),E=y[0],g=y[1],C=(0,re.useState)(!1),b=C[0],T=C[1],I=(0,re.useState)(null),S=I[0],_=I[1],N=(0,re.useState)(!1),A=N[0],L=N[1],w=(0,re.useState)(u.Label.TwoStepVerification),D=w[0],O=w[1],R=(0,re.useState)(!0),P=R[0],M=R[1];function k(){h({type:Mc.HIDE_MODAL_CHALLENGE}),c.sendChallengeAbandonedEvent(v),s.fireAbandonedEvent(),v===mc.CrossDevice&&d.twoStepVerification.retractCrossDevice(n,{challengeId:r,actionType:a}),null!==p&&setTimeout((function(){return p((function(){return h({type:Mc.SHOW_MODAL_CHALLENGE})}))}),Gc)}function x(){return function(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e,t,i,l,s,p,f,v;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(y){switch(y.label){case 0:return _(null),null!==o?[2]:[4,d.twoStepVerification.getMetadata({userId:n,challengeId:r,actionType:a})];case 1:return(e=y.sent()).isError?(e.error===hn.INVALID_USER_ID||e.error===hn.INVALID_CHALLENGE_ID?h({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(e.error)}):_(Yc(u,e.error)),[2]):[4,d.twoStepVerification.getUserConfiguration(n,{challengeId:r,actionType:a})];case 2:if((t=y.sent()).isError)return t.error===hn.INVALID_USER_ID||t.error===hn.INVALID_CHALLENGE_ID?h({type:Mc.SET_CHALLENGE_INVALIDATED,errorCode:Kc(t.error)}):_(Yc(u,t.error)),[2];h({type:Mc.SET_METADATA,metadata:e.value}),i=mc[t.value.primaryMediaType]||null,l=H.DeviceMeta&&(0,H.DeviceMeta)().isInApp,s=!0;try{(l||void 0===PublicKeyCredential)&&(s=!1)}catch(e){s=!1}return p=H.DeviceMeta&&((0,H.DeviceMeta)().isIosApp||(0,H.DeviceMeta)().isAndroidApp&&e.value.isAndroidSecurityKeyEnabled),f=!1,i===mc.SecurityKey&&l&&p&&e.value.isSecurityKeyOnAllPlatformsEnabled?[4,Nn.hybridResponseService.getNativeResponse(Nn.hybridResponseService.FeatureTarget.CREDENTIALS_PROTOCOL_AVAILABLE,{},2e3)]:[3,4];case 3:"true"===y.sent()&&(f=!0),y.label=4;case 4:return i!==mc.SecurityKey||s||f||(i=mc.Authenticator),m.replace(Xc(i)),i===mc.Email&&g(!0),0!==(v=t.value.methods.filter((function(e){return e.enabled})).map((function(e){var t=e.mediaType;return mc[t]||null}))).length&&i||c.sendNoEnabledMethodsReturnedEvent(i,t.value.methods.length),!v.includes(mc.SecurityKey)||s||f||v.splice(v.indexOf(mc.SecurityKey),1),v.length>0&&a===vc.Login&&!v.includes(mc.RecoveryCode)&&v.push(mc.RecoveryCode),h({type:Mc.SET_USER_CONFIGURATION,userConfiguration:t.value,enabledMediaTypes:v}),c.sendUserConfigurationLoadedEvent(i),[2]}}))}))}(0,re.useEffect)((function(){x()}),[]);var V={content:u.Action.Reload,label:u.Action.Reload,enabled:null!==S,action:x};function W(){var e,t=i?Aa:_a.Modal.Body,n=i?Xa:Qa;return S?ae().createElement(ae().Fragment,null,ae().createElement(t,null,ae().createElement("p",null,S)),ae().createElement(n,{positiveButton:V,negativeButton:null})):o?(e=ae().createElement(ae().Fragment,null,v&&l.length>1&&P&&ae().createElement(as,{requestInFlight:A})),ae().createElement(cu.Switch,null,ae().createElement(cu.Route,{path:Xc(mc.Authenticator)},ae().createElement(cs,{requestInFlight:A,setRequestInFlight:L},e)),ae().createElement(cu.Route,{path:Xc(mc.Email)},ae().createElement(ds,{requestInFlight:A,setRequestInFlight:L},e)),ae().createElement(cu.Route,{path:Xc(mc.RecoveryCode)},ae().createElement(ps,{requestInFlight:A,setRequestInFlight:L},e)),ae().createElement(cu.Route,{path:Xc(mc.SMS)},ae().createElement(hs,{requestInFlight:A,setRequestInFlight:L},e)),ae().createElement(cu.Route,{path:Xc(mc.SecurityKey)},ae().createElement(fs,{requestInFlight:A,setRequestInFlight:L},e)),ae().createElement(cu.Route,{path:Xc(mc.CrossDevice)},ae().createElement(vs,{requestInFlight:A,setRequestInFlight:L,setModalTitleText:O,setShowChangeMediaType:M},e)),ae().createElement(cu.Route,null,ae().createElement(rs,{hasSentEmailCode:E,setHasSentEmailCode:g,hasSentSmsCode:b,setHasSentSmsCode:T,requestInFlight:A,setRequestInFlight:L,setModalTitleText:O},e)))):ae().createElement(t,null,ae().createElement("span",{className:"spinner spinner-default spinner-no-margin modal-margin-bottom-large"}))}return i?ae().createElement(Na,{titleText:D},W()):ae().createElement(_a.Modal,{className:"modal-modern",show:f,onHide:k,backdrop:"static"},ae().createElement($a,{headerText:D,buttonType:Ea.CLOSE,buttonAction:k,buttonEnabled:!A,headerInfo:null}),W())}var ys,Es,gs=(0,ga.withTranslations)((function(e){var t=e.userId,n=e.challengeId,r=e.actionType,a=e.renderInline,i=e.shouldModifyBrowserHistory,o=e.shouldShowRememberDeviceCheckbox,l=e.eventService,u=e.metricsService,c=e.requestService,s=e.translate,d=e.onChallengeCompleted,p=e.onChallengeInvalidated,f=e.onModalChallengeAbandoned,h=ae().createElement(ts,{userId:t,challengeId:n,actionType:r,renderInline:a,shouldShowRememberDeviceCheckbox:o,eventService:l,metricsService:u,requestService:c,translate:s,onChallengeCompleted:d,onChallengeInvalidated:p,onModalChallengeAbandoned:f},ae().createElement(ms,null));return i?ae().createElement(au.HashRouter,{hashType:"noslash"},h):ae().createElement(au.MemoryRouter,null,h)}),{common:[],feature:"Authentication.TwoStepVerification"}),Cs=function(){function e(e,t){this.challengeId=e,this.targetUserId=t}return e.prototype.sendChallengeInitializedEvent=function(){W().EventStream.SendEventWithTarget(Fc,"challengeInitialized",{challengeId:this.challengeId,targetUserId:this.targetUserId},W().EventStream.TargetTypes.WWW)},e.prototype.sendUserConfigurationLoadedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"userConfigurationLoaded",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e.prototype.sendNoEnabledMethodsReturnedEvent=function(e,t){W().EventStream.SendEventWithTarget(Fc,"noEnabledMethodsReturned",{challengeId:this.challengeId,targetUserId:this.targetUserId,primaryMediaType:e||"",methodsReturned:t},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"challengeInvalidated",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"challengeAbandoned",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e.prototype.sendEmailResendRequestedEvent=function(){W().EventStream.SendEventWithTarget(Fc,"emailResendRequested",{challengeId:this.challengeId,targetUserId:this.targetUserId},W().EventStream.TargetTypes.WWW)},e.prototype.sendSmsResendRequestedEvent=function(){W().EventStream.SendEventWithTarget(Fc,"smsResendRequested",{challengeId:this.challengeId,targetUserId:this.targetUserId},W().EventStream.TargetTypes.WWW)},e.prototype.sendMediaTypeChangedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"mediaTypeChanged",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeSubmittedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"codeSubmitted",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerificationFailedEvent=function(e,t){W().EventStream.SendEventWithTarget(Fc,"codeVerificationFailed",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||"",reason:t},W().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerifiedEvent=function(e){W().EventStream.SendEventWithTarget(Fc,"codeVerified",{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},W().EventStream.TargetTypes.WWW)},e}(),bs=function(){function e(e,t,n){this.appType=t||"unknown",this.actionType=e,this.solveTimeSequenceName=this.actionType+"_TwoStepVerification_SolveTime",this.eventTimer=new Za,this.requestServiceDefault=n}return e.prototype.fireInitializedEvent=function(){if(ja){var e=this.actionType+"_TwoStepVerification_"+zc;ja.fireEvent(e,e+"_"+this.appType),ja.start(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:zc,application_type:this.appType}}).catch((function(){})),this.eventTimer.start(this.solveTimeSequenceName)},e.prototype.fireVerifiedEvent=function(e){if(null!==e){if(ja){var t=this.actionType+"_TwoStepVerification_"+Bc+e;ja.fireEvent(t,t+"_"+this.appType),ja.endSuccess(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:""+Bc+e,application_type:this.appType}}).catch((function(){}));var n=this.eventTimer.end(this.solveTimeSequenceName);null!==n&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTime2sv,value:n,labelValues:{action_type:this.actionType,event_type:""+Bc+e,application_type:this.appType}}).catch((function(){}))}},e.prototype.fireInvalidatedEvent=function(){if(ja){var e=this.actionType+"_TwoStepVerification_"+qc;ja.fireEvent(e,e+"_"+this.appType),ja.endFailure(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:qc,application_type:this.appType}}).catch((function(){}));var t=this.eventTimer.end(this.solveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTime2sv,value:t,labelValues:{action_type:this.actionType,event_type:qc,application_type:this.appType}}).catch((function(){}))},e.prototype.fireAbandonedEvent=function(){if(ja){var e=this.actionType+"_TwoStepVerification_"+Zc;ja.fireEvent(e,e+"_"+this.appType),ja.endCancel(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Pr.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:Zc,application_type:this.appType}}).catch((function(){}));var t=this.eventTimer.end(this.solveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Pr.SolveTime2sv,value:t,labelValues:{action_type:this.actionType,event_type:Zc,application_type:this.appType}}).catch((function(){}))},e}(),Ts=new ma;function Is(e){var t=e.containerId,n=e.userId,r=e.challengeId,a=e.appType,i=e.actionType,o=e.renderInline,l=e.shouldModifyBrowserHistory,u=e.shouldShowRememberDeviceCheckbox,c=e.onChallengeCompleted,s=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=document.getElementById(t);if(null!==p){(0,ie.unmountComponentAtNode)(p);var f=new Cs(r,n),h=new bs(i,a,Ts);return(0,ie.render)(ae().createElement(gs,{userId:n,challengeId:r,actionType:i,renderInline:o,shouldModifyBrowserHistory:l||!1,shouldShowRememberDeviceCheckbox:u,eventService:f,metricsService:h,requestService:Ts,onChallengeCompleted:c,onChallengeInvalidated:s,onModalChallengeAbandoned:d}),p),f.sendChallengeInitializedEvent(),h.fireInitializedEvent(),!0}return!1}var Ss="Generic Challenge:",_s="challengeClientAnalysisEventV1",Ns={onCompleted:"onCompleted"};!function(e){e.CAPTCHA="captcha",e.FORCE_AUTHENTICATOR="forceauthenticator",e.FORCE_TWO_STEP_VERIFICATION="forcetwostepverification",e.TWO_STEP_VERIFICATION="twostepverification",e.SECURITY_QUESTIONS="securityquestions",e.REAUTHENTICATION="reauthentication",e.PROOF_OF_WORK="proofofwork",e.ROSTILE="rostile",e.PRIVATE_ACCESS_TOKEN="privateaccesstoken",e.DEVICE_INTEGRITY="deviceintegrity",e.PROOF_OF_SPACE="proofofspace"}(kc||={});var As,Ls=kc;!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(ys||={}),function(e){e.UNKNOWN="unknown",e.ABANDONED="abandoned",e.INVALIDATED="invalidated"}(Es||={});var ws=function(){function e(){}return e.prototype.fireSuccessEvent=function(e){qr({name:Pr.EventGeneric,value:1,labelValues:{event_type:"Success",challenge_type:e}}).catch((function(){}))},e.prototype.fireParseFailureEvent=function(){qr({name:Pr.EventGeneric,value:1,labelValues:{event_type:"ParseFailure",challenge_type:"unknown"}}).catch((function(){}))},e.prototype.fireRenderFailureEvent=function(e){qr({name:Pr.EventGeneric,value:1,labelValues:{event_type:"RenderFailure",challenge_type:e}}).catch((function(){}))},e.prototype.fireContinueFailureEvent=function(e){qr({name:Pr.EventGeneric,value:1,labelValues:{event_type:"ContinueFailure",challenge_type:e}}).catch((function(){}))},e}();function Ds(e,t){return(Ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)}function Os(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ds(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Rs(){return(Rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function Ps(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Ms(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}function ks(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(e,t){var n,r,a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o}function Vs(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xs(arguments[t]));return e}"function"==typeof SuppressedError&&SuppressedError,function(e){e.assertNever=function(e){throw new Error},e.arrayToEnum=function(e){var t,n,r={};try{for(var a=ks(e),i=a.next();!i.done;i=a.next()){var o=i.value;r[o]=o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},e.getValidEnumValues=function(t){var n,r,a=e.objectKeys(t).filter((function(e){return"number"!=typeof t[t[e]]})),i={};try{for(var o=ks(a),l=o.next();!l.done;l=o.next()){var u=l.value;i[u]=t[u]}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e.objectValues(i)},e.objectValues=function(t){return e.objectKeys(t).map((function(e){return t[e]}))},e.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=function(e,t){var n,r;try{for(var a=ks(e),i=a.next();!i.done;i=a.next()){var o=i.value;if(t(o))return o}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.joinValues=function(e,t=" | "){return e.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(t)}}(As||={});var Hs=As.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);function Ws(e){switch(typeof e){case"undefined":return Hs.undefined;case"string":return Hs.string;case"number":return isNaN(e)?Hs.nan:Hs.number;case"boolean":return Hs.boolean;case"function":return Hs.function;case"bigint":return Hs.bigint;case"object":return Array.isArray(e)?Hs.array:null===e?Hs.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Hs.promise:"undefined"!=typeof Map&&e instanceof Map?Hs.map:"undefined"!=typeof Set&&e instanceof Set?Hs.set:"undefined"!=typeof Date&&e instanceof Date?Hs.date:Hs.object;default:return Hs.unknown}}var Us,Gs=As.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Fs=function(e){function t(t){var n=this.constructor,r=e.call(this)||this;r.issues=[],r.addIssue=function(e){r.issues=Vs(r.issues,[e])},r.addIssues=function(e=[]){r.issues=Vs(r.issues,e)};var a=n.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a,r.name="ZodError",r.issues=t,r}return Os(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.format=function(e){var t=e||function(e){return e.message},n={_errors:[]};return function e(r){var a,i;try{for(var o=ks(r.issues),l=o.next();!l.done;l=o.next()){var u=l.value;if("invalid_union"===u.code)u.unionErrors.map(e);else if("invalid_return_type"===u.code)e(u.returnTypeError);else if("invalid_arguments"===u.code)e(u.argumentsError);else if(0===u.path.length)n._errors.push(t(u));else for(var c=n,s=0;s<u.path.length;){var d=u.path[s];s===u.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(t(u))):c[d]=c[d]||{_errors:[]},c=c[d],s++}}}catch(r){a={error:r}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}}(this),n},t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),t.prototype.flatten=function(e){var t,n;void 0===e&&(e=function(e){return e.message});var r={},a=[];try{for(var i=ks(this.issues),o=i.next();!o.done;o=i.next()){var l=o.value;l.path.length>0?(r[l.path[0]]=r[l.path[0]]||[],r[l.path[0]].push(e(l))):a.push(e(l))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{formErrors:a,fieldErrors:r}},Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error);function zs(e,t){var n;switch(e.code){case Gs.invalid_type:n=e.received===Hs.undefined?"Required":"Expected "+e.expected+", received "+e.received;break;case Gs.invalid_literal:n="Invalid literal value, expected "+JSON.stringify(e.expected);break;case Gs.unrecognized_keys:n="Unrecognized key(s) in object: "+As.joinValues(e.keys,", ");break;case Gs.invalid_union:n="Invalid input";break;case Gs.invalid_union_discriminator:n="Invalid discriminator value. Expected "+As.joinValues(e.options);break;case Gs.invalid_enum_value:n="Invalid enum value. Expected "+As.joinValues(e.options)+", received '"+e.received+"'";break;case Gs.invalid_arguments:n="Invalid function arguments";break;case Gs.invalid_return_type:n="Invalid function return type";break;case Gs.invalid_date:n="Invalid date";break;case Gs.invalid_string:n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case Gs.too_small:n="array"===e.type?"Array must contain "+(e.inclusive?"at least":"more than")+" "+e.minimum+" element(s)":"string"===e.type?"String must contain "+(e.inclusive?"at least":"over")+" "+e.minimum+" character(s)":"number"===e.type?"Number must be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case Gs.too_big:n="array"===e.type?"Array must contain "+(e.inclusive?"at most":"less than")+" "+e.maximum+" element(s)":"string"===e.type?"String must contain "+(e.inclusive?"at most":"under")+" "+e.maximum+" character(s)":"number"===e.type?"Number must be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case Gs.custom:n="Invalid input";break;case Gs.invalid_intersection_types:n="Intersection results could not be merged";break;case Gs.not_multiple_of:n="Number must be a multiple of "+e.multipleOf;break;default:n=t.defaultError,As.assertNever(e)}return{message:n}}var Bs=zs;function qs(e){var t,n,r=e.data,a=e.path,i=e.errorMaps,o=e.issueData,l=Vs(a,o.path||[]),u=Rs(Rs({},o),{path:l}),c="",s=i.filter((function(e){return!!e})).slice().reverse();try{for(var d=ks(s),p=d.next();!p.done;p=d.next())c=(0,p.value)(u,{data:r,defaultError:c}).message}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return Rs(Rs({},o),{path:l,message:o.message||c})}function Zs(e,t){var n=qs({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Bs,zs].filter((function(e){return!!e}))});e.common.issues.push(n)}var js=function(){function e(){this.value="valid"}return e.prototype.dirty=function(){"valid"===this.value&&(this.value="dirty")},e.prototype.abort=function(){"aborted"!==this.value&&(this.value="aborted")},e.mergeArray=function(e,t){var n,r,a=[];try{for(var i=ks(t),o=i.next();!o.done;o=i.next()){var l=o.value;if("aborted"===l.status)return Ys;"dirty"===l.status&&e.dirty(),a.push(l.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return{status:e.value,value:a}},e.mergeObjectAsync=function(t,n){return Ps(this,void 0,void 0,(function(){var r,a,i,o,l,u,c,s,d,p;return Ms(this,(function(f){switch(f.label){case 0:r=[],f.label=1;case 1:f.trys.push([1,7,8,9]),a=ks(n),i=a.next(),f.label=2;case 2:return i.done?[3,6]:(o=i.value,u=(l=r).push,p={},[4,o.key]);case 3:return p.key=f.sent(),[4,o.value];case 4:u.apply(l,[(p.value=f.sent(),p)]),f.label=5;case 5:return i=a.next(),[3,2];case 6:return[3,9];case 7:return c=f.sent(),s={error:c},[3,9];case 8:try{i&&!i.done&&(d=a.return)&&d.call(a)}finally{if(s)throw s.error}return[7];case 9:return[2,e.mergeObjectSync(t,r)]}}))}))},e.mergeObjectSync=function(e,t){var n,r,a={};try{for(var i=ks(t),o=i.next();!o.done;o=i.next()){var l=o.value,u=l.key,c=l.value;if("aborted"===u.status)return Ys;if("aborted"===c.status)return Ys;"dirty"===u.status&&e.dirty(),"dirty"===c.status&&e.dirty(),(void 0!==c.value||l.alwaysSet)&&(a[u.value]=c.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return{status:e.value,value:a}},e}(),Ys=Object.freeze({status:"aborted"});function Ks(e){return{status:"valid",value:e}}function Js(e){return"aborted"===e.status}function Xs(e){return"dirty"===e.status}function Qs(e){return"valid"===e.status}function $s(e){return void 0!==typeof Promise&&e instanceof Promise}!function(e){e.errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},e.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message}}(Us||={});var ed,td=function(){function e(e,t,n,r){this.parent=e,this.data=t,this._path=n,this._key=r}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path.concat(this._key)},enumerable:!1,configurable:!0}),e}();function nd(e,t){if(Qs(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Fs(e.common.issues)}}function rd(e){if(!e)return{};var t=e.errorMap,n=e.invalid_type_error,r=e.required_error,a=e.description;if(t&&(n||r))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:function(t,n){return"invalid_type"!==t.code?{message:n.defaultError}:void 0===n.data&&r?{message:r}:e.invalid_type_error?{message:e.invalid_type_error}:{message:n.defaultError}},description:a}}var ad=function(){function e(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}return Object.defineProperty(e.prototype,"description",{get:function(){return this._def.description},enumerable:!1,configurable:!0}),e.prototype._getType=function(e){return Ws(e.data)},e.prototype._getOrReturnCtx=function(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}},e.prototype._processInputParams=function(e){return{status:new js,ctx:{common:e.parent.common,data:e.data,parsedType:Ws(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}},e.prototype._parseSync=function(e){var t=this._parse(e);if($s(t))throw new Error("Synchronous parse encountered promise.");return t},e.prototype._parseAsync=function(e){var t=this._parse(e);return Promise.resolve(t)},e.prototype.parse=function(e,t){var n=this.safeParse(e,t);if(n.success)return n.data;throw n.error},e.prototype.safeParse=function(e,t){var n,r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ws(e)};return nd(r,this._parseSync({data:e,path:r.path,parent:r}))},e.prototype.parseAsync=function(e,t){return Ps(this,void 0,void 0,(function(){var n;return Ms(this,(function(r){switch(r.label){case 0:return[4,this.safeParseAsync(e,t)];case 1:if((n=r.sent()).success)return[2,n.data];throw n.error}}))}))},e.prototype.safeParseAsync=function(e,t){return Ps(this,void 0,void 0,(function(){var n,r,a;return Ms(this,(function(i){switch(i.label){case 0:return n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ws(e)},[4,$s(r=this._parse({data:e,path:[],parent:n}))?r:Promise.resolve(r)];case 1:return a=i.sent(),[2,nd(n,a)]}}))}))},e.prototype.refine=function(e,t){return this._refinement((function(n,r){var a=e(n);function i(){return r.addIssue(Rs({code:Gs.custom},function(e){return"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t}(n)))}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return!!e||(i(),!1)})):!!a||(i(),!1)}))},e.prototype.refinement=function(e,t){return this._refinement((function(n,r){return!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)}))},e.prototype._refinement=function(e){return new Gd({schema:this,typeName:Td.ZodEffects,effect:{type:"refinement",refinement:e}})},e.prototype.optional=function(){return Fd.create(this)},e.prototype.nullable=function(){return zd.create(this)},e.prototype.nullish=function(){return this.optional().nullable()},e.prototype.array=function(){return gd.create(this)},e.prototype.promise=function(){return Ud.create(this)},e.prototype.or=function(e){return Sd.create([this,e])},e.prototype.and=function(e){return wd.create(this,e)},e.prototype.transform=function(e){return new Gd({schema:this,typeName:Td.ZodEffects,effect:{type:"transform",transform:e}})},e.prototype.default=function(e){return new Bd({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:Td.ZodDefault})},e.prototype.describe=function(e){return new(0,this.constructor)(Rs(Rs({},this._def),{description:e}))},e.prototype.isOptional=function(){return this.safeParse(void 0).success},e.prototype.isNullable=function(){return this.safeParse(null).success},e}(),id=/^c[^\s-]{8,}$/i,od=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ld=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,ud=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._regex=function(e,t,r){return n.refinement((function(t){return e.test(t)}),Rs({validation:t,code:Gs.invalid_string},Us.errToObj(r)))},n.nonempty=function(e){return n.min(1,Us.errToObj(e))},n.trim=function(){return new t(Rs(Rs({},n._def),{checks:Vs(n._def.checks,[{kind:"trim"}])}))},n}return Os(t,e),t.prototype._parse=function(e){var t,n;if(this._getType(e)!==Hs.string){var r=this._getOrReturnCtx(e);return Zs(r,{code:Gs.invalid_type,expected:Hs.string,received:r.parsedType}),Ys}var a=new js,i=void 0;try{for(var o=ks(this._def.checks),l=o.next();!l.done;l=o.next()){var u=l.value;if("min"===u.kind)e.data.length<u.value&&(Zs(i=this._getOrReturnCtx(e,i),{code:Gs.too_small,minimum:u.value,type:"string",inclusive:!0,message:u.message}),a.dirty());else if("max"===u.kind)e.data.length>u.value&&(Zs(i=this._getOrReturnCtx(e,i),{code:Gs.too_big,maximum:u.value,type:"string",inclusive:!0,message:u.message}),a.dirty());else if("email"===u.kind)ld.test(e.data)||(Zs(i=this._getOrReturnCtx(e,i),{validation:"email",code:Gs.invalid_string,message:u.message}),a.dirty());else if("uuid"===u.kind)od.test(e.data)||(Zs(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:Gs.invalid_string,message:u.message}),a.dirty());else if("cuid"===u.kind)id.test(e.data)||(Zs(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:Gs.invalid_string,message:u.message}),a.dirty());else if("url"===u.kind)try{new URL(e.data)}catch(t){Zs(i=this._getOrReturnCtx(e,i),{validation:"url",code:Gs.invalid_string,message:u.message}),a.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(e.data)||(Zs(i=this._getOrReturnCtx(e,i),{validation:"regex",code:Gs.invalid_string,message:u.message}),a.dirty())):"trim"===u.kind?e.data=e.data.trim():As.assertNever(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{status:a.value,value:e.data}},t.prototype._addCheck=function(e){return new t(Rs(Rs({},this._def),{checks:Vs(this._def.checks,[e])}))},t.prototype.email=function(e){return this._addCheck(Rs({kind:"email"},Us.errToObj(e)))},t.prototype.url=function(e){return this._addCheck(Rs({kind:"url"},Us.errToObj(e)))},t.prototype.uuid=function(e){return this._addCheck(Rs({kind:"uuid"},Us.errToObj(e)))},t.prototype.cuid=function(e){return this._addCheck(Rs({kind:"cuid"},Us.errToObj(e)))},t.prototype.regex=function(e,t){return this._addCheck(Rs({kind:"regex",regex:e},Us.errToObj(t)))},t.prototype.min=function(e,t){return this._addCheck(Rs({kind:"min",value:e},Us.errToObj(t)))},t.prototype.max=function(e,t){return this._addCheck(Rs({kind:"max",value:e},Us.errToObj(t)))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCUID",{get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(e){return new t(Rs({checks:[],typeName:Td.ZodString},rd(e)))},t}(ad),cd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=t.gte,t.max=t.lte,t.step=t.multipleOf,t}return Os(t,e),t.prototype._parse=function(e){var t,n,r,a,i,o,l;if(this._getType(e)!==Hs.number){var u=this._getOrReturnCtx(e);return Zs(u,{code:Gs.invalid_type,expected:Hs.number,received:u.parsedType}),Ys}var c=void 0,s=new js;try{for(var d=ks(this._def.checks),p=d.next();!p.done;p=d.next()){var f=p.value;"int"===f.kind?As.isInteger(e.data)||(Zs(c=this._getOrReturnCtx(e,c),{code:Gs.invalid_type,expected:"integer",received:"float",message:f.message}),s.dirty()):"min"===f.kind?(f.inclusive?e.data<f.value:e.data<=f.value)&&(Zs(c=this._getOrReturnCtx(e,c),{code:Gs.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,message:f.message}),s.dirty()):"max"===f.kind?(f.inclusive?e.data>f.value:e.data>=f.value)&&(Zs(c=this._getOrReturnCtx(e,c),{code:Gs.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,message:f.message}),s.dirty()):"multipleOf"===f.kind?0!=(r=e.data,a=f.value,l=(i=(r.toString().split(".")[1]||"").length)>(o=(a.toString().split(".")[1]||"").length)?i:o,parseInt(r.toFixed(l).replace(".",""))%parseInt(a.toFixed(l).replace(".",""))/Math.pow(10,l))&&(Zs(c=this._getOrReturnCtx(e,c),{code:Gs.not_multiple_of,multipleOf:f.value,message:f.message}),s.dirty()):As.assertNever(f)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return{status:s.value,value:e.data}},t.prototype.gte=function(e,t){return this.setLimit("min",e,!0,Us.toString(t))},t.prototype.gt=function(e,t){return this.setLimit("min",e,!1,Us.toString(t))},t.prototype.lte=function(e,t){return this.setLimit("max",e,!0,Us.toString(t))},t.prototype.lt=function(e,t){return this.setLimit("max",e,!1,Us.toString(t))},t.prototype.setLimit=function(e,n,r,a){return new t(Rs(Rs({},this._def),{checks:Vs(this._def.checks,[{kind:e,value:n,inclusive:r,message:Us.toString(a)}])}))},t.prototype._addCheck=function(e){return new t(Rs(Rs({},this._def),{checks:Vs(this._def.checks,[e])}))},t.prototype.int=function(e){return this._addCheck({kind:"int",message:Us.toString(e)})},t.prototype.positive=function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Us.toString(e)})},t.prototype.negative=function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Us.toString(e)})},t.prototype.nonpositive=function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Us.toString(e)})},t.prototype.nonnegative=function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Us.toString(e)})},t.prototype.multipleOf=function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Us.toString(t)})},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,n=null;try{for(var r=ks(this._def.checks),a=r.next();!a.done;a=r.next()){var i=a.value;"min"===i.kind&&(null===n||i.value>n)&&(n=i.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,n=null;try{for(var r=ks(this._def.checks),a=r.next();!a.done;a=r.next()){var i=a.value;"max"===i.kind&&(null===n||i.value<n)&&(n=i.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(e){return new t(Rs({checks:[],typeName:Td.ZodNumber},rd(e)))},t}(ad),sd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.bigint){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.bigint,received:t.parsedType}),Ys}return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodBigInt},rd(e)))},t}(ad),dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.boolean){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.boolean,received:t.parsedType}),Ys}return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodBoolean},rd(e)))},t}(ad),pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t;return this._getType(e)!==Hs.date?(Zs(t=this._getOrReturnCtx(e),{code:Gs.invalid_type,expected:Hs.date,received:t.parsedType}),Ys):isNaN(e.data.getTime())?(Zs(t=this._getOrReturnCtx(e),{code:Gs.invalid_date}),Ys):{status:"valid",value:new Date(e.data.getTime())}},t.create=function(e){return new t(Rs({typeName:Td.ZodDate},rd(e)))},t}(ad),fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.undefined){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.undefined,received:t.parsedType}),Ys}return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodUndefined},rd(e)))},t}(ad),hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.null){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.null,received:t.parsedType}),Ys}return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodNull},rd(e)))},t}(ad),vd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Os(t,e),t.prototype._parse=function(e){return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodAny},rd(e)))},t}(ad),md=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return Os(t,e),t.prototype._parse=function(e){return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodUnknown},rd(e)))},t}(ad),yd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.never,received:t.parsedType}),Ys},t.create=function(e){return new t(Rs({typeName:Td.ZodNever},rd(e)))},t}(ad),Ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.undefined){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.void,received:t.parsedType}),Ys}return Ks(e.data)},t.create=function(e){return new t(Rs({typeName:Td.ZodVoid},rd(e)))},t}(ad),gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.ctx,r=t.status,a=this._def;if(n.parsedType!==Hs.array)return Zs(n,{code:Gs.invalid_type,expected:Hs.array,received:n.parsedType}),Ys;if(null!==a.minLength&&n.data.length<a.minLength.value&&(Zs(n,{code:Gs.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&n.data.length>a.maxLength.value&&(Zs(n,{code:Gs.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((function(e,t){return a.type._parseAsync(new td(n,e,n.path,t))}))).then((function(e){return js.mergeArray(r,e)}));var i=n.data.map((function(e,t){return a.type._parseSync(new td(n,e,n.path,t))}));return js.mergeArray(r,i)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.prototype.min=function(e,n){return new t(Rs(Rs({},this._def),{minLength:{value:e,message:Us.toString(n)}}))},t.prototype.max=function(e,n){return new t(Rs(Rs({},this._def),{maxLength:{value:e,message:Us.toString(n)}}))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,n){return new t(Rs({type:e,minLength:null,maxLength:null,typeName:Td.ZodArray},rd(n)))},t}(ad);function Cd(e){return function(t){return new Id(Rs(Rs({},e),{shape:function(){return Rs(Rs({},e.shape()),t)}}))}}function bd(e){if(e instanceof Id){var t={};for(var n in e.shape){var r=e.shape[n];t[n]=Fd.create(bd(r))}return new Id(Rs(Rs({},e._def),{shape:function(){return t}}))}return e instanceof gd?gd.create(bd(e.element)):e instanceof Fd?Fd.create(bd(e.unwrap())):e instanceof zd?zd.create(bd(e.unwrap())):e instanceof Dd?Dd.create(e.items.map((function(e){return bd(e)}))):e}!function(e){e.mergeShapes=function(e,t){return Rs(Rs({},e),t)}}(ed||={});var Td,Id=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cached=null,t.nonstrict=t.passthrough,t.augment=Cd(t._def),t.extend=Cd(t._def),t}return Os(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=As.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e){var t,n,r,a,i,o,l=this;if(this._getType(e)!==Hs.object){var u=this._getOrReturnCtx(e);return Zs(u,{code:Gs.invalid_type,expected:Hs.object,received:u.parsedType}),Ys}var c=this._processInputParams(e),s=c.status,d=c.ctx,p=this._getCached(),f=p.shape,h=p.keys,v=[];for(var m in d.data)h.includes(m)||v.push(m);var y=[];try{for(var E=ks(h),g=E.next();!g.done;g=E.next()){var C=f[m=g.value],b=d.data[m];y.push({key:{status:"valid",value:m},value:C._parse(new td(d,b,d.path,m)),alwaysSet:m in d.data})}}catch(e){t={error:e}}finally{try{g&&!g.done&&(n=E.return)&&n.call(E)}finally{if(t)throw t.error}}if(this._def.catchall instanceof yd){var T=this._def.unknownKeys;if("passthrough"===T)try{for(var I=ks(v),S=I.next();!S.done;S=I.next())m=S.value,y.push({key:{status:"valid",value:m},value:{status:"valid",value:d.data[m]}})}catch(e){r={error:e}}finally{try{S&&!S.done&&(a=I.return)&&a.call(I)}finally{if(r)throw r.error}}else if("strict"===T)v.length>0&&(Zs(d,{code:Gs.unrecognized_keys,keys:v}),s.dirty());else if("strip"!==T)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var _=this._def.catchall;try{for(var N=ks(v),A=N.next();!A.done;A=N.next())m=A.value,b=d.data[m],y.push({key:{status:"valid",value:m},value:_._parse(new td(d,b,d.path,m)),alwaysSet:m in d.data})}catch(e){i={error:e}}finally{try{A&&!A.done&&(o=N.return)&&o.call(N)}finally{if(i)throw i.error}}}return d.common.async?Promise.resolve().then((function(){return Ps(l,void 0,void 0,(function(){var e,t,n,r,a,i,o,l,u,c,s;return Ms(this,(function(d){switch(d.label){case 0:e=[],d.label=1;case 1:d.trys.push([1,7,8,9]),t=ks(y),n=t.next(),d.label=2;case 2:return n.done?[3,6]:[4,(r=n.value).key];case 3:return a=d.sent(),o=(i=e).push,s={key:a},[4,r.value];case 4:o.apply(i,[(s.value=d.sent(),s.alwaysSet=r.alwaysSet,s)]),d.label=5;case 5:return n=t.next(),[3,2];case 6:return[3,9];case 7:return l=d.sent(),u={error:l},[3,9];case 8:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 9:return[2,e]}}))}))})).then((function(e){return js.mergeObjectSync(s,e)})):js.mergeObjectSync(s,y)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.prototype.strict=function(e){var n=this;return Us.errToObj,new t(Rs(Rs(Rs({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:function(t,r){var a,i,o=(null===(i=(a=n._def).errorMap)||void 0===i?void 0:i.call(a,t,r).message)??r.defaultError;return"unrecognized_keys"===t.code?{message:Us.errToObj(e).message??o}:{message:o}}}:{}))},t.prototype.strip=function(){return new t(Rs(Rs({},this._def),{unknownKeys:"strip"}))},t.prototype.passthrough=function(){return new t(Rs(Rs({},this._def),{unknownKeys:"passthrough"}))},t.prototype.setKey=function(e,t){var n;return this.augment(((n={})[e]=t,n))},t.prototype.merge=function(e){var n=this;return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return ed.mergeShapes(n._def.shape(),e._def.shape())},typeName:Td.ZodObject})},t.prototype.catchall=function(e){return new t(Rs(Rs({},this._def),{catchall:e}))},t.prototype.pick=function(e){var n=this,r={};return As.objectKeys(e).map((function(e){n.shape[e]&&(r[e]=n.shape[e])})),new t(Rs(Rs({},this._def),{shape:function(){return r}}))},t.prototype.omit=function(e){var n=this,r={};return As.objectKeys(this.shape).map((function(t){-1===As.objectKeys(e).indexOf(t)&&(r[t]=n.shape[t])})),new t(Rs(Rs({},this._def),{shape:function(){return r}}))},t.prototype.deepPartial=function(){return bd(this)},t.prototype.partial=function(e){var n=this,r={};if(e)return As.objectKeys(this.shape).map((function(t){-1===As.objectKeys(e).indexOf(t)?r[t]=n.shape[t]:r[t]=n.shape[t].optional()})),new t(Rs(Rs({},this._def),{shape:function(){return r}}));for(var a in this.shape){var i=this.shape[a];r[a]=i.optional()}return new t(Rs(Rs({},this._def),{shape:function(){return r}}))},t.prototype.required=function(){var e={};for(var n in this.shape){for(var r=this.shape[n];r instanceof Fd;)r=r._def.innerType;e[n]=r}return new t(Rs(Rs({},this._def),{shape:function(){return e}}))},t.create=function(e,n){return new t(Rs({shape:function(){return e},unknownKeys:"strip",catchall:yd.create(),typeName:Td.ZodObject},rd(n)))},t.strictCreate=function(e,n){return new t(Rs({shape:function(){return e},unknownKeys:"strict",catchall:yd.create(),typeName:Td.ZodObject},rd(n)))},t.lazycreate=function(e,n){return new t(Rs({shape:e,unknownKeys:"strip",catchall:yd.create(),typeName:Td.ZodObject},rd(n)))},t}(ad),Sd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t,n,r,a=this,i=this._processInputParams(e).ctx,o=this._def.options;if(i.common.async)return Promise.all(o.map((function(e){return Ps(a,void 0,void 0,(function(){var t,n;return Ms(this,(function(r){switch(r.label){case 0:return t=Rs(Rs({},i),{common:Rs(Rs({},i.common),{issues:[]}),parent:null}),n={},[4,e._parseAsync({data:i.data,path:i.path,parent:t})];case 1:return[2,(n.result=r.sent(),n.ctx=t,n)]}}))}))}))).then((function(e){var t,n,r,a,o;try{for(var l=ks(e),u=l.next();!u.done;u=l.next())if("valid"===(d=u.value).result.status)return d.result}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}try{for(var c=ks(e),s=c.next();!s.done;s=c.next()){var d;if("dirty"===(d=s.value).result.status)return(o=i.common.issues).push.apply(o,Vs(d.ctx.common.issues)),d.result}}catch(e){r={error:e}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}var p=e.map((function(e){return new Fs(e.ctx.common.issues)}));return Zs(i,{code:Gs.invalid_union,unionErrors:p}),Ys}));var l=void 0,u=[];try{for(var c=ks(o),s=c.next();!s.done;s=c.next()){var d=s.value,p=Rs(Rs({},i),{common:Rs(Rs({},i.common),{issues:[]}),parent:null}),f=d._parseSync({data:i.data,path:i.path,parent:p});if("valid"===f.status)return f;"dirty"!==f.status||l||(l={result:f,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(l)return(r=i.common.issues).push.apply(r,Vs(l.ctx.common.issues)),l.result;var h=u.map((function(e){return new Fs(e)}));return Zs(i,{code:Gs.invalid_union,unionErrors:h}),Ys},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(Rs({options:e,typeName:Td.ZodUnion},rd(n)))},t}(ad),_d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==Hs.object)return Zs(t,{code:Gs.invalid_type,expected:Hs.object,received:t.parsedType}),Ys;var n=this.discriminator,r=t.data[n],a=this.options.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Zs(t,{code:Gs.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[n]}),Ys)},Object.defineProperty(t.prototype,"discriminator",{get:function(){return this._def.discriminator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validDiscriminatorValues",{get:function(){return Array.from(this.options.keys())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,n,r){var a=new Map;try{n.forEach((function(t){var n=t.shape[e].value;a.set(n,t)}))}catch(e){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(a.size!==n.length)throw new Error("Some of the discriminator values are not unique");return new t(Rs({typeName:Td.ZodDiscriminatedUnion,discriminator:e,options:a},rd(r)))},t}(ad);function Nd(e,t){var n,r,a=Ws(e),i=Ws(t);if(e===t)return{valid:!0,data:e};if(a===Hs.object&&i===Hs.object){var o=As.objectKeys(t),l=As.objectKeys(e).filter((function(e){return-1!==o.indexOf(e)})),u=Rs(Rs({},e),t);try{for(var c=ks(l),s=c.next();!s.done;s=c.next()){var d=s.value;if(!(h=Nd(e[d],t[d])).valid)return{valid:!1};u[d]=h.data}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return{valid:!0,data:u}}if(a===Hs.array&&i===Hs.array){if(e.length!==t.length)return{valid:!1};for(var p=[],f=0;f<e.length;f++){var h;if(!(h=Nd(e[f],t[f])).valid)return{valid:!1};p.push(h.data)}return{valid:!0,data:p}}return a===Hs.date&&i===Hs.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Ad,Ld,wd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx;function a(e,t){if(Js(e)||Js(t))return Ys;var a=Nd(e.value,t.value);return a.valid?((Xs(e)||Xs(t))&&n.dirty(),{status:n.value,value:a.data}):(Zs(r,{code:Gs.invalid_intersection_types}),Ys)}return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((function(e){var t=xs(e,2);return a(t[0],t[1])})):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))},t.create=function(e,n,r){return new t(Rs({left:e,right:n,typeName:Td.ZodIntersection},rd(r)))},t}(ad),Dd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e),r=n.status,a=n.ctx;if(a.parsedType!==Hs.array)return Zs(a,{code:Gs.invalid_type,expected:Hs.array,received:a.parsedType}),Ys;if(a.data.length<this._def.items.length)return Zs(a,{code:Gs.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Ys;!this._def.rest&&a.data.length>this._def.items.length&&(Zs(a,{code:Gs.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),r.dirty());var i=a.data.map((function(e,n){var r=t._def.items[n]||t._def.rest;return r?r._parse(new td(a,e,a.path,n)):null})).filter((function(e){return!!e}));return a.common.async?Promise.all(i).then((function(e){return js.mergeArray(r,e)})):js.mergeArray(r,i)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.prototype.rest=function(e){return new t(Rs(Rs({},this._def),{rest:e}))},t.create=function(e,n){return new t(Rs({items:e,typeName:Td.ZodTuple,rest:null},rd(n)))},t}(ad),Od=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),Object.defineProperty(t.prototype,"keySchema",{get:function(){return this._def.keyType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueSchema",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx;if(r.parsedType!==Hs.object)return Zs(r,{code:Gs.invalid_type,expected:Hs.object,received:r.parsedType}),Ys;var a=[],i=this._def.keyType,o=this._def.valueType;for(var l in r.data)a.push({key:i._parse(new td(r,l,r.path,l)),value:o._parse(new td(r,r.data[l],r.path,l))});return r.common.async?js.mergeObjectAsync(n,a):js.mergeObjectSync(n,a)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.create=function(e,n,r){return new t(n instanceof ad?Rs({keyType:e,valueType:n,typeName:Td.ZodRecord},rd(r)):Rs({keyType:ud.create(),valueType:e,typeName:Td.ZodRecord},rd(n)))},t}(ad),Rd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t,n,r=this,a=this._processInputParams(e),i=a.status,o=a.ctx;if(o.parsedType!==Hs.map)return Zs(o,{code:Gs.invalid_type,expected:Hs.map,received:o.parsedType}),Ys;var l=this._def.keyType,u=this._def.valueType,c=Vs(o.data.entries()).map((function(e,t){var n=xs(e,2),r=n[0],a=n[1];return{key:l._parse(new td(o,r,o.path,[t,"key"])),value:u._parse(new td(o,a,o.path,[t,"value"]))}}));if(o.common.async){var s=new Map;return Promise.resolve().then((function(){return Ps(r,void 0,void 0,(function(){var e,t,n,r,a,o,l,u;return Ms(this,(function(d){switch(d.label){case 0:d.trys.push([0,6,7,8]),e=ks(c),t=e.next(),d.label=1;case 1:return t.done?[3,5]:[4,(n=t.value).key];case 2:return r=d.sent(),[4,n.value];case 3:if(a=d.sent(),"aborted"===r.status||"aborted"===a.status)return[2,Ys];"dirty"!==r.status&&"dirty"!==a.status||i.dirty(),s.set(r.value,a.value),d.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return o=d.sent(),l={error:o},[3,8];case 7:try{t&&!t.done&&(u=e.return)&&u.call(e)}finally{if(l)throw l.error}return[7];case 8:return[2,{status:i.value,value:s}]}}))}))}))}var d=new Map;try{for(var p=ks(c),f=p.next();!f.done;f=p.next()){var h=f.value,v=h.key,m=h.value;if("aborted"===v.status||"aborted"===m.status)return Ys;"dirty"!==v.status&&"dirty"!==m.status||i.dirty(),d.set(v.value,m.value)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return{status:i.value,value:d}},t.create=function(e,n,r){return new t(Rs({valueType:n,keyType:e,typeName:Td.ZodMap},rd(r)))},t}(ad),Pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx;if(r.parsedType!==Hs.set)return Zs(r,{code:Gs.invalid_type,expected:Hs.set,received:r.parsedType}),Ys;var a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(Zs(r,{code:Gs.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,message:a.minSize.message}),n.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(Zs(r,{code:Gs.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,message:a.maxSize.message}),n.dirty());var i=this._def.valueType;function o(e){var t,r,a=new Set;try{for(var i=ks(e),o=i.next();!o.done;o=i.next()){var l=o.value;if("aborted"===l.status)return Ys;"dirty"===l.status&&n.dirty(),a.add(l.value)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return{status:n.value,value:a}}var l=Vs(r.data.values()).map((function(e,t){return i._parse(new td(r,e,r.path,t))}));return r.common.async?Promise.all(l).then((function(e){return o(e)})):o(l)},t.prototype.min=function(e,n){return new t(Rs(Rs({},this._def),{minSize:{value:e,message:Us.toString(n)}}))},t.prototype.max=function(e,n){return new t(Rs(Rs({},this._def),{maxSize:{value:e,message:Us.toString(n)}}))},t.prototype.size=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,n){return new t(Rs({valueType:e,minSize:null,maxSize:null,typeName:Td.ZodSet},rd(n)))},t}(ad),Md=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validate=t.implement,t}return Os(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;if(n.parsedType!==Hs.function)return Zs(n,{code:Gs.invalid_type,expected:Hs.function,received:n.parsedType}),Ys;function r(e,t){return qs({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Bs,zs].filter((function(e){return!!e})),issueData:{code:Gs.invalid_arguments,argumentsError:t}})}function a(e,t){return qs({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Bs,zs].filter((function(e){return!!e})),issueData:{code:Gs.invalid_return_type,returnTypeError:t}})}var i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Ud?Ks((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Ps(t,void 0,void 0,(function(){var t,n,l;return Ms(this,(function(u){switch(u.label){case 0:return t=new Fs([]),[4,this._def.args.parseAsync(e,i).catch((function(n){throw t.addIssue(r(e,n)),t}))];case 1:return n=u.sent(),[4,o.apply(void 0,Vs(n))];case 2:return l=u.sent(),[4,this._def.returns._def.type.parseAsync(l,i).catch((function(e){throw t.addIssue(a(l,e)),t}))];case 3:return[2,u.sent()]}}))}))})):Ks((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var l=t._def.args.safeParse(e,i);if(!l.success)throw new Fs([r(e,l.error)]);var u=o.apply(void 0,Vs(l.data)),c=t._def.returns.safeParse(u,i);if(!c.success)throw new Fs([a(u,c.error)]);return c.data}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.prototype.args=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(Rs(Rs({},this._def),{args:Dd.create(e).rest(md.create())}))},t.prototype.returns=function(e){return new t(Rs(Rs({},this._def),{returns:e}))},t.prototype.implement=function(e){return this.parse(e)},t.prototype.strictImplement=function(e){return this.parse(e)},t.create=function(e,n,r){return new t(Rs({args:e?e.rest(md.create()):Dd.create([]).rest(md.create()),returns:n||md.create(),typeName:Td.ZodFunction},rd(r)))},t}(ad),kd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return this._def.getter()._parse({data:t.data,path:t.path,parent:t})},t.create=function(e,n){return new t(Rs({getter:e,typeName:Td.ZodLazy},rd(n)))},t}(ad),xd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){return e.data!==this._def.value?(Zs(this._getOrReturnCtx(e),{code:Gs.invalid_literal,expected:this._def.value}),Ys):{status:"valid",value:e.data}},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(Rs({value:e,typeName:Td.ZodLiteral},rd(n)))},t}(ad);function Vd(e,t){return new Hd(Rs({values:e,typeName:Td.ZodEnum},rd(t)))}var Hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if("string"!=typeof e.data){var t=this._getOrReturnCtx(e),n=this._def.values;return Zs(t,{expected:As.joinValues(n),received:t.parsedType,code:Gs.invalid_type}),Ys}return-1===this._def.values.indexOf(e.data)?(t=this._getOrReturnCtx(e),n=this._def.values,Zs(t,{received:t.data,code:Gs.invalid_enum_value,options:n}),Ys):Ks(e.data)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,n={};try{for(var r=ks(this._def.values),a=r.next();!a.done;a=r.next()){var i=a.value;n[i]=i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,n={};try{for(var r=ks(this._def.values),a=r.next();!a.done;a=r.next()){var i=a.value;n[i]=i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,n={};try{for(var r=ks(this._def.values),a=r.next();!a.done;a=r.next()){var i=a.value;n[i]=i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.create=Vd,t}(ad),Wd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=As.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Hs.string&&n.parsedType!==Hs.number){var r=As.objectValues(t);return Zs(n,{expected:As.joinValues(r),received:n.parsedType,code:Gs.invalid_type}),Ys}return-1===t.indexOf(e.data)?(r=As.objectValues(t),Zs(n,{received:n.data,code:Gs.invalid_enum_value,options:r}),Ys):Ks(e.data)},Object.defineProperty(t.prototype,"enum",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(Rs({values:e,typeName:Td.ZodNativeEnum},rd(n)))},t}(ad),Ud=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;return n.parsedType!==Hs.promise&&!1===n.common.async?(Zs(n,{code:Gs.invalid_type,expected:Hs.promise,received:n.parsedType}),Ys):Ks((n.parsedType===Hs.promise?n.data:Promise.resolve(n.data)).then((function(e){return t._def.type.parseAsync(e,{path:n.path,errorMap:n.common.contextualErrorMap})})))},t.create=function(e,n){return new t(Rs({type:e,typeName:Td.ZodPromise},rd(n)))},t}(ad),Gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e){var t=this,n=this._processInputParams(e),r=n.status,a=n.ctx,i=this._def.effect||null;if("preprocess"===i.type){var o=i.transform(a.data);return a.common.async?Promise.resolve(o).then((function(e){return t._def.schema._parseAsync({data:e,path:a.path,parent:a})})):this._def.schema._parseSync({data:o,path:a.path,parent:a})}var l={addIssue:function(e){Zs(a,e),e.fatal?r.abort():r.dirty()},get path(){return a.path}};if(l.addIssue=l.addIssue.bind(l),"refinement"===i.type){function d(e){var t=i.refinement(e,l);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e}if(!1===a.common.async){var u=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===u.status?Ys:("dirty"===u.status&&r.dirty(),d(u.value),{status:r.value,value:u.value})}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((function(e){return"aborted"===e.status?Ys:("dirty"===e.status&&r.dirty(),d(e.value).then((function(){return{status:r.value,value:e.value}})))}))}if("transform"===i.type){if(!1===a.common.async){var c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Qs(c))return c;var s=i.transform(c.value,l);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((function(e){return Qs(e)?Promise.resolve(i.transform(e.value,l)).then((function(e){return{status:r.value,value:e}})):e}))}As.assertNever(i)},t.create=function(e,n,r){return new t(Rs({schema:e,typeName:Td.ZodEffects,effect:n},rd(r)))},t.createWithPreprocess=function(e,n,r){return new t(Rs({schema:n,effect:{type:"preprocess",transform:e},typeName:Td.ZodEffects},rd(r)))},t}(ad),Fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){return this._getType(e)===Hs.undefined?Ks(void 0):this._def.innerType._parse(e)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(Rs({innerType:e,typeName:Td.ZodOptional},rd(n)))},t}(ad),zd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){return this._getType(e)===Hs.null?Ks(null):this._def.innerType._parse(e)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(Rs({innerType:e,typeName:Td.ZodNullable},rd(n)))},t}(ad),Bd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx,n=t.data;return t.parsedType===Hs.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e,t){return new Fd(Rs({innerType:e,typeName:Td.ZodOptional},rd(t)))},t}(ad),qd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t.prototype._parse=function(e){if(this._getType(e)!==Hs.nan){var t=this._getOrReturnCtx(e);return Zs(t,{code:Gs.invalid_type,expected:Hs.nan,received:t.parsedType}),Ys}return{status:"valid",value:e.data}},t.create=function(e){return new t(Rs({typeName:Td.ZodNaN},rd(e)))},t}(ad);Id.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(Td||={});var Zd=ud.create;cd.create,qd.create,sd.create;var jd=dd.create;pd.create,fd.create,hd.create,vd.create,md.create,yd.create,Ed.create;var Yd=gd.create,Kd=Id.create;Id.strictCreate;var Jd=Sd.create;_d.create,wd.create,Dd.create,Od.create,Rd.create,Pd.create,Md.create,kd.create;var Xd=xd.create;Hd.create;var Qd=Wd.create;Ud.create,Gd.create,Fd.create,zd.create;var $d,ep=Gd.createWithPreprocess,tp=Kd({sharedParameters:Kd({shouldAnalyze:jd().optional(),useContinueMode:jd().optional(),genericChallengeId:Zd().optional()}).optional()}),np=Kd({userId:Zd(),challengeId:Zd(),shouldShowRememberDeviceCheckbox:jd(),actionType:Qd(vc)}).and(tp),rp=Kd({actionType:Qd(ra),dataExchangeBlob:Zd(),unifiedCaptchaId:Zd()}).and(tp),ap=Kd({userId:Zd(),sessionId:Zd()}).and(tp),ip=Kd({defaultType:Qd(Nl),availableTypes:Yd(Qd(Nl)),defaultTypeMetadata:Kd({passkeyAuthOptions:Zd().optional(),passkeySessionId:Zd().optional()}).nullable()}).and(tp),op=Kd({}).and(tp),lp=Kd({}).and(tp),up=Kd({sessionId:Zd()}).and(tp),cp=Kd({challengeId:Zd(),puzzleType:Qd(Ql)}).and(tp),sp=Kd({challengeId:Zd()}).and(tp),dp=Kd({integrityType:Zd(),requestHash:Zd()}).and(tp),pp=Kd({challengeId:Zd(),artifacts:Kd({puzzleType:Qd(Qo),seed:Zd(),rounds:Zd(),layers:Zd()})}).and(tp);(Ad={})[Ls.TWO_STEP_VERIFICATION]=np,Ad[Ls.CAPTCHA]=rp,Ad[Ls.FORCE_AUTHENTICATOR]=op,Ad[Ls.FORCE_TWO_STEP_VERIFICATION]=lp,Ad[Ls.SECURITY_QUESTIONS]=ap,Ad[Ls.REAUTHENTICATION]=ip,Ad[Ls.PROOF_OF_WORK]=up,Ad[Ls.ROSTILE]=cp,Ad[Ls.PRIVATE_ACCESS_TOKEN]=sp,Ad[Ls.DEVICE_INTEGRITY]=dp,Ad[Ls.PROOF_OF_SPACE]=pp;var fp=Ad;!function(e){e.CHALLENGE_COMPLETED="challengeCompleted",e.CHALLENGE_DISPLAYED="challengeDisplayed",e.CHALLENGE_INITIALIZED="challengeInitialized",e.CHALLENGE_INVALIDATED="challengeInvalidated",e.CHALLENGE_PAGE_LOADED="challengePageLoaded",e.CHALLENGE_PARSED="challengeParsed"}(Ld||={});var hp=function(){function e(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function vp(){return(vp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function mp(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function yp(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Ep=new ma,gp=new ws;function Cp(e,t,n){var r,a=Object.values(Ls).includes(t)?t:null;if(null===a)return null;try{r=JSON.parse(n)}catch(e){return null}var i=fp[a].safeParse(r);return i.success?{challengeId:e,challengeType:a,challengeMetadata:r}:(console.error(Ss,i.error),null)}function bp(e){var t=e.challengeBaseProperties,n=e.challengeSpecificProperties;return mp(void 0,void 0,Promise,(function(){var e,r,a,i,o,l,u,c,s,d,p,f,h,v,m,y,E,g,C,b;return yp(this,(function(T){switch(e=n.challengeMetadata.sharedParameters,r=t.onChallengeCompleted,t.onChallengeCompleted=function(a){return mp(void 0,void 0,void 0,(function(){var i,o;return yp(this,(function(l){switch(l.label){case 0:return[4,Ep.genericChallenge.continueChallenge((null==e?void 0:e.genericChallengeId)||n.challengeId,a.challengeType,JSON.stringify(a.metadata))];case 1:return(i=l.sent()).isError?(gp.fireContinueFailureEvent(n.challengeType),t.onChallengeInvalidated({challengeType:n.challengeType,errorCode:ys.UNKNOWN,errorMessage:""}),[2]):""===i.value.challengeType?(r(a),[2]):null===(o=Cp(i.value.challengeId,i.value.challengeType,i.value.challengeMetadata))?(console.error(Ss,"Challenge headers failed to be parsed"),gp.fireParseFailureEvent(),t.onChallengeInvalidated({challengeType:n.challengeType,errorCode:ys.UNKNOWN,errorMessage:""}),[2]):(t.onChallengeCompleted=r,bp({challengeBaseProperties:t,challengeSpecificProperties:o}).then((function(e){if(!e)return gp.fireRenderFailureEvent(o.challengeType),console.error(Ss,"Challenge component failed to initialize"),void t.onChallengeInvalidated({challengeType:o.challengeType,errorCode:ys.UNKNOWN,errorMessage:""});gp.fireSuccessEvent(o.challengeType)})).catch((function(){gp.fireRenderFailureEvent(o.challengeType),console.error(Ss,"Exception on rendering challenge component"),t.onChallengeInvalidated({challengeType:o.challengeType,errorCode:ys.UNKNOWN,errorMessage:""})})),[2])}}))}))},!0===(null==e?void 0:e.shouldAnalyze)&&(a=mo.load({monitoring:!1}),i=t.onChallengeCompleted,t.onChallengeCompleted=function(e){return mp(void 0,void 0,void 0,(function(){var t,r;return yp(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,a];case 1:return[4,o.sent().get()];case 2:return t=o.sent(),r={},Object.entries(t.components).forEach((function(e){var t=e[0],n=e[1];"canvas"!==t&&(r[t]="object"==typeof n.value?JSON.stringify(n.value):n.value)})),W().EventStream.SendEventWithTarget(_s,Ns.onCompleted,vp({challengeId:n.challengeId,library:"FPJS",version:t.version},r),W().EventStream.TargetTypes.WWW),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,i(e)]}}))}))}),n.challengeType){case Ls.CAPTCHA:return o=n.challengeType,l=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){},appType:null},t),l),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:o},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:o,metadata:{unifiedCaptchaId:e.captchaId,captchaToken:e.captchaToken,actionType:l.actionType}})}}),[2,Ja(b)];case Ls.FORCE_AUTHENTICATOR:return C=n.challengeMetadata,b=vp(vp({forceActionRedirectChallengeType:Fa.ForceAuthenticator},t),C),(p=si(b))&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,Promise.resolve(p)];case Ls.FORCE_TWO_STEP_VERIFICATION:return C=n.challengeMetadata,b=vp(vp({forceActionRedirectChallengeType:Fa.ForceTwoStepVerification},t),C),(p=si(b))&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,Promise.resolve(p)];case Ls.TWO_STEP_VERIFICATION:return u=n.challengeType,c=n.challengeMetadata,b=vp(vp(vp({},t),c),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:u},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:u,metadata:vp(vp({},e),{challengeId:c.challengeId,actionType:c.actionType})})}}),(p=Is(b))&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,Promise.resolve(p)];case Ls.SECURITY_QUESTIONS:return s=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:s},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:s,metadata:e})}}),(p=Uc(b))&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,Promise.resolve(p)];case Ls.REAUTHENTICATION:return d=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:d},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:d,metadata:e})}}),(p=ju(b))&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,Promise.resolve(p)];case Ls.PROOF_OF_WORK:return f=n.challengeType,h=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){}},t),h),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:f},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:f,metadata:vp(vp({},e),{sessionId:h.sessionId})})}}),[2,Promise.resolve(ru(b))];case Ls.ROSTILE:return v=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){}},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:v},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:v,metadata:vp({},e)})}}),[2,Promise.resolve(Cc(b))];case Ls.PRIVATE_ACCESS_TOKEN:return m=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){}},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:m},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:m,metadata:vp({},e)})}}),[2,Promise.resolve(Ko(b))];case Ls.DEVICE_INTEGRITY:return y=n.challengeId,E=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){},challengeId:y},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:E},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:E,metadata:vp({},e)})}}),[2,Promise.resolve(Mo(b))];case Ls.PROOF_OF_SPACE:return g=n.challengeType,C=n.challengeMetadata,b=vp(vp(vp({onChallengeDisplayed:function(){}},t),C),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(vp({challengeType:g},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:g,metadata:vp({},e)})}}),[2,Promise.resolve(Ol(b))];default:return[2,!1]}return[2]}))}))}var Tp="generic-challenge-error",Ip=function(e){function t(n){var r=e.call(this,t.getMessage(n))||this;return Object.setPrototypeOf(r,t.prototype),r.name=t.name,r._parameters=n,r._className=Tp,r}return hp(t,e),t.match=function(e){return"object"==typeof e&&null!==e&&e._className===Tp},t.matchAbandoned=function(e){return t.match(e)&&e.parameters.kind===Es.ABANDONED},t.getMessage=function(e){return"Got ("+["Kind: "+e.kind,"Type: "+(e.data.challengeType||"unknown"),"Code: "+(e.kind===Es.INVALIDATED?e.data.errorCode:"null")].join("; ")+")"},Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!1,configurable:!0}),t}(Error);function Sp(e){return new Promise((function(t,n){var r,a=e.retryRequest,i=e.containerId,o=e.challengeId,l=e.challengeTypeRaw,u=e.challengeMetadataJsonBase64;try{r=atob(u)}catch(e){if(e instanceof DOMException&&e.code===DOMException.INVALID_CHARACTER_ERR)return console.error(Ss,"Base-64 decoding failed",e),void n(new Ip({kind:Es.UNKNOWN,data:{}}));throw e}var c=Cp(o,l,r);if(null===c)return console.error(Ss,"Challenge headers failed to be parsed"),n(new Ip({kind:Es.UNKNOWN,data:{}})),void gp.fireParseFailureEvent();if(null===document.getElementById(i)){var s=document.createElement("div");s.id=i,document.body.appendChild(s)}bp({challengeBaseProperties:{containerId:i,renderInline:!1,onChallengeCompleted:function(e){try{t(a(o,btoa(JSON.stringify(e.metadata))))}catch(e){if(!(e instanceof DOMException)||e.code!==DOMException.INVALID_CHARACTER_ERR)throw e;console.error(Ss,"Base-64 encoding failed",e),n(new Ip({kind:Es.UNKNOWN,data:{challengeType:c.challengeType}}))}},onChallengeInvalidated:function(e){return n(new Ip({kind:Es.INVALIDATED,data:e}))},onModalChallengeAbandoned:function(){return n(new Ip({kind:Es.ABANDONED,data:{challengeType:c.challengeType}}))}},challengeSpecificProperties:c}).then((function(e){e?gp.fireSuccessEvent(c.challengeType):(gp.fireRenderFailureEvent(c.challengeType),console.error(Ss,"Challenge component failed to initialize"),n(new Ip({kind:Es.UNKNOWN,data:{challengeType:c.challengeType}})))}))}))}var _p="Hybrid Wrapper:";function Np(e){var t=e.replace(/[^A-Za-z0-9-_]/g,""),n=Nn.fido2Util.base64UrlStringToBase64String(t);try{return atob(n)}catch(e){if(e instanceof DOMException&&e.code===DOMException.INVALID_CHARACTER_ERR)return console.error(_p,"Base-64 decoding failed",e),null;throw e}}!function(e){e.ACTION_TYPE="action-type",e.ALLOW_REMEMBER_DEVICE="allow-remember-device",e.APP_TYPE="app-type",e.BARISTA_MODE="barista-mode",e.CAPTCHA_ID="captcha-id",e.CHALLENGE_ID="challenge-id",e.CHALLENGE_METADATA_JSON="challenge-metadata-json",e.CHALLENGE_TYPE="challenge-type",e.DARK_MODE="dark-mode",e.DATA_EXCHANGE_BLOB="data-exchange-blob",e.GENERIC_CHALLENGE_TYPE="generic-challenge-type",e.INTEGRITY_TYPE="integrity-type",e.REQUEST_HASH="request-hash",e.PROOF_OF_SPACE_ARTIFACTS="proof-of-space-artifacts",e.PUZZLE_TYPE="puzzle-type",e.SESSION_ID="session-id",e.USER_ID="user-id",e.DEFAULT_TYPE="default-type",e.AVAILABLE_TYPES="available-types",e.DEFAULT_TYPE_METADATA_JSON="default-type-metadata-json",e.GENERIC_CHALLENGE_ID="generic-challenge-id",e.ORIGIN="origin"}($d||={});var Ap=Kd({challengeType:ep((function(e){return"string"==typeof e?e.replace(/-/g,""):e}),Jd([Qd(Ls),Xd("generic")])),darkMode:Jd([Xd("false"),Xd("true")]).default("false").transform((function(e){return"true"===e})),appType:Zd().default("unknown"),baristaMode:Jd([Xd("false"),Xd("true")]).default("false").transform((function(e){return"true"===e})),origin:Zd().default("")}),Lp=Kd({actionType:Qd(ra),dataExchangeBlob:Zd(),unifiedCaptchaId:Zd()}),wp=Kd({userId:Zd(),challengeId:Zd(),actionType:Qd(vc),allowRememberDevice:Jd([Xd("false"),Xd("true")]).transform((function(e){return"true"===e}))}),Dp=Kd({userId:Zd(),sessionId:Zd()}),Op=Kd({defaultType:Qd(Nl),availableTypes:Yd(Qd(Nl)),defaultTypeMetadataJSON:Zd().optional()}),Rp=Kd({sessionId:Zd()}),Pp=Kd({challengeId:Zd(),puzzleType:Qd(Ql)}),Mp=Kd({challengeId:Zd()}),kp=Kd({challengeId:Zd(),integrityType:Zd(),requestHash:Zd()}),xp=Kd({challengeId:Zd(),artifacts:Kd({puzzleType:Qd(Qo),seed:Zd(),rounds:Zd(),layers:Zd()})}),Vp=Kd({challengeId:Zd().default(""),challengeType:Qd(Ls),challengeMetadataJson:Zd()});function Hp(e,t,n,r){return new(n||=Promise)((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))}function Wp(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var Up="light-theme",Gp="dark-theme";function Fp(e,t,n,r){var a,i;console.log(_p,"Sending hybrid call:",t),null!==(i=H.Hybrid.Navigation)&&void 0!==i&&i.navigateToFeature(((a={}).feature=t,a.data=n,a),(function(){return console.log(_p,"Sent hybrid call:",t)}));var o=e[t],l=document.getElementById(o);if(null!==l&&"INPUT"===l.tagName){l.value=JSON.stringify(n);var u=document.createEvent("HTMLEvents");u.initEvent("callbackInputChanged",!1,!1),l.dispatchEvent(u)}try{r&&function(e,t,n){if(window.parent){var r=H.EnvironmentUrls.domain?"https://"+n+"."+(H.EnvironmentUrls.domain.includes("sitetest")?"robloxlabs.com":"roblox.com"):"URL_NOT_FOUND";window.parent.postMessage({genericChallengeResponse:{type:e,data:t}},r)}}(t,n,r)}catch(e){console.error(_p,e)}}function zp(e,t,n){return Hp(void 0,void 0,Promise,(function(){var r,a,i,o;return Wp(this,(function(l){switch(l.label){case 0:return null===(r=function(){var e=H.UrlParser.getParametersAsObject(),t={actionType:e[$d.ACTION_TYPE],dataExchangeBlob:e[$d.DATA_EXCHANGE_BLOB],unifiedCaptchaId:e[$d.CAPTCHA_ID]},n=Lp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}())?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),a=r.actionType,i=r.dataExchangeBlob,o=r.unifiedCaptchaId,[4,Ja({containerId:e,actionType:a,appType:n,dataExchangeBlob:i,unifiedCaptchaId:o,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})]);case 1:return!1===l.sent()?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),[2,!0])}}))}))}function Bp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={userId:e[$d.USER_ID],challengeId:e[$d.CHALLENGE_ID],actionType:e[$d.ACTION_TYPE],allowRememberDevice:e[$d.ALLOW_REMEMBER_DEVICE]},n=wp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Is({containerId:e,userId:r.userId,challengeId:r.challengeId,actionType:r.actionType,appType:n,renderInline:!0,shouldModifyBrowserHistory:!0,shouldShowRememberDeviceCheckbox:r.allowRememberDevice,onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),Fp(t,Ld.CHALLENGE_DISPLAYED,{displayed:!0}),!0))}function qp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={userId:e[$d.USER_ID],sessionId:e[$d.SESSION_ID]},n=Dp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Uc({containerId:e,userId:r.userId,sessionId:r.sessionId,appType:n,renderInline:!0,onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),Fp(t,Ld.CHALLENGE_DISPLAYED,{displayed:!0}),!0))}function Zp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={defaultType:e[$d.DEFAULT_TYPE],availableTypes:e[$d.AVAILABLE_TYPES].split(","),defaultTypeMetadataJSON:e[$d.DEFAULT_TYPE_METADATA_JSON]},n=Op.safeParse(t);if(!n.success)return console.error(_p,n.error),null;var r=n.data,a=r.defaultType,i=r.availableTypes,o=r.defaultTypeMetadataJSON;if(void 0===o)return n.data;var l=Np(o);return null===l?null:{defaultType:a,availableTypes:i,defaultTypeMetadataJSON:l}}();if(null===r)return Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1;Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0});var a=r.defaultType,i=r.availableTypes,o=r.defaultTypeMetadataJSON,l=null;if(void 0!==o)try{l=JSON.parse(o)}catch(e){return!1}return!1===ju({containerId:e,renderInline:!0,defaultType:a,availableTypes:i,defaultTypeMetadata:l,onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),Fp(t,Ld.CHALLENGE_DISPLAYED,{displayed:!0}),!0)}function jp(e,t,n){var r=function(){var e={challengeId:H.UrlParser.getParametersAsObject()[$d.CHALLENGE_ID]},t=Mp.safeParse(e);return t.success?t.data:(console.error(_p,t.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Ko({containerId:e,challengeId:r.challengeId,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),!0))}function Yp(e,t,n){var r=function(){var e={sessionId:H.UrlParser.getParametersAsObject()[$d.SESSION_ID]},t=Rp.safeParse(e);return t.success?t.data:(console.error(_p,t.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===ru({containerId:e,sessionId:r.sessionId,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),!0))}function Kp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={challengeId:e[$d.CHALLENGE_ID],puzzleType:e[$d.PUZZLE_TYPE]},n=Pp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Cc({containerId:e,challengeId:r.challengeId,puzzleType:r.puzzleType,appType:n,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),!0))}function Jp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={challengeId:e[$d.CHALLENGE_ID],integrityType:e[$d.INTEGRITY_TYPE],requestHash:e[$d.REQUEST_HASH]},n=kp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Mo({containerId:e,challengeId:r.challengeId,integrityType:r.integrityType,requestHash:r.requestHash,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),!0))}function Xp(e,t,n){var r=function(){var e=H.UrlParser.getParametersAsObject(),t={challengeId:e[$d.CHALLENGE_ID],artifacts:e[$d.PROOF_OF_SPACE_ARTIFACTS]},n=xp.safeParse(t);return n.success?n.data:(console.error(_p,n.error),null)}();return null===r?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),!1):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===Ol({containerId:e,challengeId:r.challengeId,artifacts:r.artifacts,renderInline:!0,onChallengeDisplayed:function(e){return Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),!0))}function Qp(e,t,n,r){return Hp(void 0,void 0,Promise,(function(){var a,i,o;return Wp(this,(function(l){switch(l.label){case 0:return a=window.location.href.split("?")[0],null===(i=function(){var e=H.UrlParser.getParametersAsObject(),t={challengeId:e[$d.GENERIC_CHALLENGE_ID],challengeType:e[$d.GENERIC_CHALLENGE_TYPE],challengeMetadataJson:e[$d.CHALLENGE_METADATA_JSON]},n=Vp.safeParse(t);if(!n.success)return console.error(_p,n.error),null;var r=n.data,a=r.challengeId,i=r.challengeType,o=Np(r.challengeMetadataJson);return null===o?null:Cp(a,i,o)}())?(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),r.length>0?[4,bp({challengeBaseProperties:{containerId:e,renderInline:!1,appType:n,shouldModifyBrowserHistory:!0,onChallengeCompleted:function(e){window.history.replaceState(null,"",a),Fp(t,Ld.CHALLENGE_COMPLETED,e,r)},onChallengeInvalidated:function(e){window.history.replaceState(null,"",a),Fp(t,Ld.CHALLENGE_INVALIDATED,e,r)},onChallengeDisplayed:function(e){Fp(t,Ld.CHALLENGE_DISPLAYED,e,r)},onModalChallengeAbandoned:function(){Fp(t,Ld.CHALLENGE_INVALIDATED,{abandoned:!0},r)}},challengeSpecificProperties:i})]:[3,2]);case 1:return o=l.sent(),[3,4];case 2:return[4,bp({challengeBaseProperties:{containerId:e,renderInline:!0,appType:n,shouldModifyBrowserHistory:!0,onChallengeCompleted:function(e){window.history.replaceState(null,"",a),Fp(t,Ld.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){window.history.replaceState(null,"",a),Fp(t,Ld.CHALLENGE_INVALIDATED,e)},onChallengeDisplayed:function(e){Fp(t,Ld.CHALLENGE_DISPLAYED,e)},onModalChallengeAbandoned:null},challengeSpecificProperties:i})];case 3:o=l.sent(),l.label=4;case 4:return!1===o?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1},r),[2,!1]):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0},r),[2,!0])}}))}))}function $p(e,t,n){return Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===si({containerId:e,forceActionRedirectChallengeType:Fa.ForceAuthenticator,renderInline:!0,onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),Fp(t,Ld.CHALLENGE_DISPLAYED,{displayed:!0}),!0)}function ef(e,t,n){return Fp(t,Ld.CHALLENGE_PARSED,{parsed:!0}),!1===si({containerId:e,forceActionRedirectChallengeType:Fa.ForceTwoStepVerification,renderInline:!0,onModalChallengeAbandoned:null})?(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!1}),!1):(Fp(t,Ld.CHALLENGE_INITIALIZED,{initialized:!0}),Fp(t,Ld.CHALLENGE_DISPLAYED,{displayed:!0}),!0)}function tf(e){var t=e.containerId,n=e.hybridTargetToCallbackInputId;return Hp(void 0,void 0,void 0,(function(){var e;return Wp(this,(function(r){var a,i,o;if(Fp(n,Ld.CHALLENGE_PAGE_LOADED,{pageLoaded:!0}),i={challengeType:(a=H.UrlParser.getParametersAsObject())[$d.CHALLENGE_TYPE],darkMode:a[$d.DARK_MODE],appType:a[$d.APP_TYPE],baristaMode:a[$d.BARISTA_MODE],origin:a[$d.ORIGIN]},o=Ap.safeParse(i),null===(e=o.success?o.data:(console.error(_p,o.error),null)))return Fp(n,Ld.CHALLENGE_PARSED,{parsed:!1}),[2,!1];switch(e.baristaMode&&(document.body.style.backgroundColor="transparent"),e.darkMode?(document.body.classList.remove(Up),document.body.classList.add(Gp)):(document.body.classList.remove(Gp),document.body.classList.add(Up)),e.challengeType){case Ls.CAPTCHA:return[2,zp(t,n,e.appType)];case Ls.FORCE_AUTHENTICATOR:return[2,$p(t,n,e.appType)];case Ls.FORCE_TWO_STEP_VERIFICATION:return[2,ef(t,n,e.appType)];case Ls.TWO_STEP_VERIFICATION:return[2,Bp(t,n,e.appType)];case Ls.SECURITY_QUESTIONS:return[2,qp(t,n,e.appType)];case Ls.REAUTHENTICATION:return[2,Zp(t,n,e.appType)];case Ls.PROOF_OF_WORK:return[2,Yp(t,n,e.appType)];case Ls.ROSTILE:return[2,Kp(t,n,e.appType)];case Ls.PRIVATE_ACCESS_TOKEN:return[2,jp(t,n,e.appType)];case Ls.DEVICE_INTEGRITY:return[2,Jp(t,n,e.appType)];case Ls.PROOF_OF_SPACE:return[2,Xp(t,n,e.appType)];case"generic":return[2,Qp(t,n,e.appType,e.origin)];default:return e.challengeType,[2,!1]}return[2]}))}))}var nf={Captcha:N,DeviceIntegrity:L,ForceActionRedirect:A,Generic:x,HybridWrapper:V,PrivateAccessToken:w,ProofOfSpace:D,ProofOfWork:O,Reauthentication:R,Rostile:P,SecurityQuestions:M,TwoStepVerification:k};Object.assign(W(),{AccountIntegrityChallengeService:nf})}()}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("Challenge");